---
description: Ритуалы работы с MCP при разработке
alwaysApply: false
---
Ритуалы работы с MCP при разработке
3.1 Перед началом категории

Запросить контракт у ozon-api-docs:

Команда (в Cursor/Claude):
Prompt:
«ozon-api-docs: дай полный список эндпоинтов категории Products с путями, методами, обязательными полями, примерами запросов/ответов и кодами ошибок. Верни в JSON для автогенерации типов.»

Сверить best practices у context7:
Prompt:
«context7: кратко перечисли лучшие практики для написания HTTP SDK на TypeScript с строгой типизацией, ретраями, лимитами и контрактными тестами для маркетплейс-API. Верни как чек-лист.»

Зафиксировать чек-лист в docs/ (либо в PR описании): список методов и критерии «готовности категории».

3.2 Во время реализации метода

Для каждого эндпоинта запросить у ozon-api-docs:

параметры, типы, ограничения, пагинацию/фильтры, варианты ошибок, примеры.

Попросить у context7 шаблон функции-обёртки (валидаторы, Zod-схемы, JSDoc, сигнатуры).

Сгенерированный код обязательно вручную доработать: названия типов, юнит-тесты, негативные кейсы.

3.3 Перед коммитом категории

Прогнать pnpm lint, pnpm typecheck, pnpm test.

Прогнать contract/live тесты (см. ниже) только с тестовыми ключами и флагом LIVE=1.

Обновить чек-лист и Coverage.

Правила «Готовности категории» (Definition of Done)

Категория считается готовой, когда:

Все методы категории перечислены и описаны из ozon-api-docs (MCP отчёт приложен к PR).

Реализованы функции SDK, типы, Zod-схемы, пагинация.

Юнит-тесты покрывают: успех, 4xx, 429/5xx ретраи, валидацию.

Контрактные live-тесты написаны и задокументированы (скрытые секrets).

Coverage по строкам/ветвлениям категории ≥ 95%.

Докблоки JSDoc и примеры использования обновлены.

Линт/тайпчек/CI зелёные. CHANGELOG обновлён.