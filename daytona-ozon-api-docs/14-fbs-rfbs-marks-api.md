# FBS & rFBS Marks API

API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∫–æ–¥–∞–º–∏ DataMatrix –≤ —Å—Ö–µ–º–∞—Ö FBS –∏ rFBS –≤ OZON Seller API.

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 13 –º–µ—Ç–æ–¥–æ–≤

## –û–±–∑–æ—Ä

FBS & rFBS Marks API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π:
- üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–∞–º–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- üìã –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤ DataMatrix
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- üîç –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –°–∏—Å—Ç–µ–º–∞ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞** - —Ä–æ—Å—Å–∏–π—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –∫–æ–¥–∞–º–∏ DataMatrix –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö".

### üìù –û–±—Ä–∞–∑—Ü—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ PDF-–æ–±—Ä–∞–∑—Ü–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ–±—Ä–∞–∑—Ü–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –æ–±—Ä–∞–∑—Ü–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞

### üî¢ –ö–æ–¥—ã DataMatrix
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"  
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–¥–æ–≤ —Ç–æ–≤–∞—Ä–∞–º

### ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- –ö–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ —Å–∏—Å—Ç–µ–º—ã "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–∑—Ü–∞–º –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ä–æ–∫–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤

## –ú–µ—Ç–æ–¥—ã API

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–∞–º–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

#### createProductExemplar()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑–µ—Ü –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–∞

```typescript
interface FbsRfbsMarksProductExemplarCreateRequest {
  product_id: number;
  file: string; // Base64 encoded PDF content
  file_name: string;
}
```

#### getProductExemplarInfo()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º –æ–±—Ä–∞–∑—Ü–µ

#### getProductExemplarList()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑—Ü–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–∞

#### deleteProductExemplar()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑–µ—Ü –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

#### getProductExemplarDeleteStatus()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É–¥–∞–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑—Ü–∞

#### validateProductExemplar()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑–µ—Ü –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

#### getProductExemplarValidateStatus()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ–±—Ä–∞–∑—Ü–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞–º–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

#### uploadPostingCodes()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```typescript
interface FbsRfbsMarksPostingCodesUploadRequest {
  posting_number: string;
  codes: Array<{
    sku: string;
    gtd: string; // DataMatrix –∫–æ–¥
    quantity: number;
  }>;
}
```

#### getPostingCodesUploadStatus()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

#### validatePostingCodes()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### getPostingCodesValidateStatus()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

#### getPostingCodesInfo()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–¥–∞—Ö –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

#### getPostingList()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π

```typescript
interface FbsRfbsMarksPostingListRequest {
  status?: 'awaiting_codes' | 'codes_uploaded' | 'validated';
  date_from?: string;
  date_to?: string;
  limit?: number;
  offset?: number;
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { OzonSellerAPI } from 'bmad-ozon-seller-api';

const api = new OzonSellerAPI({
  clientId: 'your-client-id',
  apiKey: 'your-api-key'
});

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑–µ—Ü –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
const exemplarResult = await api.fbsRfbsMarks.createProductExemplar({
  product_id: 123456,
  file: 'base64EncodedPdfContent',
  file_name: 'marking_exemplar.pdf'
});

// –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Ç—Ä–µ–±—É—é—â–∏–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É
const postingsWithMarking = await api.fbsRfbsMarks.getPostingList({
  status: 'awaiting_codes',
  date_from: '2024-01-01T00:00:00Z',
  date_to: '2024-01-31T23:59:59Z',
  limit: 100
});

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
const codesResult = await api.fbsRfbsMarks.uploadPostingCodes({
  posting_number: 'FBS-123456789',
  codes: [
    { sku: 'SKU123', gtd: 'marking_code_1', quantity: 1 },
    { sku: 'SKU456', gtd: 'marking_code_2', quantity: 2 }
  ]
});

// –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥—ã
const validationResult = await api.fbsRfbsMarks.validatePostingCodes({
  posting_number: 'FBS-123456789'
});
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –ú–µ–Ω–µ–¥–∂–µ—Ä –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤

```typescript
class ProductMarkingManager {
  constructor(private api: OzonSellerAPI) {}

  async setupProductMarking(productId: number, exemplarFile: Buffer): Promise<void> {
    console.log(`üè∑Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${productId}`);

    try {
      // 1. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª –≤ base64
      const base64File = exemplarFile.toString('base64');
      const fileName = `product_${productId}_exemplar.pdf`;

      // 2. –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—Ä–∞–∑–µ—Ü –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
      const uploadResult = await this.api.fbsRfbsMarks.createProductExemplar({
        product_id: productId,
        file: base64File,
        file_name: fileName
      });

      console.log(`üì§ –û–±—Ä–∞–∑–µ—Ü –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–¥–∞—á–∞: ${uploadResult.task_id}`);

      // 3. –ñ–¥–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
      const uploadStatus = await this.waitForTaskCompletion(
        uploadResult.task_id!,
        (taskId) => this.api.fbsRfbsMarks.getProductExemplarInfo({ task_id: taskId })
      );

      if (uploadStatus.status !== 'completed') {
        throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑—Ü–∞: ${uploadStatus.error_message}`);
      }

      console.log(`‚úÖ –û–±—Ä–∞–∑–µ—Ü —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω: ${uploadStatus.exemplar_id}`);

      // 4. –í–∞–ª–∏–¥–∏—Ä—É–µ–º –æ–±—Ä–∞–∑–µ—Ü
      const validationTask = await this.api.fbsRfbsMarks.validateProductExemplar({
        exemplar_id: uploadStatus.exemplar_id!
      });

      console.log(`üîç –ó–∞–ø—É—â–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è: ${validationTask.task_id}`);

      // 5. –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      const validationStatus = await this.waitForTaskCompletion(
        validationTask.task_id!,
        (taskId) => this.api.fbsRfbsMarks.getProductExemplarValidateStatus({ task_id: taskId })
      );

      // 6. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      if (validationStatus.is_valid) {
        console.log('‚úÖ –û–±—Ä–∞–∑–µ—Ü –ø—Ä–æ—à–µ–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é');
        this.logValidationDetails(validationStatus.validation_details);
      } else {
        console.log('‚ùå –û–±—Ä–∞–∑–µ—Ü –Ω–µ –ø—Ä–æ—à–µ–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é');
        this.logValidationErrors(validationStatus.validation_errors);
        throw new Error('–û–±—Ä–∞–∑–µ—Ü –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º');
      }

    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏:', error);
      throw error;
    }
  }

  async getProductExemplars(productId: number): Promise<any[]> {
    const exemplars = await this.api.fbsRfbsMarks.getProductExemplarList({
      product_id: productId,
      limit: 50
    });

    console.log(`üìö –ù–∞–π–¥–µ–Ω–æ –æ–±—Ä–∞–∑—Ü–æ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${productId}: ${exemplars.total}`);
    
    return exemplars.exemplars?.map(exemplar => ({
      id: exemplar.exemplar_id,
      filename: exemplar.file_name,
      status: exemplar.status,
      created_at: exemplar.created_at,
      is_valid: exemplar.validation_result?.is_valid
    })) || [];
  }

  async cleanupOldExemplars(productId: number): Promise<void> {
    const exemplars = await this.getProductExemplars(productId);
    const oldExemplars = exemplars.filter(exemplar => 
      exemplar.status === 'invalid' || 
      (exemplar.created_at && new Date(exemplar.created_at) < new Date(Date.now() - 30 * 24 * 60 * 60 * 1000))
    );

    console.log(`üßπ –£–¥–∞–ª–µ–Ω–∏–µ ${oldExemplars.length} —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –æ–±—Ä–∞–∑—Ü–æ–≤`);

    for (const exemplar of oldExemplars) {
      try {
        const deleteResult = await this.api.fbsRfbsMarks.deleteProductExemplar({
          exemplar_id: exemplar.id
        });

        const deleteStatus = await this.waitForTaskCompletion(
          deleteResult.task_id!,
          (taskId) => this.api.fbsRfbsMarks.getProductExemplarDeleteStatus({ task_id: taskId })
        );

        if (deleteStatus.success) {
          console.log(`‚úÖ –£–¥–∞–ª–µ–Ω –æ–±—Ä–∞–∑–µ—Ü: ${exemplar.filename}`);
        } else {
          console.log(`‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ${exemplar.filename}`);
        }
      } catch (error) {
        console.log(`‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑—Ü–∞ ${exemplar.id}:`, error.message);
      }
    }
  }

  private logValidationDetails(details: any): void {
    if (!details) return;
    
    console.log('üìã –î–µ—Ç–∞–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:');
    if (details.quality_valid !== undefined) {
      console.log(`  –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ${details.quality_valid ? '‚úÖ' : '‚ùå'}`);
    }
    if (details.format_valid !== undefined) {
      console.log(`  –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞: ${details.format_valid ? '‚úÖ' : '‚ùå'}`);
    }
    if (details.content_valid !== undefined) {
      console.log(`  –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏: ${details.content_valid ? '‚úÖ' : '‚ùå'}`);
    }
  }

  private logValidationErrors(errors: any[]): void {
    if (!errors || errors.length === 0) return;
    
    console.log('‚ùå –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:');
    errors.forEach((error, index) => {
      console.log(`  ${index + 1}. ${error.code}: ${error.message}`);
    });
  }

  private async waitForTaskCompletion(taskId: string, statusChecker: (id: string) => Promise<any>): Promise<any> {
    const maxAttempts = 30;
    const delay = 2000;

    for (let attempt = 0; attempt < maxAttempts; attempt++) {
      const status = await statusChecker(taskId);
      
      if (status.status === 'completed' || status.is_valid !== undefined) {
        return status;
      } else if (status.status === 'error') {
        throw new Error(status.error_message || '–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏');
      }
      
      console.log(`‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è... (${attempt + 1}/${maxAttempts})`);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
    
    throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏');
  }
}
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

```typescript
class MarkingCodesProcessor {
  constructor(private api: OzonSellerAPI) {}

  async processMarkingCodes(): Promise<void> {
    console.log('üî¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏');

    // 1. –ü–æ–ª—É—á–∞–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –æ–∂–∏–¥–∞—é—â–∏–µ –∫–æ–¥—ã
    const pendingPostings = await this.api.fbsRfbsMarks.getPostingList({
      status: 'awaiting_codes',
      limit: 100
    });

    if (!pendingPostings.postings || pendingPostings.postings.length === 0) {
      console.log('‚úÖ –ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –æ–∂–∏–¥–∞—é—â–∏—Ö –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏');
      return;
    }

    console.log(`üì¶ –ù–∞–π–¥–µ–Ω–æ ${pendingPostings.total} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –∫–æ–¥—ã`);

    // 2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥–æ–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    for (const posting of pendingPostings.postings) {
      await this.processPostingCodes(posting);
      
      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
      await new Promise(resolve => setTimeout(resolve, 1000));
    }

    console.log('üéâ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
  }

  private async processPostingCodes(posting: any): Promise<void> {
    console.log(`\nüìã –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: ${posting.posting_number}`);

    try {
      // 1. –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö –∫ –∫–æ–¥–∞–º
      const codesInfo = await this.api.fbsRfbsMarks.getPostingCodesInfo({
        posting_number: posting.posting_number
      });

      if (!codesInfo.marking_required) {
        console.log('‚ÑπÔ∏è –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è');
        return;
      }

      console.log(`üè∑Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–¥–æ–≤: ${codesInfo.total_codes_required || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);

      // 2. –ü–æ–ª—É—á–∞–µ–º –∫–æ–¥—ã –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö")
      const markingCodes = await this.getMarkingCodesFromExternalSystem(codesInfo.products);

      if (markingCodes.length === 0) {
        console.log('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏');
        return;
      }

      // 3. –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–¥—ã
      const uploadResult = await this.api.fbsRfbsMarks.uploadPostingCodes({
        posting_number: posting.posting_number,
        codes: markingCodes
      });

      console.log(`üì§ –ö–æ–¥—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –∑–∞–¥–∞—á–∞: ${uploadResult.task_id}`);

      // 4. –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏
      const uploadStatus = await this.waitForUploadCompletion(uploadResult.task_id!);

      // 5. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏
      if (uploadStatus.upload_result?.valid_codes > 0) {
        console.log(`‚úÖ –í–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–¥–æ–≤: ${uploadStatus.upload_result.valid_codes}`);
        
        if (uploadStatus.upload_result.invalid_codes > 0) {
          console.log(`‚ö†Ô∏è –ù–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–¥–æ–≤: ${uploadStatus.upload_result.invalid_codes}`);
          this.logInvalidCodes(uploadStatus.upload_result.invalid_codes_details);
        }

        // 6. –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤
        await this.validatePostingCodes(posting.posting_number);
      } else {
        console.log('‚ùå –í—Å–µ –∫–æ–¥—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã');
        this.logInvalidCodes(uploadStatus.upload_result?.invalid_codes_details);
      }

    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ${posting.posting_number}:`, error.message);
    }
  }

  private async validatePostingCodes(postingNumber: string): Promise<void> {
    console.log('üîç –ó–∞–ø—É—Å–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–æ–≤');

    try {
      const validationResult = await this.api.fbsRfbsMarks.validatePostingCodes({
        posting_number: postingNumber
      });

      const validationStatus = await this.waitForValidationCompletion(validationResult.task_id!);

      if (validationStatus.validation_result?.all_valid) {
        console.log('‚úÖ –í—Å–µ –∫–æ–¥—ã –ø—Ä–æ—à–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é');
      } else {
        const validPercentage = validationStatus.validation_result?.valid_percentage || 0;
        console.log(`‚ö†Ô∏è –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–æ–¥–æ–≤: ${validPercentage}%`);
        
        if (validPercentage < 100) {
          this.logValidationIssues(validationStatus.validation_result?.issues);
        }
      }
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–æ–≤:', error.message);
    }
  }

  private async getMarkingCodesFromExternalSystem(products: any[]): Promise<any[]> {
    // –≠–º—É–ª—è—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–æ–≤ –∏–∑ —Å–∏—Å—Ç–µ–º—ã "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"
    const codes = [];
    
    for (const product of products || []) {
      for (let i = 0; i < (product.required_codes_count || 1); i++) {
        codes.push({
          sku: product.sku,
          gtd: this.generateMockDataMatrixCode(),
          quantity: 1
        });
      }
    }
    
    return codes;
  }

  private generateMockDataMatrixCode(): string {
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è mock –∫–æ–¥–∞ DataMatrix –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    const prefix = '01'; // GTIN prefix
    const gtin = '12345678901234'; // 14-digit GTIN
    const serialPrefix = '21'; // Serial number prefix
    const serial = Math.random().toString(36).substring(2, 15).toUpperCase();
    
    return `${prefix}${gtin}${serialPrefix}${serial}`;
  }

  private async waitForUploadCompletion(taskId: string): Promise<any> {
    const maxAttempts = 20;
    const delay = 1500;

    for (let attempt = 0; attempt < maxAttempts; attempt++) {
      const status = await this.api.fbsRfbsMarks.getPostingCodesUploadStatus({ task_id: taskId });
      
      if (status.status === 'completed') {
        return status;
      } else if (status.status === 'error') {
        throw new Error(status.error_message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤');
      }
      
      console.log(`‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–æ–≤... (${attempt + 1}/${maxAttempts})`);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
    
    throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤');
  }

  private async waitForValidationCompletion(taskId: string): Promise<any> {
    const maxAttempts = 15;
    const delay = 2000;

    for (let attempt = 0; attempt < maxAttempts; attempt++) {
      const status = await this.api.fbsRfbsMarks.getPostingCodesValidateStatus({ task_id: taskId });
      
      if (status.status === 'completed') {
        return status;
      } else if (status.status === 'error') {
        throw new Error(status.error_message || '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–æ–≤');
      }
      
      console.log(`‚è≥ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤... (${attempt + 1}/${maxAttempts})`);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
    
    throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–æ–≤');
  }

  private logInvalidCodes(invalidCodesDetails: any[]): void {
    if (!invalidCodesDetails || invalidCodesDetails.length === 0) return;
    
    console.log('‚ùå –î–µ—Ç–∞–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–¥–æ–≤:');
    invalidCodesDetails.forEach((detail, index) => {
      console.log(`  ${index + 1}. SKU ${detail.sku}: ${detail.error_message}`);
      console.log(`     –ö–æ–¥: ${detail.code}`);
    });
  }

  private logValidationIssues(issues: any[]): void {
    if (!issues || issues.length === 0) return;
    
    console.log('‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏:');
    issues.forEach((issue, index) => {
      console.log(`  ${index + 1}. ${issue.type}: ${issue.description}`);
      if (issue.affected_codes) {
        console.log(`     –ó–∞—Ç—Ä–æ–Ω—É—Ç–æ –∫–æ–¥–æ–≤: ${issue.affected_codes.length}`);
      }
    });
  }
}
```

#### –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

```typescript
class MarkingMonitoringSystem {
  constructor(private api: OzonSellerAPI) {}

  async generateMarkingReport(dateFrom: string, dateTo: string): Promise<void> {
    console.log(`üìä –û—Ç—á–µ—Ç –ø–æ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–µ (${dateFrom} - ${dateTo})`);
    console.log('='.repeat(60));

    // 1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
    const allPostings = await this.api.fbsRfbsMarks.getPostingList({
      date_from: dateFrom,
      date_to: dateTo,
      limit: 1000
    });

    // 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
    const statusStats = new Map();
    let totalCodesRequired = 0;
    let totalCodesUploaded = 0;

    for (const posting of allPostings.postings || []) {
      const status = posting.marking_status || 'unknown';
      statusStats.set(status, (statusStats.get(status) || 0) + 1);
      
      // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
      try {
        const codesInfo = await this.api.fbsRfbsMarks.getPostingCodesInfo({
          posting_number: posting.posting_number
        });
        
        totalCodesRequired += codesInfo.total_codes_required || 0;
        totalCodesUploaded += codesInfo.summary?.uploaded_codes || 0;
      } catch (error) {
        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π
      }
      
      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
      await new Promise(resolve => setTimeout(resolve, 100));
    }

    // 3. –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    console.log(`\nüì¶ –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:`);
    console.log(`–í—Å–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π: ${allPostings.total}`);
    console.log(`–¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–¥–æ–≤: ${totalCodesRequired}`);
    console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–æ–¥–æ–≤: ${totalCodesUploaded}`);
    
    if (totalCodesRequired > 0) {
      const completionRate = (totalCodesUploaded / totalCodesRequired * 100).toFixed(1);
      console.log(`–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${completionRate}%`);
    }

    console.log(`\nüìã –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º:`);
    Array.from(statusStats.entries()).forEach(([status, count]) => {
      const percentage = ((count / allPostings.total) * 100).toFixed(1);
      console.log(`  ${status}: ${count} (${percentage}%)`);
    });

    // 4. –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    const awaitingPostings = allPostings.postings?.filter(p => 
      p.marking_status === 'awaiting_codes'
    ) || [];
    
    if (awaitingPostings.length > 0) {
      console.log(`\n‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –æ–∂–∏–¥–∞—é—â–∏–µ –∫–æ–¥—ã: ${awaitingPostings.length}`);
      
      // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ä–æ–∫–∞–º
      const urgentPostings = awaitingPostings.filter(p => {
        if (!p.deadline) return false;
        const deadline = new Date(p.deadline);
        const now = new Date();
        return deadline.getTime() - now.getTime() < 24 * 60 * 60 * 1000; // –º–µ–Ω—å—à–µ 24 —á–∞—Å–æ–≤
      });
      
      if (urgentPostings.length > 0) {
        console.log(`üö® –°—Ä–æ—á–Ω—ã—Ö (–º–µ–Ω—å—à–µ 24—á): ${urgentPostings.length}`);
        urgentPostings.slice(0, 5).forEach(posting => {
          console.log(`  ${posting.posting_number} (–¥–µ–¥–ª–∞–π–Ω: ${posting.deadline})`);
        });
      }
    }

    // 5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    this.generateRecommendations(statusStats, totalCodesRequired, totalCodesUploaded);
  }

  async monitorMarkingQuality(): Promise<void> {
    console.log('üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏');

    // –ü–æ–ª—É—á–∞–µ–º –Ω–µ–¥–∞–≤–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è  
    const recentPostings = await this.api.fbsRfbsMarks.getPostingList({
      status: 'codes_uploaded',
      date_from: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
      limit: 50
    });

    let totalValidationScore = 0;
    let validatedCount = 0;
    const qualityIssues = [];

    for (const posting of recentPostings.postings || []) {
      try {
        const codesInfo = await this.api.fbsRfbsMarks.getPostingCodesInfo({
          posting_number: posting.posting_number
        });

        if (codesInfo.validation_result) {
          const validPercentage = codesInfo.validation_result.valid_percentage || 0;
          totalValidationScore += validPercentage;
          validatedCount++;

          if (validPercentage < 100) {
            qualityIssues.push({
              posting_number: posting.posting_number,
              valid_percentage: validPercentage,
              issues: codesInfo.validation_result.issues || []
            });
          }
        }
      } catch (error) {
        console.log(`–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ ${posting.posting_number}:`, error.message);
      }
    }

    // –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞
    if (validatedCount > 0) {
      const avgQuality = (totalValidationScore / validatedCount).toFixed(1);
      console.log(`üìä –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫–æ–¥–æ–≤: ${avgQuality}%`);
      
      if (qualityIssues.length > 0) {
        console.log(`\n‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∫–∞—á–µ—Å—Ç–≤–∞: ${qualityIssues.length}`);
        
        // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º –ø–æ —Ç–∏–ø–∞–º
        const issueTypes = new Map();
        qualityIssues.forEach(issue => {
          issue.issues.forEach(problemType => {
            const type = problemType.type || 'unknown';
            issueTypes.set(type, (issueTypes.get(type) || 0) + 1);
          });
        });

        console.log('\nüìã –¢–∏–ø—ã –ø—Ä–æ–±–ª–µ–º:');
        Array.from(issueTypes.entries()).forEach(([type, count]) => {
          console.log(`  ${type}: ${count} —Å–ª—É—á–∞–µ–≤`);
        });
      }
    }
  }

  private generateRecommendations(
    statusStats: Map<string, number>, 
    totalRequired: number, 
    totalUploaded: number
  ): void {
    console.log('\nüí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:');

    const completionRate = totalRequired > 0 ? (totalUploaded / totalRequired) : 0;
    const awaitingCount = statusStats.get('awaiting_codes') || 0;

    if (completionRate < 0.8) {
      console.log('üìà –ù–∏–∑–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤ - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å');
    }

    if (awaitingCount > 10) {
      console.log('‚ö†Ô∏è –ú–Ω–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π –æ–∂–∏–¥–∞–µ—Ç –∫–æ–¥—ã - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"');
    }

    if (completionRate > 0.95) {
      console.log('‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π!');
    }

    console.log('üîÑ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –∏–∑ —Å–∏—Å—Ç–µ–º—ã "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"');
    console.log('üì± –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–µ–¥–ª–∞–π–Ω–æ–≤');
    console.log('üìä –†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –∫–æ–¥–æ–≤');
  }
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
try {
  await api.fbsRfbsMarks.uploadPostingCodes({
    posting_number: 'FBS-123456789',
    codes: [/* ... */]
  });
} catch (error) {
  if (error.response?.status === 400) {
    console.error('–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–æ–≤:', error.response.data);
  } else if (error.response?.status === 404) {
    console.error('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∏–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏');
  } else if (error.response?.status === 409) {
    console.error('–ö–æ–¥—ã —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–ª—è —ç—Ç–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è');
  } else {
    console.error('–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', error.message);
  }
}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üéØ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—Ä–∞–∑—Ü–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ PDF-—Ñ–∞–π–ª—ã –¥–ª—è –æ–±—Ä–∞–∑—Ü–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ç–∫–æ –≤–∏–¥–Ω–∞ –∏ —á–∏—Ç–∞–µ–º–∞
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—Ü—ã
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ–±—Ä–∞–∑—Ü—ã

### üî¢ –†–∞–±–æ—Ç–∞ —Å –∫–æ–¥–∞–º–∏ DataMatrix
- –ü–æ–ª—É—á–∞–π—Ç–µ –∫–æ–¥—ã —Ç–æ–ª—å–∫–æ –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–¥–æ–≤ —Ç–æ–≤–∞—Ä–∞–º
- –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –∫–æ–¥—ã –∑–∞—Ä–∞–Ω–µ–µ, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –¥–µ–¥–ª–∞–π–Ω–æ–≤
- –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –¥–µ–¥–ª–∞–π–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫–æ–¥–æ–≤
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–¥–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –∏–∑ "–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö"
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch-–æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º

### üîí –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- –°–ª–µ–¥—É–π—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
- –í–µ–¥–∏—Ç–µ —É—á–µ—Ç –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–æ–¥–∞–º–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–π—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏

FBS & rFBS Marks API –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–µ —Ç–æ–≤–∞—Ä–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—è –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑—Ü–æ–≤ –¥–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–æ–≤ DataMatrix.