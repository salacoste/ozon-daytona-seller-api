# Premium API Documentation

## Overview

Premium API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ, —á–∞—Ç-—Ñ—É–Ω–∫—Ü–∏—è–º –∏ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º OZON. API –≤–∫–ª—é—á–∞–µ—Ç **8 –º–µ—Ç–æ–¥–æ–≤** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≥–ª—É–±–ª–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π —Ç–æ–≤–∞—Ä–æ–≤, —á–∞—Ç–∞–º–∏ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å—é.

### Key Features

- üìä **–£–≥–ª—É–±–ª—ë–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥–∞–∂–∞—Ö, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- üîç **–ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫–∞–∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç –≤–∞—à–∏ —Ç–æ–≤–∞—Ä—ã
- üí¨ **–ß–∞—Ç—ã —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é
- üìà **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å
- üéØ **–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è **–ü–æ–¥–ø–∏—Å–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ Premium –∏–ª–∏ Premium Plus

## Subscription Requirements

- **Premium** - –¥–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Premium Plus** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–µ—Ç–æ–¥–∞–º, –≤–∫–ª—é—á–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ —á–∞—Ç—ã
- **Rate Limiting** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 1 –∑–∞–ø—Ä–æ—Å–æ–º –≤ –º–∏–Ω—É—Ç—É

## Available Methods

### Analytics Methods (Premium Plus Required)

#### getAnalyticsData()
–ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∏–∑–º–µ—Ä–µ–Ω–∏—è–º.

```typescript
const analytics = await premiumApi.getAnalyticsData({
  date_from: '2024-01-01',
  date_to: '2024-01-31',
  dimension: ['sku', 'week'],
  metrics: ['revenue', 'hits_view', 'conv_tocart', 'ordered_units'],
  limit: 500,
  filters: [{
    field: 'category1',
    values: ['Electronics']
  }]
});

analytics.result?.data?.forEach(item => {
  console.log(`SKU: ${item.dimensions?.sku}`);
  console.log(`–í—ã—Ä—É—á–∫–∞: ${item.metrics?.revenue}`);
  console.log(`–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: ${item.metrics?.hits_view}`);
  console.log(`–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É: ${item.metrics?.conv_tocart}%`);
});
```

#### getRealizationByDay()
–ü–æ–ª—É—á–∞–µ—Ç –æ—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å.

```typescript
const report = await premiumApi.getRealizationByDay({
  day: 15,
  month: 1,
  year: 2024
});

console.log(`–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ –∑–∞ –¥–µ–Ω—å: ${report.total_amount} ${report.currency}`);
report.rows?.forEach(row => {
  console.log(`${row.name}: ${row.quantity} —à—Ç., ${row.amount} ${row.currency}`);
});
```

### Search Analytics Methods (Premium/Premium Plus Required)

#### getProductQueries()
–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è –≤–∞—à–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤.

```typescript
const queries = await premiumApi.getProductQueries({
  date_from: '2024-01-01',
  date_to: '2024-01-31',
  skus: ['123456789', '987654321'],
  page_size: 50,
  sort_by: 'queries_count',
  sort_dir: 'DESC'
});

queries.items?.forEach(item => {
  console.log(`SKU: ${item.sku}`);
  console.log(`–ó–∞–ø—Ä–æ—Å–æ–≤: ${item.queries_count}`);
  console.log(`–ü–æ–∫–∞–∑—ã: ${item.impressions}`);
  console.log(`–ö–ª–∏–∫–∏: ${item.clicks}`);
  console.log(`CTR: ${item.ctr}%`);
});
```

#### getProductQueriesDetails()
–ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–∏—Å–∫–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º –¥–ª—è —Ç–æ–≤–∞—Ä–∞.

```typescript
const details = await premiumApi.getProductQueriesDetails({
  date_from: '2024-01-01',
  date_to: '2024-01-31',
  skus: ['123456789'],
  limit_by_sku: 10,
  page_size: 100,
  sort_by: 'clicks',
  sort_dir: 'DESC'
});

details.queries?.forEach(query => {
  console.log(`–ó–∞–ø—Ä–æ—Å: "${query.query}"`);
  console.log(`–ü–æ–∫–∞–∑—ã: ${query.impressions}, –ö–ª–∏–∫–∏: ${query.clicks}`);
  console.log(`–°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è: ${query.position}, CTR: ${query.ctr}%`);
});
```

### Chat Methods (Premium Plus Required)

#### startChat()
–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—é.

```typescript
const chat = await premiumApi.startChat({
  posting_number: '12345-0001-1'
});

if (chat.result?.chat_id) {
  console.log(`–ß–∞—Ç —Å–æ–∑–¥–∞–Ω: ${chat.result.chat_id}`);
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  await premiumApi.sendChatMessage({
    chat_id: chat.result.chat_id,
    text: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≤–∞—à–µ–º—É –∑–∞–∫–∞–∑—É?'
  });
}
```

#### sendChatMessage()
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —á–∞—Ç.

```typescript
const result = await premiumApi.sendChatMessage({
  chat_id: 'chat_123456',
  text: '–í–∞—à –∑–∞–∫–∞–∑ –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ. –û–∂–∏–¥–∞–π—Ç–µ –°–ú–° —Å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º.'
});

console.log(`–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${result.result}`);
```

#### getChatHistory()
–ü–æ–ª—É—á–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞.

```typescript
const history = await premiumApi.getChatHistory({
  chat_id: 'chat_123456',
  limit: 50
});

history.messages?.forEach(message => {
  const time = new Date(message.created_at).toLocaleString();
  console.log(`[${time}] ${message.author}: ${message.text}`);
});
```

#### markChatAsRead()
–û—Ç–º–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ.

```typescript
await premiumApi.markChatAsRead({
  chat_id: 'chat_123456',
  message_id: 'msg_789012'
});

console.log('–°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ');
```

## TypeScript Interfaces

### Request Types

```typescript
interface PremiumAnalyticsGetDataRequest {
  date_from: string;
  date_to: string;
  dimension: string[];
  metrics: string[];
  limit?: number;
  filters?: AnalyticsFilter[];
}

interface AnalyticsFilter {
  field: string;
  values: string[];
}

interface PremiumProductQueriesRequest {
  date_from: string;
  date_to?: string;
  skus?: string[];
  page_size?: number;
  page_token?: string;
  sort_by?: 'queries_count' | 'impressions' | 'clicks' | 'ctr';
  sort_dir?: 'ASC' | 'DESC';
}

interface PremiumProductQueriesDetailsRequest {
  date_from: string;
  date_to?: string;
  skus: string[];
  limit_by_sku?: number;
  page_size?: number;
  page_token?: string;
  sort_by?: 'impressions' | 'clicks' | 'ctr' | 'position';
  sort_dir?: 'ASC' | 'DESC';
}

interface PremiumChatStartRequest {
  posting_number: string;
}

interface PremiumChatSendMessageRequest {
  chat_id: string;
  text: string;
}

interface PremiumChatHistoryRequest {
  chat_id: string;
  limit?: number;
  message_id_from?: string;
}

interface PremiumChatReadRequest {
  chat_id: string;
  message_id: string;
}

interface PremiumRealizationByDayRequest {
  day: number;
  month: number;
  year: number;
}
```

### Response Types

```typescript
interface PremiumAnalyticsGetDataResponse {
  result?: {
    data?: AnalyticsDataItem[];
    totals?: AnalyticsMetrics;
  };
}

interface AnalyticsDataItem {
  dimensions?: Record<string, string>;
  metrics?: AnalyticsMetrics;
}

interface AnalyticsMetrics {
  revenue?: number;
  hits_view?: number;
  hits_tocart?: number;
  hits_tobasket?: number;
  session_view?: number;
  session_view_search?: number;
  session_view_pdp?: number;
  conv_tocart?: number;
  conv_tobasket?: number;
  ordered_units?: number;
  returns?: number;
}

interface PremiumProductQueriesResponse {
  items?: ProductQuery[];
  page_token?: string;
  has_next?: boolean;
}

interface ProductQuery {
  sku: string;
  queries_count?: number;
  impressions?: number;
  clicks?: number;
  ctr?: number;
  position_avg?: number;
}

interface PremiumProductQueriesDetailsResponse {
  queries?: QueryDetails[];
  page_token?: string;
  has_next?: boolean;
}

interface QueryDetails {
  query: string;
  sku: string;
  impressions?: number;
  clicks?: number;
  ctr?: number;
  position?: number;
}

interface PremiumChatStartResponse {
  result?: {
    chat_id?: string;
  };
}

interface PremiumChatSendMessageResponse {
  result?: boolean;
  message_id?: string;
}

interface PremiumChatHistoryResponse {
  messages?: ChatMessage[];
  has_next?: boolean;
}

interface ChatMessage {
  message_id: string;
  author: 'seller' | 'buyer';
  text: string;
  created_at: string;
  is_read?: boolean;
}

interface PremiumRealizationByDayResponse {
  rows?: RealizationRow[];
  total_amount?: number;
  currency?: string;
}

interface RealizationRow {
  name: string;
  quantity: number;
  amount: number;
  currency: string;
  sku?: string;
}
```

## Usage Examples

### Basic Premium Analytics

```typescript
import { OzonApi } from 'bmad-ozon-seller-api';

const ozonApi = new OzonApi({
  clientId: 'your-client-id',
  apiKey: 'your-api-key'
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –∑–∞ –º–µ—Å—è—Ü
async function getMonthlyAnalytics() {
  try {
    const analytics = await ozonApi.premium.getAnalyticsData({
      date_from: '2024-01-01',
      date_to: '2024-01-31',
      dimension: ['sku', 'day'],
      metrics: ['revenue', 'ordered_units', 'hits_view', 'conv_tocart'],
      limit: 1000
    });
    
    let totalRevenue = 0;
    let totalViews = 0;
    let totalOrders = 0;
    
    analytics.result?.data?.forEach(item => {
      totalRevenue += item.metrics?.revenue || 0;
      totalViews += item.metrics?.hits_view || 0;
      totalOrders += item.metrics?.ordered_units || 0;
    });
    
    console.log(`üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü:`);
    console.log(`üí∞ –í—ã—Ä—É—á–∫–∞: ${totalRevenue.toLocaleString()} ‚ÇΩ`);
    console.log(`üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: ${totalViews.toLocaleString()}`);
    console.log(`üõí –ó–∞–∫–∞–∑—ã: ${totalOrders.toLocaleString()}`);
    console.log(`üìà –ö–æ–Ω–≤–µ—Ä—Å–∏—è: ${((totalOrders / totalViews) * 100).toFixed(2)}%`);
    
    return { totalRevenue, totalViews, totalOrders };
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:', error);
    throw error;
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const monthlyStats = await getMonthlyAnalytics();
```

### Search Query Analysis

```typescript
// –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
async function analyzeSearchPerformance(skus: string[]) {
  try {
    // –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º
    const queries = await ozonApi.premium.getProductQueries({
      date_from: '2024-01-01',
      date_to: '2024-01-31',
      skus,
      page_size: 100,
      sort_by: 'ctr',
      sort_dir: 'DESC'
    });
    
    console.log('üîç –¢–æ–ø —Ç–æ–≤–∞—Ä—ã –ø–æ CTR:');
    queries.items?.slice(0, 5).forEach((item, index) => {
      console.log(`${index + 1}. SKU ${item.sku}: ${item.ctr}% CTR (${item.clicks}/${item.impressions})`);
    });
    
    // –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –ª—É—á—à–µ–º—É —Ç–æ–≤–∞—Ä—É
    if (queries.items?.[0]) {
      const details = await ozonApi.premium.getProductQueriesDetails({
        date_from: '2024-01-01',
        date_to: '2024-01-31',
        skus: [queries.items[0].sku],
        limit_by_sku: 10,
        sort_by: 'clicks',
        sort_dir: 'DESC'
      });
      
      console.log(`\nüéØ –¢–æ–ø –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è SKU ${queries.items[0].sku}:`);
      details.queries?.forEach((query, index) => {
        console.log(`${index + 1}. "${query.query}" - ${query.clicks} –∫–ª–∏–∫–æ–≤, –ø–æ–∑–∏—Ü–∏—è ${query.position}`);
      });
    }
    
    return queries.items;
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∏—Å–∫–∞:', error);
    throw error;
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const searchAnalysis = await analyzeSearchPerformance(['123456789', '987654321']);
```

## Complex Scenarios

### Premium Analytics Dashboard

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:

```typescript
class PremiumAnalyticsDashboard {
  constructor(private ozonApi: OzonApi) {}
  
  /**
   * –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
   */
  async generateComprehensiveReport(dateFrom: string, dateTo: string, skus?: string[]) {
    try {
      // –ü–æ–ª—É—á–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
      const analytics = await this.ozonApi.premium.getAnalyticsData({
        date_from: dateFrom,
        date_to: dateTo,
        dimension: ['sku'],
        metrics: ['revenue', 'ordered_units', 'hits_view', 'conv_tocart', 'returns'],
        limit: 1000,
        filters: skus ? [{
          field: 'sku',
          values: skus
        }] : undefined
      });
      
      // –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –ø–æ–∏—Å–∫–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º
      const searchData = skus ? await this.ozonApi.premium.getProductQueries({
        date_from: dateFrom,
        date_to: dateTo,
        skus,
        page_size: 1000
      }) : null;
      
      // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
      const report = this.processAnalyticsData(analytics, searchData);
      
      console.log('üìä === –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –û–¢–ß–Å–¢ ===');
      console.log(`üìÖ –ü–µ—Ä–∏–æ–¥: ${dateFrom} - ${dateTo}`);
      console.log(`üí∞ –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞: ${report.totalRevenue.toLocaleString()} ‚ÇΩ`);
      console.log(`üõí –ó–∞–∫–∞–∑–æ–≤: ${report.totalOrders.toLocaleString()}`);
      console.log(`üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: ${report.totalViews.toLocaleString()}`);
      console.log(`üìà –°—Ä–µ–¥–Ω—è—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è: ${report.avgConversion.toFixed(2)}%`);
      console.log(`üîÑ –í–æ–∑–≤—Ä–∞—Ç–æ–≤: ${report.totalReturns.toLocaleString()}`);
      
      if (report.topPerformers.length > 0) {
        console.log('\nüèÜ –¢–æ–ø —Ç–æ–≤–∞—Ä—ã –ø–æ –≤—ã—Ä—É—á–∫–µ:');
        report.topPerformers.forEach((item, index) => {
          console.log(`${index + 1}. SKU ${item.sku}: ${item.revenue.toLocaleString()} ‚ÇΩ`);
        });
      }
      
      if (report.searchInsights) {
        console.log('\nüîç –ü–æ–∏—Å–∫–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:');
        console.log(`–°—Ä–µ–¥–Ω–∏–π CTR: ${report.searchInsights.avgCTR.toFixed(2)}%`);
        console.log(`–°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è: ${report.searchInsights.avgPosition.toFixed(1)}`);
      }
      
      return report;
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞:', error);
      throw error;
    }
  }
  
  /**
   * –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤
   */
  async monitorProductPerformance(skus: string[], thresholds: PerformanceThresholds) {
    try {
      const analytics = await this.ozonApi.premium.getAnalyticsData({
        date_from: this.getDateDaysAgo(7), // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
        date_to: this.getToday(),
        dimension: ['sku'],
        metrics: ['revenue', 'ordered_units', 'hits_view', 'conv_tocart'],
        filters: [{
          field: 'sku',
          values: skus
        }]
      });
      
      const alerts: PerformanceAlert[] = [];
      
      analytics.result?.data?.forEach(item => {
        const sku = item.dimensions?.sku;
        const metrics = item.metrics;
        
        if (!sku || !metrics) return;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
        if (metrics.conv_tocart && metrics.conv_tocart < thresholds.minConversion) {
          alerts.push({
            sku,
            type: 'low_conversion',
            value: metrics.conv_tocart,
            threshold: thresholds.minConversion,
            severity: 'warning'
          });
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
        if (metrics.hits_view && metrics.hits_view < thresholds.minViews) {
          alerts.push({
            sku,
            type: 'low_views',
            value: metrics.hits_view,
            threshold: thresholds.minViews,
            severity: 'info'
          });
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ä—É—á–∫–∏
        if (metrics.revenue && metrics.revenue < thresholds.minRevenue) {
          alerts.push({
            sku,
            type: 'low_revenue',
            value: metrics.revenue,
            threshold: thresholds.minRevenue,
            severity: 'critical'
          });
        }
      });
      
      if (alerts.length > 0) {
        console.log(`‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–æ ${alerts.length} –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:`);
        alerts.forEach(alert => {
          const emoji = alert.severity === 'critical' ? 'üö®' : alert.severity === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
          console.log(`${emoji} SKU ${alert.sku}: ${alert.type} (${alert.value} < ${alert.threshold})`);
        });
      } else {
        console.log('‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã');
      }
      
      return alerts;
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:', error);
      throw error;
    }
  }
  
  /**
   * –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –¥–Ω—è–º
   */
  async analyzeDailyTrends(dateFrom: string, dateTo: string) {
    try {
      const analytics = await this.ozonApi.premium.getAnalyticsData({
        date_from: dateFrom,
        date_to: dateTo,
        dimension: ['day'],
        metrics: ['revenue', 'ordered_units', 'hits_view'],
        limit: 1000
      });
      
      const dailyData: DailyTrendData[] = [];
      
      analytics.result?.data?.forEach(item => {
        const day = item.dimensions?.day;
        const metrics = item.metrics;
        
        if (day && metrics) {
          dailyData.push({
            date: day,
            revenue: metrics.revenue || 0,
            orders: metrics.ordered_units || 0,
            views: metrics.hits_view || 0
          });
        }
      });
      
      // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
      dailyData.sort((a, b) => a.date.localeCompare(b.date));
      
      // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤
      const trends = this.calculateTrends(dailyData);
      
      console.log('üìà –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤:');
      console.log(`–í—ã—Ä—É—á–∫–∞: ${trends.revenue > 0 ? '‚ÜóÔ∏è' : trends.revenue < 0 ? '‚ÜòÔ∏è' : '‚û°Ô∏è'} ${trends.revenue.toFixed(2)}%`);
      console.log(`–ó–∞–∫–∞–∑—ã: ${trends.orders > 0 ? '‚ÜóÔ∏è' : trends.orders < 0 ? '‚ÜòÔ∏è' : '‚û°Ô∏è'} ${trends.orders.toFixed(2)}%`);
      console.log(`–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: ${trends.views > 0 ? '‚ÜóÔ∏è' : trends.views < 0 ? '‚ÜòÔ∏è' : '‚û°Ô∏è'} ${trends.views.toFixed(2)}%`);
      
      return { dailyData, trends };
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤:', error);
      throw error;
    }
  }
  
  private processAnalyticsData(analytics: any, searchData: any) {
    const data = analytics.result?.data || [];
    
    let totalRevenue = 0;
    let totalOrders = 0;
    let totalViews = 0;
    let totalReturns = 0;
    let conversionSum = 0;
    let conversionCount = 0;
    
    const skuMetrics: Record<string, any> = {};
    
    data.forEach((item: any) => {
      const sku = item.dimensions?.sku;
      const metrics = item.metrics;
      
      if (sku && metrics) {
        totalRevenue += metrics.revenue || 0;
        totalOrders += metrics.ordered_units || 0;
        totalViews += metrics.hits_view || 0;
        totalReturns += metrics.returns || 0;
        
        if (metrics.conv_tocart) {
          conversionSum += metrics.conv_tocart;
          conversionCount++;
        }
        
        skuMetrics[sku] = metrics;
      }
    });
    
    const topPerformers = Object.entries(skuMetrics)
      .map(([sku, metrics]) => ({ sku, revenue: metrics.revenue || 0 }))
      .sort((a, b) => b.revenue - a.revenue)
      .slice(0, 5);
    
    let searchInsights = null;
    if (searchData?.items) {
      const totalCTR = searchData.items.reduce((sum: number, item: any) => sum + (item.ctr || 0), 0);
      const totalPosition = searchData.items.reduce((sum: number, item: any) => sum + (item.position_avg || 0), 0);
      
      searchInsights = {
        avgCTR: totalCTR / searchData.items.length,
        avgPosition: totalPosition / searchData.items.length
      };
    }
    
    return {
      totalRevenue,
      totalOrders,
      totalViews,
      totalReturns,
      avgConversion: conversionCount > 0 ? conversionSum / conversionCount : 0,
      topPerformers,
      searchInsights
    };
  }
  
  private calculateTrends(data: DailyTrendData[]) {
    if (data.length < 2) {
      return { revenue: 0, orders: 0, views: 0 };
    }
    
    const first = data[0];
    const last = data[data.length - 1];
    
    return {
      revenue: ((last.revenue - first.revenue) / first.revenue) * 100,
      orders: ((last.orders - first.orders) / first.orders) * 100,
      views: ((last.views - first.views) / first.views) * 100
    };
  }
  
  private getToday(): string {
    return new Date().toISOString().split('T')[0];
  }
  
  private getDateDaysAgo(days: number): string {
    const date = new Date();
    date.setDate(date.getDate() - days);
    return date.toISOString().split('T')[0];
  }
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
interface PerformanceThresholds {
  minConversion: number;
  minViews: number;
  minRevenue: number;
}

interface PerformanceAlert {
  sku: string;
  type: string;
  value: number;
  threshold: number;
  severity: 'info' | 'warning' | 'critical';
}

interface DailyTrendData {
  date: string;
  revenue: number;
  orders: number;
  views: number;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
const dashboard = new PremiumAnalyticsDashboard(ozonApi);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
const report = await dashboard.generateComprehensiveReport(
  '2024-01-01',
  '2024-01-31',
  ['123456789', '987654321']
);

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
const alerts = await dashboard.monitorProductPerformance(
  ['123456789', '987654321'],
  {
    minConversion: 2.0, // 2%
    minViews: 100,
    minRevenue: 10000
  }
);

// –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤
const trends = await dashboard.analyzeDailyTrends('2024-01-01', '2024-01-31');
```

### Premium Chat Manager

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏:

```typescript
class PremiumChatManager {
  constructor(private ozonApi: OzonApi) {}
  
  /**
   * –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Ç–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞
   */
  async setupOrderChat(postingNumber: string, welcomeMessage?: string) {
    try {
      // –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
      const chat = await this.ozonApi.premium.startChat({
        posting_number: postingNumber
      });
      
      if (!chat.result?.chat_id) {
        throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç');
      }
      
      const chatId = chat.result.chat_id;
      console.log(`‚úÖ –ß–∞—Ç —Å–æ–∑–¥–∞–Ω: ${chatId}`);
      
      // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      if (welcomeMessage) {
        await this.ozonApi.premium.sendChatMessage({
          chat_id: chatId,
          text: welcomeMessage
        });
        
        console.log('üìù –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ');
      }
      
      return chatId;
    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞ ${postingNumber}:`, error);
      throw error;
    }
  }
  
  /**
   * –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –∑–∞–∫–∞–∑–∞–º
   */
  async sendBulkNotifications(notifications: OrderNotification[]) {
    const results: NotificationResult[] = [];
    
    for (const notification of notifications) {
      try {
        let chatId = notification.chatId;
        
        // –°–æ–∑–¥–∞—Ç—å —á–∞—Ç –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        if (!chatId) {
          const chat = await this.ozonApi.premium.startChat({
            posting_number: notification.postingNumber
          });
          
          if (chat.result?.chat_id) {
            chatId = chat.result.chat_id;
          } else {
            throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç');
          }
        }
        
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        await this.ozonApi.premium.sendChatMessage({
          chat_id: chatId,
          text: notification.message
        });
        
        results.push({
          postingNumber: notification.postingNumber,
          chatId,
          status: 'sent',
          timestamp: new Date().toISOString()
        });
        
        console.log(`‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è –∑–∞–∫–∞–∑–∞ ${notification.postingNumber}`);
        
        // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
        await new Promise(resolve => setTimeout(resolve, 1000));
      } catch (error) {
        results.push({
          postingNumber: notification.postingNumber,
          status: 'failed',
          error: error.message,
          timestamp: new Date().toISOString()
        });
        
        console.error(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–ª—è –∑–∞–∫–∞–∑–∞ ${notification.postingNumber}:`, error);
      }
    }
    
    return results;
  }
  
  /**
   * –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
   */
  async processChatHistory(chatId: string) {
    try {
      const history = await this.ozonApi.premium.getChatHistory({
        chat_id: chatId,
        limit: 100
      });
      
      if (!history.messages) {
        console.log('–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –ø—É—Å—Ç–∞');
        return null;
      }
      
      const analysis = {
        totalMessages: history.messages.length,
        sellerMessages: history.messages.filter(m => m.author === 'seller').length,
        buyerMessages: history.messages.filter(m => m.author === 'buyer').length,
        unreadMessages: history.messages.filter(m => !m.is_read).length,
        lastMessage: history.messages[0],
        firstMessage: history.messages[history.messages.length - 1]
      };
      
      console.log(`üìä –ê–Ω–∞–ª–∏–∑ —á–∞—Ç–∞ ${chatId}:`);
      console.log(`–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: ${analysis.totalMessages}`);
      console.log(`–û—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞: ${analysis.sellerMessages}`);
      console.log(`–û—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è: ${analysis.buyerMessages}`);
      console.log(`–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö: ${analysis.unreadMessages}`);
      
      // –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
      if (analysis.unreadMessages > 0 && analysis.lastMessage) {
        await this.ozonApi.premium.markChatAsRead({
          chat_id: chatId,
          message_id: analysis.lastMessage.message_id
        });
        
        console.log('‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ');
      }
      
      return analysis;
    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ ${chatId}:`, error);
      throw error;
    }
  }
  
  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
   */
  async handleCommonQuestions(chatId: string, incomingMessage: string) {
    const commonResponses: Record<string, string> = {
      '–∫–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ': '–í–∞—à –∑–∞–∫–∞–∑ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –≤ –¥–æ—Å—Ç–∞–≤–∫—É, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ SMS —Å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º.',
      '–≥–¥–µ –º–æ–π –∑–∞–∫–∞–∑': '–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä –∏–∑ SMS. –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ OZON.',
      '–º–æ–∂–Ω–æ –ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å': '–û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –≤–æ–∑–º–æ–∂–Ω–∞ –¥–æ –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –¥–æ—Å—Ç–∞–≤–∫—É. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ OZON –¥–ª—è –æ—Ç–º–µ–Ω—ã.',
      '–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä': '–ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π. –í–æ–∑–≤—Ä–∞—Ç –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤–∞—à –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.',
      '–≥–∞—Ä–∞–Ω—Ç–∏—è': '–ù–∞ —Ç–æ–≤–∞—Ä —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –≥–∞—Ä–∞–Ω—Ç–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞ –∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏.'
    };
    
    const lowerMessage = incomingMessage.toLowerCase();
    
    for (const [keyword, response] of Object.entries(commonResponses)) {
      if (lowerMessage.includes(keyword)) {
        await this.ozonApi.premium.sendChatMessage({
          chat_id: chatId,
          text: response
        });
        
        console.log(`ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ –æ "${keyword}"`);
        return true;
      }
    }
    
    return false;
  }
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —á–∞—Ç–æ–≤
interface OrderNotification {
  postingNumber: string;
  chatId?: string;
  message: string;
}

interface NotificationResult {
  postingNumber: string;
  chatId?: string;
  status: 'sent' | 'failed';
  error?: string;
  timestamp: string;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏
const chatManager = new PremiumChatManager(ozonApi);

// –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ
const notifications: OrderNotification[] = [
  {
    postingNumber: '12345-0001-1',
    message: '–í–∞—à –∑–∞–∫–∞–∑ —Å–æ–±—Ä–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ. –û–∂–∏–¥–∞–π—Ç–µ SMS —Å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º.'
  },
  {
    postingNumber: '12345-0002-1',
    message: '–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –¢—Ä–µ–∫-–Ω–æ–º–µ—Ä –ø—Ä–∏–¥—ë—Ç –≤ SMS –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞.'
  }
];

const notificationResults = await chatManager.sendBulkNotifications(notifications);
console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏:', notificationResults);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
const chatAnalysis = await chatManager.processChatHistory('chat_123456');
```

## Error Handling

```typescript
// –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
async function safePremiumOperations() {
  try {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
    const analytics = await ozonApi.premium.getAnalyticsData({
      date_from: '2024-01-01',
      date_to: '2024-01-31',
      dimension: ['sku'],
      metrics: ['revenue'],
      limit: 10
    });
    
    return analytics;
  } catch (error) {
    if (error.code === 'PREMIUM_SUBSCRIPTION_REQUIRED') {
      console.error('‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ Premium Plus –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ');
    } else if (error.code === 'RATE_LIMIT_EXCEEDED') {
      console.error('‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (1 –∑–∞–ø—Ä–æ—Å –≤ –º–∏–Ω—É—Ç—É)');
      console.log('‚è≥ –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É');
    } else if (error.code === 'INVALID_DATE_RANGE') {
      console.error('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç');
    } else if (error.code === 'CHAT_NOT_FOUND') {
      console.error('‚ùå –ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
    } else if (error.code === 'MESSAGE_TOO_LONG') {
      console.error('‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å–∏–º—É–º 4000 —Å–∏–º–≤–æ–ª–æ–≤)');
    } else {
      console.error('‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', error);
    }
    
    throw error;
  }
}
```

## Best Practices

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
```typescript
const subscriptionBestPractices = {
  // –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤
  checkSubscription: async () => {
    try {
      await ozonApi.premium.getAnalyticsData({
        date_from: '2024-01-01',
        date_to: '2024-01-01',
        dimension: ['sku'],
        metrics: ['revenue'],
        limit: 1
      });
      return 'premium_plus';
    } catch (error) {
      if (error.code === 'PREMIUM_SUBSCRIPTION_REQUIRED') {
        return 'basic';
      }
      throw error;
    }
  },
  
  // –ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  useCache: true,
  cacheTTL: 3600000, // 1 —á–∞—Å
  
  // –°–æ–±–ª—é–¥–∞–π—Ç–µ rate limits
  respectRateLimit: true,
  minRequestInterval: 60000 // 1 –º–∏–Ω—É—Ç–∞
};
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```typescript
const analyticsOptimization = {
  // –ó–∞–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  selectiveMetrics: ['revenue', 'ordered_units'], // –ù–µ –≤—Å–µ —Å—Ä–∞–∑—É
  
  // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–±—ä—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö
  useFilters: true,
  
  // –†–∞–∑–±–∏–≤–∞–π—Ç–µ –±–æ–ª—å—à–∏–µ –ø–µ—Ä–∏–æ–¥—ã –Ω–∞ —á–∞—Å—Ç–∏
  maxDateRange: 31, // –¥–Ω–µ–π
  
  // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  reasonableLimit: 1000
};
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
```typescript
const chatBestPractices = {
  // –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
  messageTemplates: {
    welcome: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É. –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∑–∞–∫–∞–∑—É?',
    shipped: '–í–∞—à –∑–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –¢—Ä–µ–∫-–Ω–æ–º–µ—Ä: {trackNumber}',
    support: '–ü–æ –≤–æ–∑–Ω–∏–∫—à–∏–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ OZON.'
  },
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
  enableAutoResponses: true,
  
  // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  checkUnreadInterval: 300000, // 5 –º–∏–Ω—É—Ç
  
  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  maxMessageLength: 4000
};
```

## Integration Notes

- **–ü–æ–¥–ø–∏—Å–∫–∞**: Premium –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ Premium –∏–ª–∏ Premium Plus
- **Rate Limiting**: getAnalyticsData - 1 –∑–∞–ø—Ä–æ—Å –≤ –º–∏–Ω—É—Ç—É, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã
- **–î–∞–Ω–Ω—ã–µ**: –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 1-2 –¥–Ω—è
- **–ß–∞—Ç—ã**: –î–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è Premium Plus –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- **–ü–µ—Ä–∏–æ–¥**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ - 92 –¥–Ω—è
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –î–∞–Ω–Ω—ã–µ –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 32 –¥–Ω—è
- **–§–∏–ª—å—Ç—Ä—ã**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –±—Ä–µ–Ω–¥–∞–º, SKU

Premium API –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–æ—â–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è—è –≥–ª—É–±–æ–∫–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä—è–º—É—é —Å–≤—è–∑—å —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏.