# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏ RFBS - Returns Management API

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏ rFBS –∑–∞–∫–∞–∑–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞—è–≤–æ–∫ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç. –í–∫–ª—é—á–∞–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏, –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—è–≤–∫–∞—Ö –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤.

**‚ú® –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –î–õ–Ø –ù–û–í–´–• –ò–ù–¢–ï–ì–†–ê–¶–ò–ô** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö v2 API.

## üìä –û–±–∑–æ—Ä –º–µ—Ç–æ–¥–æ–≤ Management API

**–í—Å–µ–≥–æ –º–µ—Ç–æ–¥–æ–≤: 3** ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏

### üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ (1 –º–µ—Ç–æ–¥)
1. **setAction()** ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª—é–±—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏

### üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã (2 –º–µ—Ç–æ–¥–∞)
2. **getReturn()** ‚Äî –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞—è–≤–∫–µ
3. **getReturnsList()** ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏–π
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å**: –û–¥–∏–Ω –º–µ—Ç–æ–¥ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –±–µ–∑ API –∏–∑–º–µ–Ω–µ–Ω–∏–π  
- **Consistency**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **Audit Trail**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π –≤ setAction()
- **approve**: –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞
- **reject**: –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
- **receive_return**: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- **return_money**: –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞
- **compensate**: –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—É–º–º—ã

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤
- **–°—Ç–∞—Ç—É—Å—ã**: –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å—Ç–∞—Ç—É—Å—É –∑–∞—è–≤–æ–∫
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã**: –ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–°—É–º–º—ã**: –ü–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
- **–ü—Ä–∏—á–∏–Ω—ã**: –ü–æ –ø—Ä–∏—á–∏–Ω–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- **–ü—Ä–æ–¥–∞–≤–µ—Ü**: –ü–æ –¥–µ–π—Å—Ç–≤–∏—è–º –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º –ø—Ä–æ–¥–∞–≤—Ü–∞

---

## üìö TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–µ–π—Å—Ç–≤–∏–π

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º
 * Universal return action request
 */
interface RfbsReturnsActionSetRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** 
   * –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   * - approve: –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
   * - reject: –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É  
   * - receive_return: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
   * - return_money: –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å
   * - compensate: –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è
   */
  action: 'approve' | 'reject' | 'receive_return' | 'return_money' | 'compensate';
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–æ–¥–∞–≤—Ü–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è reject) */
  comment?: string;
  
  /** –°—É–º–º–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è compensate) */
  compensation_amount?: number;
  
  /** –ö–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ (–¥–ª—è return_money) */
  compensate_shipping?: boolean;
  
  /** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è */
  metadata?: {
    /** –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–¥–ª—è reject) */
    rejection_reason?: 'policy_violation' | 'time_expired' | 'condition_unacceptable' | 'other';
    
    /** –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ (–¥–ª—è receive_return) */
    item_condition?: 'excellent' | 'good' | 'fair' | 'poor' | 'damaged';
    
    /** –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞ */
    photos?: string[];
    
    /** –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ */
    internal_notes?: string;
  };
}

/**
 * –û—Ç–≤–µ—Ç –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
 * Action execution response
 */
interface RfbsReturnsActionSetResponse {
  /** –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ */
  result?: 'success' | 'error';
  
  /** –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */
  error?: string;
  
  /** –ö–æ–¥ –æ—à–∏–±–∫–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ */
  error_code?: string;
  
  /** –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è */
  new_status?: string;
  
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è */
  transaction_id?: string;
  
  /** –†–∞—Å—á–µ—Ç–Ω–∞—è –¥–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –¥–µ–Ω–µ–≥) */
  estimated_completion_date?: string;
  
  readonly [key: string]: unknown;
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—è–≤–∫–µ

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—è–≤–∫–µ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
 * Return information request
 */
interface RfbsReturnsGetRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** –í–∫–ª—é—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π */
  include_history?: boolean;
  
  /** –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ —Ç–æ–≤–∞—Ä–∞–º */
  include_product_details?: boolean;
  
  /** –í–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç—ã –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ */
  include_calculations?: boolean;
}

/**
 * –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ –≤ –≤–æ–∑–≤—Ä–∞—Ç–µ
 * Detailed return product information
 */
interface RfbsReturnProductDetailed {
  /** SKU —Ç–æ–≤–∞—Ä–∞ */
  sku: string;
  
  /** –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ */
  name: string;
  
  /** –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞ */
  article: string;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ */
  quantity: number;
  
  /** –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞ */
  unit_price: number;
  
  /** –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ */
  total_amount: number;
  
  /** –ü—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ */
  return_reason: string;
  
  /** –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ –º–Ω–µ–Ω–∏—é –ø–æ–∫—É–ø–∞—Ç–µ–ª—è */
  customer_condition_claim: string;
  
  /** –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ */
  actual_condition?: string;
  
  /** –í–æ–∑–º–æ–∂–Ω–∞ –ª–∏ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∞ */
  resaleable?: boolean;
  
  /** –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞ */
  category: string;
  
  /** –ë—Ä–µ–Ω–¥–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
  brand?: string;
  
  /** URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ */
  image_url?: string;
  
  readonly [key: string]: unknown;
}

/**
 * –ó–∞–ø–∏—Å—å –∏—Å—Ç–æ—Ä–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π —Å –∑–∞—è–≤–∫–æ–π
 * Return action history record
 */
interface RfbsReturnHistoryItem {
  /** –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è */
  timestamp: string;
  
  /** –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è */
  action: string;
  
  /** –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è */
  actor: 'customer' | 'seller' | 'system' | 'support';
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –¥–µ–π—Å—Ç–≤–∏—é */
  comment?: string;
  
  /** –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å */
  previous_status?: string;
  
  /** –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å */
  new_status: string;
  
  /** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ */
  metadata?: Record<string, unknown>;
  
  readonly [key: string]: unknown;
}

/**
 * –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
 * Extended return information
 */
interface RfbsReturnDetailed {
  /** –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
  return_id: number;
  posting_number: string;
  status: string;
  created_at: string;
  updated_at: string;
  
  /** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è */
  customer_reason: string;
  customer_comment: string;
  customer_photos?: string[];
  
  /** –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
  total_amount: number;
  shipping_cost: number;
  compensation_amount?: number;
  
  /** –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö */
  products: RfbsReturnProductDetailed[];
  
  /** –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ */
  available_actions: string[];
  
  /** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞ */
  seller_comment?: string;
  seller_photos?: string[];
  
  /** –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π (–µ—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–∞) */
  history?: RfbsReturnHistoryItem[];
  
  /** –†–∞—Å—á–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */
  calculations?: {
    /** –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—É–º–º–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ */
    recommended_compensation: number;
    
    /** –°—Ç–æ–∏–º–æ—Å—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫–∏ */
    logistics_cost: number;
    
    /** –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏ */
    resale_value: number;
    
    /** –†–∏—Å–∫-–æ—Ü–µ–Ω–∫–∞ –∑–∞—è–≤–∫–∏ */
    risk_score: number;
  };
  
  /** –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ */
  deadlines: {
    /** –ö—Ä–∞–π–Ω–∏–π —Å—Ä–æ–∫ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è */
    decision_deadline: string;
    
    /** –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–∞ */
    expected_return_date?: string;
    
    /** –ö—Ä–∞–π–Ω–∏–π —Å—Ä–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–Ω–µ–≥ */
    refund_deadline?: string;
  };
  
  readonly [key: string]: unknown;
}

/**
 * –û—Ç–≤–µ—Ç —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—è–≤–∫–µ
 * Detailed return information response
 */
interface RfbsReturnsGetResponse {
  /** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ */
  return: RfbsReturnDetailed;
  
  readonly [key: string]: unknown;
}
```

### –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```typescript
/**
 * –§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
 * Return list filters
 */
interface RfbsReturnsListFilter {
  /** –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º */
  status?: string[];
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–æ—Ç) */
  created_since?: string;
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–¥–æ) */
  created_until?: string;
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–æ—Ç) */
  updated_since?: string;
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–¥–æ) */
  updated_until?: string;
  
  /** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ */
  min_amount?: number;
  
  /** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ */
  max_amount?: number;
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–∏—á–∏–Ω–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ */
  customer_reason?: string[];
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ –Ω–æ–º–µ—Ä–∞–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π */
  posting_numbers?: string[];
  
  /** –§–∏–ª—å—Ç—Ä –ø–æ SKU —Ç–æ–≤–∞—Ä–æ–≤ */
  product_skus?: string[];
  
  /** –¢–æ–ª—å–∫–æ –∑–∞—è–≤–∫–∏ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è */
  with_customer_photos?: boolean;
  
  /** –¢–æ–ª—å–∫–æ –∑–∞—è–≤–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è */
  requires_attention?: boolean;
  
  /** –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É (–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö) */
  search_text?: string;
}

/**
 * –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å–ø–∏—Å–∫–∞
 * List sorting parameters
 */
interface RfbsReturnsListSort {
  /** –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ */
  field: 'created_at' | 'updated_at' | 'total_amount' | 'status' | 'deadline';
  
  /** –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ */
  direction: 'asc' | 'desc';
}

/**
 * –ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
 * Returns list request
 */
interface RfbsReturnsListRequest {
  /** –§–∏–ª—å—Ç—Ä—ã */
  filter?: RfbsReturnsListFilter;
  
  /** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ */
  sort?: RfbsReturnsListSort;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (max 100) */
  limit?: number;
  
  /** –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ */
  offset?: number;
  
  /** –í–∫–ª—é—á–∏—Ç—å –∫—Ä–∞—Ç–∫—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É */
  include_stats?: boolean;
  
  /** –í–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç—ã –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ */
  include_aggregates?: boolean;
}

/**
 * –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–æ–∑–≤—Ä–∞—Ç–∞–º
 * Returns aggregate statistics
 */
interface RfbsReturnsAggregates {
  /** –û–±—â–∞—è —Å—É–º–º–∞ –≤—Å–µ—Ö –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –≤ –≤—ã–±–æ—Ä–∫–µ */
  total_amount: number;
  
  /** –°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ */
  average_amount: number;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º */
  status_counts: Record<string, number>;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º */
  reason_counts: Record<string, number>;
  
  /** –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞—è–≤–æ–∫ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ */
  with_photos_percentage: number;
  
  /** –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ */
  average_complexity_score: number;
}

/**
 * –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ –¥–ª—è —Å–ø–∏—Å–∫–∞
 * Brief return information for list
 */
interface RfbsReturnBrief {
  return_id: number;
  posting_number: string;
  status: string;
  created_at: string;
  updated_at: string;
  customer_reason: string;
  total_amount: number;
  products_count: number;
  has_customer_photos: boolean;
  requires_attention: boolean;
  deadline: string;
  available_actions: string[];
  
  readonly [key: string]: unknown;
}

/**
 * –û—Ç–≤–µ—Ç —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞—è–≤–æ–∫ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
 * Returns list response
 */
interface RfbsReturnsListResponse {
  /** –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ */
  returns: RfbsReturnBrief[];
  
  /** –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π */
  total: number;
  
  /** –ï—Å—Ç—å –ª–∏ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
  has_next: boolean;
  
  /** –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–∞) */
  aggregates?: RfbsReturnsAggregates;
  
  /** –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ */
  query_time_ms?: number;
  
  readonly [key: string]: unknown;
}
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

```typescript
import { RfbsReturnsApi } from 'daytona-ozon-seller-api';

const rfbsReturnsApi = new RfbsReturnsApi(httpClient);

// 1. –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
const approveReturn = async (returnId: number, comment: string) => {
  try {
    const result = await rfbsReturnsApi.setAction({
      return_id: returnId,
      action: 'approve',
      comment: comment,
      metadata: {
        internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–¥–æ–±—Ä–µ–Ω–æ –ø–æ –ø–æ–ª–∏—Ç–∏–∫–µ –≤–æ–∑–≤—Ä–∞—Ç–∞'
      }
    });
    
    if (result.result === 'success') {
      console.log(`‚úÖ –ó–∞—è–≤–∫–∞ ${returnId} –æ–¥–æ–±—Ä–µ–Ω–∞`);
      console.log(`–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å: ${result.new_status}`);
      console.log(`ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: ${result.transaction_id}`);
      return true;
    } else {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏: ${result.error}`);
      return false;
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ API:', error);
    return false;
  }
};

// 2. –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º
const rejectReturn = async (returnId: number, reason: string) => {
  const result = await rfbsReturnsApi.setAction({
    return_id: returnId,
    action: 'reject',
    comment: reason,
    metadata: {
      rejection_reason: 'policy_violation',
      internal_notes: '–ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å–ª–æ–≤–∏—è–º –≤–æ–∑–≤—Ä–∞—Ç–∞'
    }
  });
  
  if (result.result === 'success') {
    console.log(`üö´ –ó–∞—è–≤–∫–∞ ${returnId} –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞: ${reason}`);
  }
  
  return result;
};

// 3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –æ—Ü–µ–Ω–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
const receiveReturn = async (returnId: number, condition: string, photos?: string[]) => {
  const result = await rfbsReturnsApi.setAction({
    return_id: returnId,
    action: 'receive_return',
    comment: `–¢–æ–≤–∞—Ä –ø–æ–ª—É—á–µ–Ω. –°–æ—Å—Ç–æ—è–Ω–∏–µ: ${condition}`,
    metadata: {
      item_condition: condition as any,
      photos: photos || [],
      internal_notes: '–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ —Å–∫–ª–∞–¥–µ'
    }
  });
  
  console.log(`üì¶ –¢–æ–≤–∞—Ä –ø–æ –∑–∞—è–≤–∫–µ ${returnId} –ø–æ–ª—É—á–µ–Ω –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏: ${condition}`);
  return result;
};

// 4. –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
const returnFullMoney = async (returnId: number, compensateShipping: boolean = true) => {
  const result = await rfbsReturnsApi.setAction({
    return_id: returnId,
    action: 'return_money',
    comment: compensateShipping 
      ? '–í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–∫–ª—é—á–∞—è –¥–æ—Å—Ç–∞–≤–∫—É'
      : '–í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞',
    compensate_shipping: compensateShipping
  });
  
  if (result.result === 'success') {
    console.log(`üí∞ –ü–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥ –ø–æ –∑–∞—è–≤–∫–µ ${returnId}`);
    console.log(`–û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞: ${result.estimated_completion_date}`);
  }
  
  return result;
};

// 5. –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —Å —Ä–∞—Å—á–µ—Ç–æ–º —Å—É–º–º—ã
const compensatePartially = async (returnId: number, percentage: number, reason: string) => {
  // –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—è–≤–∫–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—É–º–º—ã
  const returnInfo = await rfbsReturnsApi.getReturn({ return_id: returnId });
  const compensationAmount = (returnInfo.return?.total_amount || 0) * (percentage / 100);
  
  const result = await rfbsReturnsApi.setAction({
    return_id: returnId,
    action: 'compensate',
    comment: `–ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è ${percentage}%: ${reason}`,
    compensation_amount: compensationAmount,
    metadata: {
      internal_notes: `–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –∫–∞–∫ ${percentage}% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞`
    }
  });
  
  if (result.result === 'success') {
    console.log(`üí∏ –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è ${compensationAmount}‚ÇΩ –ø–æ –∑–∞—è–≤–∫–µ ${returnId}`);
  }
  
  return result;
};
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—è–≤–∫–µ
const getDetailedReturnInfo = async (returnId: number) => {
  try {
    const response = await rfbsReturnsApi.getReturn({
      return_id: returnId,
      include_history: true,
      include_product_details: true,
      include_calculations: true
    });
    
    const returnData = response.return;
    
    console.log(`üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ ${returnId}:`);
    console.log(`–°—Ç–∞—Ç—É—Å: ${returnData.status}`);
    console.log(`–°–æ–∑–¥–∞–Ω–∞: ${new Date(returnData.created_at).toLocaleString()}`);
    console.log(`–ü—Ä–∏—á–∏–Ω–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è: ${returnData.customer_reason}`);
    console.log(`–û–±—â–∞—è —Å—É–º–º–∞: ${returnData.total_amount}‚ÇΩ`);
    
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö
    console.log(`\nüì¶ –¢–æ–≤–∞—Ä—ã –≤ –≤–æ–∑–≤—Ä–∞—Ç–µ (${returnData.products.length}):`);
    returnData.products.forEach(product => {
      console.log(`  ‚Ä¢ ${product.name} (${product.sku})`);
      console.log(`    –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${product.quantity}, –°—É–º–º–∞: ${product.total_amount}‚ÇΩ`);
      console.log(`    –°–æ—Å—Ç–æ—è–Ω–∏–µ: ${product.customer_condition_claim}`);
      console.log(`    –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞—Ç—å: ${product.resaleable ? '–î–∞' : '–ù–µ—Ç'}`);
    });
    
    // –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
    console.log(`\n‚ö° –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:`);
    returnData.available_actions.forEach(action => {
      console.log(`  ‚Ä¢ ${action}`);
    });
    
    // –†–∞—Å—á–µ—Ç—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)
    if (returnData.calculations) {
      console.log(`\nüí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã:`);
      console.log(`  –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ${returnData.calculations.recommended_compensation}‚ÇΩ`);
      console.log(`  –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏: ${returnData.calculations.resale_value}‚ÇΩ`);
      console.log(`  –†–∏—Å–∫-–æ—Ü–µ–Ω–∫–∞: ${returnData.calculations.risk_score}/100`);
    }
    
    // –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)
    if (returnData.history) {
      console.log(`\nüìö –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π:`);
      returnData.history.forEach(item => {
        console.log(`  ${new Date(item.timestamp).toLocaleString()} - ${item.action} (${item.actor})`);
        if (item.comment) {
          console.log(`    –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${item.comment}`);
        }
      });
    }
    
    return returnData;
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:', error);
    return null;
  }
};
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
const getFilteredReturns = async () => {
  try {
    // –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è
    const response = await rfbsReturnsApi.getReturnsList({
      filter: {
        status: ['awaiting_approve', 'awaiting_decision'],
        created_since: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
        min_amount: 1000, // –¢–æ–ª—å–∫–æ –∑–∞—è–≤–∫–∏ –æ—Ç 1000‚ÇΩ
        requires_attention: true,
        with_customer_photos: true
      },
      sort: {
        field: 'created_at',
        direction: 'desc'
      },
      limit: 50,
      include_stats: true,
      include_aggregates: true
    });
    
    console.log(`üìä –ù–∞–π–¥–µ–Ω–æ –∑–∞—è–≤–æ–∫: ${response.total}`);
    console.log(`‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞: ${response.query_time_ms}–º—Å`);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    if (response.aggregates) {
      console.log(`\nüìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—ã–±–æ—Ä–∫–µ:`);
      console.log(`  –û–±—â–∞—è —Å—É–º–º–∞: ${response.aggregates.total_amount.toLocaleString()}‚ÇΩ`);
      console.log(`  –°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞: ${response.aggregates.average_amount.toLocaleString()}‚ÇΩ`);
      console.log(`  –° —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏: ${response.aggregates.with_photos_percentage}%`);
      
      console.log(`\nüìã –ü–æ —Å—Ç–∞—Ç—É—Å–∞–º:`);
      Object.entries(response.aggregates.status_counts).forEach(([status, count]) => {
        console.log(`  ${status}: ${count}`);
      });
      
      console.log(`\nüìù –ü–æ –ø—Ä–∏—á–∏–Ω–∞–º:`);
      Object.entries(response.aggregates.reason_counts).forEach(([reason, count]) => {
        console.log(`  ${reason}: ${count}`);
      });
    }
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é –∑–∞—è–≤–∫—É
    for (const returnItem of response.returns) {
      console.log(`\nüé´ –ó–∞—è–≤–∫–∞ ${returnItem.return_id}:`);
      console.log(`  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${returnItem.posting_number}`);
      console.log(`  –°—Ç–∞—Ç—É—Å: ${returnItem.status}`);
      console.log(`  –°—É–º–º–∞: ${returnItem.total_amount}‚ÇΩ`);
      console.log(`  –¢–æ–≤–∞—Ä–æ–≤: ${returnItem.products_count}`);
      console.log(`  –ö—Ä–∞–π–Ω–∏–π —Å—Ä–æ–∫: ${new Date(returnItem.deadline).toLocaleString()}`);
      console.log(`  –ü—Ä–∏—á–∏–Ω–∞: ${returnItem.customer_reason}`);
      console.log(`  –§–æ—Ç–æ –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è: ${returnItem.has_customer_photos ? '–ï—Å—Ç—å' : '–ù–µ—Ç'}`);
      console.log(`  –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: ${returnItem.available_actions.join(', ')}`);
    }
    
    return response.returns;
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞:', error);
    return [];
  }
};

// –ü–æ–∏—Å–∫ –∑–∞—è–≤–æ–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
const searchReturns = async (searchText: string) => {
  const response = await rfbsReturnsApi.getReturnsList({
    filter: {
      search_text: searchText
    },
    limit: 20
  });
  
  console.log(`üîç –ü–æ–∏—Å–∫ "${searchText}": –Ω–∞–π–¥–µ–Ω–æ ${response.total} –∑–∞—è–≤–æ–∫`);
  
  response.returns.forEach(returnItem => {
    console.log(`  ‚Ä¢ ${returnItem.return_id}: ${returnItem.customer_reason}`);
  });
  
  return response.returns;
};

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
const getReturnsByPostings = async (postingNumbers: string[]) => {
  const response = await rfbsReturnsApi.getReturnsList({
    filter: {
      posting_numbers: postingNumbers
    }
  });
  
  console.log(`üì¶ –ó–∞—è–≤–∫–∏ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º: ${response.total}`);
  
  return response.returns;
};
```

---

## üöÄ –ö–ª–∞—Å—Å ReturnsManager –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

```typescript
/**
 * –ú–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ RFBS
 * RFBS Returns automation manager
 */
export class RfbsReturnsManager {
  constructor(
    private readonly rfbsReturnsApi: RfbsReturnsApi
  ) {}

  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞—è–≤–æ–∫ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
   * Automatic processing of simple returns based on rules
   */
  async autoProcessSimpleReturns(rules: {
    autoApproveReasons?: string[];
    autoRejectAfterDays?: number;
    minAmountForManualReview?: number;
    maxAmountForAutoApproval?: number;
  } = {}): Promise<{
    processed: number;
    approved: number;
    rejected: number;
    skipped: number;
    errors: string[];
  }> {
    const {
      autoApproveReasons = ['defective', 'wrong_item', 'damaged_packaging'],
      autoRejectAfterDays = 14,
      minAmountForManualReview = 5000,
      maxAmountForAutoApproval = 3000
    } = rules;

    const results = {
      processed: 0,
      approved: 0,
      rejected: 0,
      skipped: 0,
      errors: [] as string[]
    };

    try {
      // –ü–æ–ª—É—á–∞–µ–º –∑–∞—è–≤–∫–∏, –æ–∂–∏–¥–∞—é—â–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
      const response = await this.rfbsReturnsApi.getReturnsList({
        filter: {
          status: ['awaiting_approve']
        },
        limit: 100,
        include_stats: true
      });

      for (const returnItem of response.returns) {
        try {
          results.processed++;
          
          // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è
          const details = await this.rfbsReturnsApi.getReturn({
            return_id: returnItem.return_id,
            include_calculations: true
          });

          const returnData = details.return;
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è
          if (returnData.total_amount >= minAmountForManualReview) {
            results.skipped++;
            continue;
          }
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–∞–≤–Ω–æ—Å—Ç–∏ –∑–∞—è–≤–∫–∏
          const daysSinceCreation = Math.floor(
            (Date.now() - new Date(returnData.created_at).getTime()) / (1000 * 60 * 60 * 24)
          );
          
          if (daysSinceCreation > autoRejectAfterDays) {
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω—è–µ–º –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏
            await this.rfbsReturnsApi.setAction({
              return_id: returnItem.return_id,
              action: 'reject',
              comment: `–ó–∞—è–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞: –ø—Ä–µ–≤—ã—à–µ–Ω —Å—Ä–æ–∫ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è (${autoRejectAfterDays} –¥–Ω–µ–π)`,
              metadata: {
                rejection_reason: 'time_expired',
                internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–æ –ø—Ä–∞–≤–∏–ª—É –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è —Å—Ä–æ–∫–∞'
              }
            });
            results.rejected++;
            continue;
          }
          
          // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º
          if (autoApproveReasons.includes(returnData.customer_reason) && 
              returnData.total_amount <= maxAmountForAutoApproval) {
            
            await this.rfbsReturnsApi.setAction({
              return_id: returnItem.return_id,
              action: 'approve',
              comment: `–ó–∞—è–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–¥–æ–±—Ä–µ–Ω–∞: ${returnData.customer_reason}`,
              metadata: {
                internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º'
              }
            });
            results.approved++;
          } else {
            results.skipped++;
          }
          
        } catch (error) {
          results.errors.push(`–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–∫–∏ ${returnItem.return_id}: ${error}`);
        }
      }

    } catch (error) {
      results.errors.push(`–û–±—â–∞—è –æ—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏: ${error}`);
    }

    return results;
  }

  /**
   * –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É
   * Bulk processing of returns by status
   */
  async bulkProcessReturnsByStatus(
    targetStatus: string,
    action: 'approve' | 'reject' | 'receive_return' | 'return_money' | 'compensate',
    options: {
      comment?: string;
      batchSize?: number;
      compensationPercentage?: number;
      dryRun?: boolean;
    } = {}
  ): Promise<{
    totalFound: number;
    processed: number;
    successful: number;
    failed: number;
    errors: Array<{ returnId: number; error: string }>;
  }> {
    const {
      comment = '',
      batchSize = 20,
      compensationPercentage = 50,
      dryRun = false
    } = options;

    const results = {
      totalFound: 0,
      processed: 0,
      successful: 0,
      failed: 0,
      errors: [] as Array<{ returnId: number; error: string }>
    };

    try {
      // –ü–æ–ª—É—á–∞–µ–º –∑–∞—è–≤–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É
      let offset = 0;
      let hasMore = true;

      while (hasMore) {
        const response = await this.rfbsReturnsApi.getReturnsList({
          filter: { status: [targetStatus] },
          limit: batchSize,
          offset: offset
        });

        results.totalFound = response.total;
        hasMore = response.has_next;
        offset += batchSize;

        if (!response.returns || response.returns.length === 0) {
          break;
        }

        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±–∞—Ç—á
        for (const returnItem of response.returns) {
          results.processed++;
          
          if (dryRun) {
            console.log(`[DRY RUN] –ë—ã–ª–∞ –±—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∑–∞—è–≤–∫–∞ ${returnItem.return_id} –¥–µ–π—Å—Ç–≤–∏–µ–º ${action}`);
            results.successful++;
            continue;
          }

          try {
            const actionRequest: any = {
              return_id: returnItem.return_id,
              action: action,
              comment: comment || `–ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: ${action}`,
              metadata: {
                internal_notes: `–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —á–µ—Ä–µ–∑ bulkProcessReturnsByStatus`
              }
            };

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            if (action === 'compensate') {
              const details = await this.rfbsReturnsApi.getReturn({
                return_id: returnItem.return_id
              });
              actionRequest.compensation_amount = 
                (details.return?.total_amount || 0) * (compensationPercentage / 100);
            }

            const result = await this.rfbsReturnsApi.setAction(actionRequest);
            
            if (result.result === 'success') {
              results.successful++;
            } else {
              results.failed++;
              results.errors.push({
                returnId: returnItem.return_id,
                error: result.error || 'Unknown error'
              });
            }
            
          } catch (error) {
            results.failed++;
            results.errors.push({
              returnId: returnItem.return_id,
              error: String(error)
            });
          }
        }
      }

    } catch (error) {
      results.errors.push({
        returnId: 0,
        error: `–û—à–∏–±–∫–∞ –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏: ${error}`
      });
    }

    return results;
  }

  /**
   * –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ ML —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   * Intelligent decision making based on ML recommendations
   */
  async smartDecisionMaking(options: {
    useCalculations?: boolean;
    riskThreshold?: number;
    profitabilityThreshold?: number;
    customerRatingWeight?: number;
  } = {}): Promise<{
    decisionsCount: number;
    approved: number;
    rejected: number;
    compensated: number;
    recommendations: Array<{
      returnId: number;
      action: string;
      reasoning: string;
      confidence: number;
    }>;
  }> {
    const {
      useCalculations = true,
      riskThreshold = 0.7,
      profitabilityThreshold = 0.3,
      customerRatingWeight = 0.2
    } = options;

    const results = {
      decisionsCount: 0,
      approved: 0,
      rejected: 0,
      compensated: 0,
      recommendations: [] as Array<{
        returnId: number;
        action: string;
        reasoning: string;
        confidence: number;
      }>
    };

    try {
      // –ü–æ–ª—É—á–∞–µ–º –∑–∞—è–≤–∫–∏, –æ–∂–∏–¥–∞—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è
      const response = await this.rfbsReturnsApi.getReturnsList({
        filter: {
          status: ['awaiting_approve', 'awaiting_decision']
        },
        limit: 50,
        include_aggregates: true
      });

      for (const returnItem of response.returns) {
        const details = await this.rfbsReturnsApi.getReturn({
          return_id: returnItem.return_id,
          include_calculations: useCalculations,
          include_product_details: true
        });

        const returnData = details.return;
        let recommendation = this.analyzeReturn(returnData, {
          riskThreshold,
          profitabilityThreshold,
          customerRatingWeight
        });

        results.recommendations.push({
          returnId: returnItem.return_id,
          action: recommendation.action,
          reasoning: recommendation.reasoning,
          confidence: recommendation.confidence
        });

        // –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤—ã—Å–æ–∫–∞—è
        if (recommendation.confidence >= 0.8) {
          results.decisionsCount++;
          
          switch (recommendation.action) {
            case 'approve':
              await this.rfbsReturnsApi.setAction({
                return_id: returnItem.return_id,
                action: 'approve',
                comment: `–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–¥–æ–±—Ä–µ–Ω–æ: ${recommendation.reasoning}`,
                metadata: {
                  internal_notes: `ML —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é ${recommendation.confidence}`
                }
              });
              results.approved++;
              break;
              
            case 'reject':
              await this.rfbsReturnsApi.setAction({
                return_id: returnItem.return_id,
                action: 'reject',
                comment: `–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ: ${recommendation.reasoning}`,
                metadata: {
                  rejection_reason: 'other',
                  internal_notes: `ML —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é ${recommendation.confidence}`
                }
              });
              results.rejected++;
              break;
              
            case 'compensate':
              const compensationAmount = (returnData.total_amount * 0.5);
              await this.rfbsReturnsApi.setAction({
                return_id: returnItem.return_id,
                action: 'compensate',
                comment: `–ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ${recommendation.reasoning}`,
                compensation_amount: compensationAmount,
                metadata: {
                  internal_notes: `ML —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é ${recommendation.confidence}`
                }
              });
              results.compensated++;
              break;
          }
        }
      }

    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —É–º–Ω–æ–≥–æ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:', error);
    }

    return results;
  }

  /**
   * –ê–Ω–∞–ª–∏–∑ –∑–∞—è–≤–∫–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è
   * Return analysis for decision making
   */
  private analyzeReturn(returnData: any, options: any): {
    action: string;
    reasoning: string;
    confidence: number;
  } {
    let score = 0.5; // –ù–∞—á–∞–ª—å–Ω—ã–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π score
    let reasoning = [];
    
    // –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã –≤–æ–∑–≤—Ä–∞—Ç–∞
    const highRiskReasons = ['changed_mind', 'found_cheaper'];
    const lowRiskReasons = ['defective', 'wrong_item', 'damaged_packaging'];
    
    if (lowRiskReasons.includes(returnData.customer_reason)) {
      score += 0.3;
      reasoning.push('–Ω–∞–¥–µ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞');
    } else if (highRiskReasons.includes(returnData.customer_reason)) {
      score -= 0.2;
      reasoning.push('—Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞');
    }
    
    // –ê–Ω–∞–ª–∏–∑ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
    if (returnData.total_amount > 10000) {
      score -= 0.1;
      reasoning.push('–≤—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è');
    } else if (returnData.total_amount < 1000) {
      score += 0.1;
      reasoning.push('–Ω–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å');
    }
    
    // –ê–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤
    const resaleableProducts = returnData.products?.filter((p: any) => p.resaleable).length || 0;
    const totalProducts = returnData.products?.length || 1;
    const resaleableRatio = resaleableProducts / totalProducts;
    
    if (resaleableRatio > 0.8) {
      score += 0.2;
      reasoning.push('—Ç–æ–≤–∞—Ä—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞—Ç—å');
    } else if (resaleableRatio < 0.3) {
      score -= 0.15;
      reasoning.push('—Ç–æ–≤–∞—Ä—ã —Å–ª–æ–∂–Ω–æ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞—Ç—å');
    }
    
    // –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ä–∞—Å—á–µ—Ç—ã)
    if (returnData.calculations?.risk_score) {
      const riskScore = returnData.calculations.risk_score / 100;
      if (riskScore > options.riskThreshold) {
        score -= 0.2;
        reasoning.push('–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ ML –º–æ–¥–µ–ª–∏');
      } else if (riskScore < 0.3) {
        score += 0.1;
        reasoning.push('–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫ –ø–æ ML –º–æ–¥–µ–ª–∏');
      }
    }
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
    let action: string;
    let confidence: number;
    
    if (score >= 0.7) {
      action = 'approve';
      confidence = Math.min(score, 0.95);
    } else if (score <= 0.3) {
      action = 'reject';
      confidence = Math.min(1 - score, 0.95);
    } else {
      action = 'compensate';
      confidence = 0.6; // –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏
    }
    
    return {
      action,
      reasoning: reasoning.join(', '),
      confidence: Math.round(confidence * 100) / 100
    };
  }

  /**
   * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
   * Generate returns processing efficiency report
   */
  async generateEfficiencyReport(periodDays: number = 30): Promise<{
    period: string;
    totalReturns: number;
    processedReturns: number;
    averageProcessingTime: string;
    statusBreakdown: Record<string, number>;
    financialImpact: {
      totalAmount: number;
      refundedAmount: number;
      compensatedAmount: number;
      savedAmount: number;
    };
    efficiency: {
      processingRate: number;
      autoDecisionRate: number;
      customerSatisfaction: number;
    };
    recommendations: string[];
  }> {
    const endDate = new Date();
    const startDate = new Date(endDate.getTime() - periodDays * 24 * 60 * 60 * 1000);
    
    try {
      const response = await this.rfbsReturnsApi.getReturnsList({
        filter: {
          created_since: startDate.toISOString(),
          created_until: endDate.toISOString()
        },
        limit: 1000,
        include_aggregates: true
      });
      
      const report = {
        period: `${periodDays} –¥–Ω–µ–π`,
        totalReturns: response.total,
        processedReturns: 0,
        averageProcessingTime: '0 —á–∞—Å–æ–≤',
        statusBreakdown: response.aggregates?.status_counts || {},
        financialImpact: {
          totalAmount: response.aggregates?.total_amount || 0,
          refundedAmount: 0,
          compensatedAmount: 0,
          savedAmount: 0
        },
        efficiency: {
          processingRate: 0,
          autoDecisionRate: 0,
          customerSatisfaction: 85 // Mock –∑–Ω–∞—á–µ–Ω–∏–µ
        },
        recommendations: [] as string[]
      };
      
      // –†–∞—Å—á–µ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
      const completedStatuses = ['completed', 'rejected'];
      report.processedReturns = completedStatuses.reduce((sum, status) => {
        return sum + (report.statusBreakdown[status] || 0);
      }, 0);
      
      report.efficiency.processingRate = 
        report.totalReturns > 0 ? (report.processedReturns / report.totalReturns) * 100 : 0;
      
      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
      if (report.efficiency.processingRate < 80) {
        report.recommendations.push('–£–≤–µ–ª–∏—á—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ - —Ç–µ–∫—É—â–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∏–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö 80%');
      }
      
      if (report.statusBreakdown['awaiting_approve'] > report.processedReturns * 0.3) {
        report.recommendations.push('–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π');
      }
      
      if (report.financialImpact.totalAmount > 100000) {
        report.recommendations.push('–í—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤');
      }
      
      return report;
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞:', error);
      throw error;
    }
  }
}
```

---

## üí° –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Workflow –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

```typescript
const manager = new RfbsReturnsManager(rfbsReturnsApi);

// –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
const dailyAutomation = async () => {
  console.log('üöÄ –ó–∞–ø—É—Å–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤...');
  
  // 1. –ê–≤—Ç–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞—è–≤–æ–∫
  const simpleResults = await manager.autoProcessSimpleReturns({
    autoApproveReasons: ['defective', 'wrong_item', 'damaged_packaging'],
    autoRejectAfterDays: 14,
    maxAmountForAutoApproval: 3000
  });
  
  console.log(`‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –∑–∞—è–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã:`);
  console.log(`  ‚Ä¢ –û–¥–æ–±—Ä–µ–Ω–æ: ${simpleResults.approved}`);
  console.log(`  ‚Ä¢ –û—Ç–∫–ª–æ–Ω–µ–Ω–æ: ${simpleResults.rejected}`);
  console.log(`  ‚Ä¢ –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${simpleResults.skipped}`);
  
  // 2. –£–º–Ω–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
  const smartResults = await manager.smartDecisionMaking({
    riskThreshold: 0.7,
    profitabilityThreshold: 0.3
  });
  
  console.log(`üß† –£–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:`);
  console.log(`  ‚Ä¢ –í—Å–µ–≥–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π: ${smartResults.recommendations.length}`);
  console.log(`  ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: ${smartResults.decisionsCount}`);
  
  // 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
  const report = await manager.generateEfficiencyReport(7);
  console.log(`üìä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é: ${report.efficiency.processingRate.toFixed(1)}%`);
  
  if (report.recommendations.length > 0) {
    console.log(`üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:`);
    report.recommendations.forEach(rec => console.log(`  ‚Ä¢ ${rec}`));
  }
};

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞—è–≤–æ–∫
const monitorCriticalReturns = async () => {
  const criticalReturns = await rfbsReturnsApi.getReturnsList({
    filter: {
      min_amount: 10000, // –í—ã—Å–æ–∫–∏–µ —Å—É–º–º—ã
      status: ['awaiting_approve', 'awaiting_decision'],
      requires_attention: true
    },
    sort: {
      field: 'deadline',
      direction: 'asc' // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
    }
  });
  
  console.log(`üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞—è–≤–æ–∫: ${criticalReturns.total}`);
  
  for (const returnItem of criticalReturns.returns) {
    const timeToDeadline = new Date(returnItem.deadline).getTime() - Date.now();
    const hoursLeft = Math.floor(timeToDeadline / (1000 * 60 * 60));
    
    if (hoursLeft < 24) {
      console.log(`‚è∞ –°–†–û–ß–ù–û: –ó–∞—è–≤–∫–∞ ${returnItem.return_id} - –æ—Å—Ç–∞–ª–æ—Å—å ${hoursLeft} —á–∞—Å–æ–≤`);
      
      // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä—É (mock)
      await sendNotificationToManager({
        returnId: returnItem.return_id,
        urgencyLevel: 'high',
        timeLeft: `${hoursLeft} —á–∞—Å–æ–≤`,
        amount: returnItem.total_amount
      });
    }
  }
};

// Mock —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
async function sendNotificationToManager(notification: any) {
  console.log(`üìß –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É:`, notification);
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

```typescript
// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ERP —Å–∏—Å—Ç–µ–º–æ–π
const syncWithERP = async (erpSystem: any) => {
  const recentReturns = await rfbsReturnsApi.getReturnsList({
    filter: {
      updated_since: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString()
    },
    limit: 100
  });
  
  for (const returnItem of recentReturns.returns) {
    const details = await rfbsReturnsApi.getReturn({
      return_id: returnItem.return_id,
      include_product_details: true
    });
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å ERP
    await erpSystem.syncReturn({
      returnId: returnItem.return_id,
      postingNumber: returnItem.posting_number,
      status: returnItem.status,
      products: details.return.products.map((p: any) => ({
        sku: p.sku,
        quantity: p.quantity,
        condition: p.actual_condition || 'unknown'
      }))
    });
  }
  
  console.log(`üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å ERP: ${recentReturns.returns.length} –∑–∞—è–≤–æ–∫`);
};

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–∞—á–µ—Å—Ç–≤–∞
const updateQualityMetrics = async (qualitySystem: any) => {
  // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏—á–∏–Ω—ã –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  const defectiveReturns = await rfbsReturnsApi.getReturnsList({
    filter: {
      customer_reason: ['defective', 'wrong_item', 'damaged_packaging'],
      created_since: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()
    },
    limit: 200,
    include_aggregates: true
  });
  
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ SKU –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
  const skuStats = new Map();
  
  for (const returnItem of defectiveReturns.returns) {
    const details = await rfbsReturnsApi.getReturn({
      return_id: returnItem.return_id,
      include_product_details: true
    });
    
    for (const product of details.return.products) {
      if (!skuStats.has(product.sku)) {
        skuStats.set(product.sku, {
          sku: product.sku,
          name: product.name,
          returnCount: 0,
          totalQuantity: 0,
          reasons: new Set()
        });
      }
      
      const stats = skuStats.get(product.sku);
      stats.returnCount++;
      stats.totalQuantity += product.quantity;
      stats.reasons.add(returnItem.customer_reason);
    }
  }
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º—É –∫–∞—á–µ—Å—Ç–≤–∞
  for (const [sku, stats] of skuStats.entries()) {
    if (stats.returnCount >= 5) { // –¢–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å 5+ –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏
      await qualitySystem.reportQualityIssue({
        sku: stats.sku,
        productName: stats.name,
        returnCount: stats.returnCount,
        affectedQuantity: stats.totalQuantity,
        commonReasons: Array.from(stats.reasons),
        severity: stats.returnCount > 10 ? 'high' : 'medium'
      });
    }
  }
  
  console.log(`üéØ –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è ${skuStats.size} —Ç–æ–≤–∞—Ä–æ–≤`);
};
```

---

## ‚öôÔ∏è –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏

```typescript
class RfbsReturnsService {
  private readonly maxRetries = 3;
  private readonly retryDelay = 1000;

  async executeActionWithRetry(
    returnId: number, 
    action: any, 
    attempt: number = 1
  ): Promise<any> {
    try {
      const result = await this.rfbsReturnsApi.setAction({
        return_id: returnId,
        ...action
      });
      
      if (result.result === 'success') {
        return result;
      }
      
      throw new Error(result.error || 'Action failed');
      
    } catch (error) {
      if (attempt < this.maxRetries) {
        console.log(`–ü–æ–ø—ã—Ç–∫–∞ ${attempt} –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ ${this.retryDelay}–º—Å...`);
        await this.delay(this.retryDelay * attempt);
        return this.executeActionWithRetry(returnId, action, attempt + 1);
      }
      
      throw error;
    }
  }

  private delay(ms: number): Promise<void> {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

```typescript
class CachedRfbsReturnsService {
  private cache = new Map<string, { data: any; expires: number }>();
  private readonly cacheTTL = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç

  async getCachedReturnInfo(returnId: number): Promise<any> {
    const cacheKey = `return_${returnId}`;
    const cached = this.cache.get(cacheKey);
    
    if (cached && cached.expires > Date.now()) {
      return cached.data;
    }
    
    const data = await this.rfbsReturnsApi.getReturn({
      return_id: returnId,
      include_product_details: true,
      include_calculations: true
    });
    
    this.cache.set(cacheKey, {
      data,
      expires: Date.now() + this.cacheTTL
    });
    
    return data;
  }

  // Batch –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
  async getMultipleReturns(returnIds: number[]): Promise<any[]> {
    const results = [];
    const batchSize = 5;
    
    for (let i = 0; i < returnIds.length; i += batchSize) {
      const batch = returnIds.slice(i, i + batchSize);
      const batchPromises = batch.map(id => this.getCachedReturnInfo(id));
      const batchResults = await Promise.allSettled(batchPromises);
      
      results.push(...batchResults);
      
      // –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
      if (i + batchSize < returnIds.length) {
        await this.delay(100);
      }
    }
    
    return results
      .filter(result => result.status === 'fulfilled')
      .map(result => (result as any).value);
  }
  
  private delay(ms: number): Promise<void> {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}
```

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–∞–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏ RFBS —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –∫–ª–∞—Å—Å–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –º–µ—Ç–æ–¥–∞–º.