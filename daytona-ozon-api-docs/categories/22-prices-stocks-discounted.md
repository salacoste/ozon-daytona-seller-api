# 22.4 API –£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

**API –£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã** - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–ª—è OZON Seller API.

## –û–±–∑–æ—Ä

API –£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞—é—Ç—Å—è —Å–æ —Å–∫–∏–¥–∫–æ–π –∏–∑-–∑–∞ –¥–µ—Ñ–µ–∫—Ç–æ–≤, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π —É–ø–∞–∫–æ–≤–∫–∏ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏—á–∏–Ω. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —É—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ –ø–æ —Å—Ö–µ–º–µ FBO.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ—Ñ–µ–∫—Ç–∞—Ö**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- **–°–≤—è–∑—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏**: –ü–æ–ª—É—á–µ–Ω–∏–µ SKU –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –ø–æ —É—Ü–µ–Ω—ë–Ω–Ω–æ–º—É
- **–¢–æ–ª—å–∫–æ FBO**: –†–∞–±–æ—Ç–∞–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ —Å—Ö–µ–º–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è OZON
- **–°–∫–∏–¥–∫–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö —É—Ü–µ–Ω–∫–∏

---

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö
1. **getDiscountedProductInfo** - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Ü–µ–Ω—ë–Ω–Ω–æ–º —Ç–æ–≤–∞—Ä–µ –ø–æ SKU

---

## üõ†Ô∏è –î–µ—Ç–∞–ª–∏ –º–µ—Ç–æ–¥–∞

## 1. getDiscountedProductInfo

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ –¥–µ—Ñ–µ–∫—Ç–∞—Ö —É—Ü–µ–Ω—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –ø–æ –µ–≥–æ SKU, –∞ —Ç–∞–∫–∂–µ SKU –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksGetDiscountedInfoRequest {
  discounted_skus: string[];        // –ú–∞—Å—Å–∏–≤ SKU —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksGetDiscountedInfoResponse {
  items?: Array<{
    discounted_sku: string;         // SKU —É—Ü–µ–Ω—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    original_sku: string;           // SKU –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    condition: –°–æ—Å—Ç–æ—è–Ω–∏–µ–¢–æ–≤–∞—Ä–∞;     // –°–æ—Å—Ç–æ—è–Ω–∏–µ —É—Ü–µ–Ω—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    defects?: Array<{               // –°–ø–∏—Å–æ–∫ –¥–µ—Ñ–µ–∫—Ç–æ–≤
      type: –¢–∏–ø–î–µ—Ñ–µ–∫—Ç–∞;             // –¢–∏–ø –¥–µ—Ñ–µ–∫—Ç–∞
      description: string;          // –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–∞
      severity: –£—Ä–æ–≤–µ–Ω—å–î–µ—Ñ–µ–∫—Ç–∞;     // –°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å –¥–µ—Ñ–µ–∫—Ç–∞
    }>;
    discount_percentage: number;    // –†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
    discount_reason: string;        // –ü—Ä–∏—á–∏–Ω–∞ —É—Ü–µ–Ω–∫–∏
    created_at: string;             // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Ü–µ–Ω—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    expires_at?: string;            // –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —É—Ü–µ–Ω–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    warehouse_info?: {              // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∫–ª–∞–¥–µ
      warehouse_id: number;         // ID —Å–∫–ª–∞–¥–∞
      warehouse_name: string;       // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞
    };
  }>;
}

type –°–æ—Å—Ç–æ—è–Ω–∏–µ–¢–æ–≤–∞—Ä–∞ = 
  | 'NEW_WITH_DEFECTS'             // –ù–æ–≤—ã–π —Å –¥–µ—Ñ–µ–∫—Ç–∞–º–∏
  | 'DAMAGED_PACKAGING'            // –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞
  | 'RETURNED'                     // –í–æ–∑–≤—Ä–∞—Ç –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
  | 'DISPLAY_SAMPLE'               // –í–∏—Ç—Ä–∏–Ω–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü
  | 'EXPIRED_DISCOUNT'             // –ò—Å—Ç—ë–∫—à–∞—è –∞–∫—Ü–∏—è
  | 'OVERSTOCK';                   // –ò–∑–ª–∏—à–∫–∏ —Ç–æ–≤–∞—Ä–∞

type –¢–∏–ø–î–µ—Ñ–µ–∫—Ç–∞ = 
  | 'PACKAGING_DAMAGE'             // –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–∏
  | 'PRODUCT_DAMAGE'               // –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  | 'MISSING_ACCESSORIES'          // –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤
  | 'COSMETIC_DAMAGE'              // –ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ—Ñ–µ–∫—Ç—ã
  | 'FUNCTIONAL_ISSUE'             // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
  | 'OTHER';                       // –ü—Ä–æ—á–∏–µ –¥–µ—Ñ–µ–∫—Ç—ã

type –£—Ä–æ–≤–µ–Ω—å–î–µ—Ñ–µ–∫—Ç–∞ = 
  | 'MINOR'                        // –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π
  | 'MODERATE'                     // –°—Ä–µ–¥–Ω–∏–π
  | 'MAJOR';                       // –°–µ—Ä—å—ë–∑–Ω—ã–π
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö
```typescript
async function –ø–æ–ª—É—á–∏—Ç—å–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é–û–±–£—Ü–µ–Ω—ë–Ω–Ω—ã—Ö–¢–æ–≤–∞—Ä–∞—Ö() {
  const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await api.pricesStocks.getDiscountedProductInfo({
    discounted_skus: ['987654321', '123456789', '555666777', '111222333']
  });
  
  console.log('üè∑Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö:');
  
  if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items || –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length === 0) {
    console.log('üîç –£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
    return;
  }
  
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.forEach(—Ç–æ–≤–∞—Ä => {
    console.log(`\nüì¶ –£—Ü–µ–Ω—ë–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä SKU: ${—Ç–æ–≤–∞—Ä.discounted_sku}`);
    console.log(`   üîó –û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–≤–∞—Ä SKU: ${—Ç–æ–≤–∞—Ä.original_sku}`);
    console.log(`   üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ: ${—Ç–æ–≤–∞—Ä.condition}`);
    console.log(`   üè∑Ô∏è –°–∫–∏–¥–∫–∞: ${—Ç–æ–≤–∞—Ä.discount_percentage}%`);
    console.log(`   üìù –ü—Ä–∏—á–∏–Ω–∞ —É—Ü–µ–Ω–∫–∏: ${—Ç–æ–≤–∞—Ä.discount_reason}`);
    console.log(`   üìÖ –°–æ–∑–¥–∞–Ω: ${new Date(—Ç–æ–≤–∞—Ä.created_at).toLocaleDateString()}`);
    
    if (—Ç–æ–≤–∞—Ä.expires_at) {
      const –∏—Å—Ç–µ–∫–∞–µ—Ç = new Date(—Ç–æ–≤–∞—Ä.expires_at);
      const –¥–Ω–µ–π = Math.ceil((–∏—Å—Ç–µ–∫–∞–µ—Ç.getTime() - Date.now()) / (24 * 60 * 60 * 1000));
      console.log(`   ‚è∞ –ò—Å—Ç–µ–∫–∞–µ—Ç: ${–∏—Å—Ç–µ–∫–∞–µ—Ç.toLocaleDateString()} (—á–µ—Ä–µ–∑ ${–¥–Ω–µ–π} –¥–Ω–µ–π)`);
      
      if (–¥–Ω–µ–π <= 7) {
        console.log(`   ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: —É—Ü–µ–Ω–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –º–µ–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é!`);
      }
    }
    
    if (—Ç–æ–≤–∞—Ä.warehouse_info) {
      console.log(`   üè≠ –°–∫–ª–∞–¥: ${—Ç–æ–≤–∞—Ä.warehouse_info.warehouse_name} (ID: ${—Ç–æ–≤–∞—Ä.warehouse_info.warehouse_id})`);
    }
    
    // –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ—Ñ–µ–∫—Ç–∞—Ö
    if (—Ç–æ–≤–∞—Ä.defects && —Ç–æ–≤–∞—Ä.defects.length > 0) {
      console.log(`   üîç –î–µ—Ñ–µ–∫—Ç—ã (${—Ç–æ–≤–∞—Ä.defects.length}):`);
      
      —Ç–æ–≤–∞—Ä.defects.forEach(–¥–µ—Ñ–µ–∫—Ç => {
        const —ç–º–æ–¥–∑–∏–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏ = –¥–µ—Ñ–µ–∫—Ç.severity === 'MAJOR' ? 'üî¥' : 
                                  –¥–µ—Ñ–µ–∫—Ç.severity === 'MODERATE' ? 'üü°' : 'üü¢';
        
        console.log(`      ${—ç–º–æ–¥–∑–∏–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏} ${–¥–µ—Ñ–µ–∫—Ç.type}: ${–¥–µ—Ñ–µ–∫—Ç.description}`);
        console.log(`         –°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å: ${–¥–µ—Ñ–µ–∫—Ç.severity}`);
        
        // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–µ—Ñ–µ–∫—Ç–∞–º
        switch (–¥–µ—Ñ–µ–∫—Ç.type) {
          case 'PACKAGING_DAMAGE':
            console.log(`         üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü–µ—Ä–µ—É–ø–∞–∫–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä`);
            break;
          case 'COSMETIC_DAMAGE':
            console.log(`         üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£–∫–∞–∑–∞—Ç—å –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –≤—Å–µ –≤–∏–¥–∏–º—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã`);
            break;
          case 'FUNCTIONAL_ISSUE':
            console.log(`         üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å`);
            break;
          case 'MISSING_ACCESSORIES':
            console.log(`         üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£–∫–∞–∑–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ`);
            break;
        }
      });
    } else {
      console.log(`   ‚úÖ –î–µ—Ñ–µ–∫—Ç—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã`);
    }
    
    // –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∫–∏–¥–∫–∏
    if (—Ç–æ–≤–∞—Ä.discount_percentage < 10) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ù–∏–∑–∫–∞—è —Å–∫–∏–¥–∫–∞ - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ`);
    } else if (—Ç–æ–≤–∞—Ä.discount_percentage > 70) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Å–∫–∏–¥–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å`);
    } else {
      console.log(`   ‚úÖ –°–∫–∏–¥–∫–∞ –≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ`);
    }
  });
  
  return –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è;
}
```

#### –ê–Ω–∞–ª–∏–∑ —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
```typescript
async function –∞–Ω–∞–ª–∏–∑–£—Ü–µ–Ω—ë–Ω–Ω—ã—Ö–¢–æ–≤–∞—Ä–æ–≤() {
  const —É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU = [
    '987654321', '123456789', '555666777', '111222333',
    '444555666', '777888999', '000111222', '333444555'
  ];
  
  const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await api.pricesStocks.getDiscountedProductInfo({
    discounted_skus: —É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU
  });
  
  if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items) return;
  
  console.log(`üìä –ê–Ω–∞–ª–∏–∑ ${–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length} —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤:`);
  
  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é
  const –ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é = new Map<string, any[]>();
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.forEach(—Ç–æ–≤–∞—Ä => {
    if (!–ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é.has(—Ç–æ–≤–∞—Ä.condition)) {
      –ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é.set(—Ç–æ–≤–∞—Ä.condition, []);
    }
    –ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é.get(—Ç–æ–≤–∞—Ä.condition)!.push(—Ç–æ–≤–∞—Ä);
  });
  
  console.log('\nüìã –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é:');
  –ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é.forEach((—Ç–æ–≤–∞—Ä—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ) => {
    const —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ = —Ç–æ–≤–∞—Ä—ã.reduce((—Å—É–º–º–∞, —Ç) => —Å—É–º–º–∞ + —Ç.discount_percentage, 0) / —Ç–æ–≤–∞—Ä—ã.length;
    
    console.log(`   ${—Å–æ—Å—Ç–æ—è–Ω–∏–µ}: ${—Ç–æ–≤–∞—Ä—ã.length} —Ç–æ–≤–∞—Ä–æ–≤ (—Å—Ä–µ–¥–Ω—è—è —Å–∫–∏–¥–∫–∞: ${—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞.toFixed(1)}%)`);
    
    // –ê–Ω–∞–ª–∏–∑ –ø–æ —Ç–∏–ø—É —Å–æ—Å—Ç–æ—è–Ω–∏—è
    switch (—Å–æ—Å—Ç–æ—è–Ω–∏–µ) {
      case 'NEW_WITH_DEFECTS':
        console.log(`      üí° –ù–æ–≤—ã–µ —Å –¥–µ—Ñ–µ–∫—Ç–∞–º–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤–æ–∫`);
        break;
      case 'DAMAGED_PACKAGING':
        console.log(`      üí° –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ - —É–ª—É—á—à–∏—Ç–µ –ª–æ–≥–∏—Å—Ç–∏–∫—É`);
        break;
      case 'RETURNED':
        console.log(`      üí° –í–æ–∑–≤—Ä–∞—Ç—ã - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã –≤–æ–∑–≤—Ä–∞—Ç–æ–≤`);
        break;
      case 'DISPLAY_SAMPLE':
        console.log(`      üí° –í–∏—Ç—Ä–∏–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—Ü—ã - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é`);
        break;
      case 'OVERSTOCK':
        console.log(`      üí° –ò–∑–ª–∏—à–∫–∏ - –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–∫—É–ø–∫–∏`);
        break;
    }
  });
  
  // –ê–Ω–∞–ª–∏–∑ –¥–µ—Ñ–µ–∫—Ç–æ–≤
  const –≤—Å–µ–î–µ—Ñ–µ–∫—Ç—ã = –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.flatMap(—Ç–æ–≤–∞—Ä => —Ç–æ–≤–∞—Ä.defects || []);
  const –ø–æ–¢–∏–ø–∞–º–î–µ—Ñ–µ–∫—Ç–æ–≤ = new Map<string, number>();
  
  –≤—Å–µ–î–µ—Ñ–µ–∫—Ç—ã.forEach(–¥–µ—Ñ–µ–∫—Ç => {
    –ø–æ–¢–∏–ø–∞–º–î–µ—Ñ–µ–∫—Ç–æ–≤.set(–¥–µ—Ñ–µ–∫—Ç.type, (–ø–æ–¢–∏–ø–∞–º–î–µ—Ñ–µ–∫—Ç–æ–≤.get(–¥–µ—Ñ–µ–∫—Ç.type) || 0) + 1);
  });
  
  console.log('\nüîç –ê–Ω–∞–ª–∏–∑ –¥–µ—Ñ–µ–∫—Ç–æ–≤:');
  Array.from(–ø–æ–¢–∏–ø–∞–º–î–µ—Ñ–µ–∫—Ç–æ–≤.entries())
    .sort(([,a], [,b]) => b - a)
    .forEach(([—Ç–∏–ø, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]) => {
      const –ø—Ä–æ—Ü–µ–Ω—Ç = Math.round(–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ / –≤—Å–µ–î–µ—Ñ–µ–∫—Ç—ã.length * 100);
      console.log(`   ${—Ç–∏–ø}: ${–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ} —Å–ª—É—á–∞–µ–≤ (${–ø—Ä–æ—Ü–µ–Ω—Ç}%)`);
      
      // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω—ã–º –º–µ—Ä–∞–º
      if (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ >= 3) {
        switch (—Ç–∏–ø) {
          case 'PACKAGING_DAMAGE':
            console.log(`      üöÄ –î–µ–π—Å—Ç–≤–∏–µ: –£–ª—É—á—à–∏—Ç—å —É–ø–∞–∫–æ–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã`);
            break;
          case 'PRODUCT_DAMAGE':
            console.log(`      üöÄ –î–µ–π—Å—Ç–≤–∏–µ: –£—Å–∏–ª–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞`);
            break;
          case 'COSMETIC_DAMAGE':
            console.log(`      üöÄ –î–µ–π—Å—Ç–≤–∏–µ: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫—É`);
            break;
        }
      }
    });
  
  // –ê–Ω–∞–ª–∏–∑ —Å–∫–∏–¥–æ–∫
  const —Å–∫–∏–¥–∫–∏ = –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.map(—Ç => —Ç.discount_percentage);
  const —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ = —Å–∫–∏–¥–∫–∏.reduce((–∞, –±) => –∞ + –±, 0) / —Å–∫–∏–¥–∫–∏.length;
  const –º–∏–Ω–°–∫–∏–¥–∫–∞ = Math.min(...—Å–∫–∏–¥–∫–∏);
  const –º–∞–∫—Å–°–∫–∏–¥–∫–∞ = Math.max(...—Å–∫–∏–¥–∫–∏);
  
  console.log('\nüí∞ –ê–Ω–∞–ª–∏–∑ —Å–∫–∏–¥–æ–∫:');
  console.log(`   üìä –°—Ä–µ–¥–Ω—è—è —Å–∫–∏–¥–∫–∞: ${—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞.toFixed(1)}%`);
  console.log(`   üìà –î–∏–∞–ø–∞–∑–æ–Ω: ${–º–∏–Ω–°–∫–∏–¥–∫–∞}% - ${–º–∞–∫—Å–°–∫–∏–¥–∫–∞}%`);
  
  const –≤—ã—Å–æ–∫–∏–µ–°–∫–∏–¥–∫–∏ = –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.filter(—Ç => —Ç.discount_percentage > 50);
  if (–≤—ã—Å–æ–∫–∏–µ–°–∫–∏–¥–∫–∏.length > 0) {
    console.log(`   ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–µ —Å–∫–∏–¥–∫–∏ (>50%): ${–≤—ã—Å–æ–∫–∏–µ–°–∫–∏–¥–∫–∏.length} —Ç–æ–≤–∞—Ä–æ–≤`);
    console.log(`   üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂ —Å —Ç–∞–∫–∏–º–∏ —Å–∫–∏–¥–∫–∞–º–∏`);
  }
  
  // –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–µ–∫–∞—é—â–∏—Ö —É—Ü–µ–Ω–æ–∫
  const –∏—Å—Ç–µ–∫–∞—é—â–∏–µ = –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.filter(—Ç–æ–≤–∞—Ä => {
    if (!—Ç–æ–≤–∞—Ä.expires_at) return false;
    const –¥–Ω–µ–π = (new Date(—Ç–æ–≤–∞—Ä.expires_at).getTime() - Date.now()) / (24 * 60 * 60 * 1000);
    return –¥–Ω–µ–π <= 30;
  });
  
  if (–∏—Å—Ç–µ–∫–∞—é—â–∏–µ.length > 0) {
    console.log(`\n‚è∞ –ò—Å—Ç–µ–∫–∞—é—â–∏–µ —É—Ü–µ–Ω–∫–∏ (${–∏—Å—Ç–µ–∫–∞—é—â–∏–µ.length}):`);
    –∏—Å—Ç–µ–∫–∞—é—â–∏–µ.forEach(—Ç–æ–≤–∞—Ä => {
      const –¥–Ω–µ–π = Math.ceil((new Date(—Ç–æ–≤–∞—Ä.expires_at!).getTime() - Date.now()) / (24 * 60 * 60 * 1000));
      console.log(`   üì¶ ${—Ç–æ–≤–∞—Ä.discounted_sku}: –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ ${–¥–Ω–µ–π} –¥–Ω–µ–π`);
      
      if (–¥–Ω–µ–π <= 7) {
        console.log(`      üö® –°–†–û–ß–ù–û: –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏`);
      }
    });
  }
  
  return {
    –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length,
    —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞,
    –ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é: Object.fromEntries(–ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—é),
    —Ç–æ–ø–î–µ—Ñ–µ–∫—Ç—ã: Array.from(–ø–æ–¢–∏–ø–∞–º–î–µ—Ñ–µ–∫—Ç–æ–≤.entries()).slice(0, 3),
    –∏—Å—Ç–µ–∫–∞—é—â–∏—Ö–£—Ü–µ–Ω–æ–∫: –∏—Å—Ç–µ–∫–∞—é—â–∏–µ.length
  };
}
```

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂ —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
```typescript
async function –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–ü—Ä–æ–¥–∞–∂–£—Ü–µ–Ω—ë–Ω–Ω—ã—Ö–¢–æ–≤–∞—Ä–æ–≤() {
  const —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ–¢–æ–≤–∞—Ä—ã = ['987654321', '123456789', '555666777'];
  
  const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await api.pricesStocks.getDiscountedProductInfo({
    discounted_skus: —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ–¢–æ–≤–∞—Ä—ã
  });
  
  if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items) return;
  
  console.log('üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂ —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤:');
  
  const —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: Array<{
    sku: string;
    —Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞: number;
    —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞: number;
    –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: string;
    —Å—Ä–æ—á–Ω–æ—Å—Ç—å: '–≤—ã—Å–æ–∫–∞—è' | '—Å—Ä–µ–¥–Ω—è—è' | '–Ω–∏–∑–∫–∞—è';
    –¥–µ–π—Å—Ç–≤–∏—è: string[];
  }> = [];
  
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.forEach(—Ç–æ–≤–∞—Ä => {
    let —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = —Ç–æ–≤–∞—Ä.discount_percentage;
    const –¥–µ–π—Å—Ç–≤–∏—è: string[] = [];
    let –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ = '';
    let —Å—Ä–æ—á–Ω–æ—Å—Ç—å: '–≤—ã—Å–æ–∫–∞—è' | '—Å—Ä–µ–¥–Ω—è—è' | '–Ω–∏–∑–∫–∞—è' = '–Ω–∏–∑–∫–∞—è';
    
    // –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–µ–∫–∞—é—â–µ–π —É—Ü–µ–Ω–∫–∏
    if (—Ç–æ–≤–∞—Ä.expires_at) {
      const –¥–Ω–µ–π = (new Date(—Ç–æ–≤–∞—Ä.expires_at).getTime() - Date.now()) / (24 * 60 * 60 * 1000);
      
      if (–¥–Ω–µ–π <= 7) {
        —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.min(—Ç–æ–≤–∞—Ä.discount_percentage + 20, 80);
        –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ = `–£—Ü–µ–Ω–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ ${Math.ceil(–¥–Ω–µ–π)} –¥–Ω–µ–π`;
        —Å—Ä–æ—á–Ω–æ—Å—Ç—å = '–≤—ã—Å–æ–∫–∞—è';
        –¥–µ–π—Å—Ç–≤–∏—è.push('–ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é —Ä–∞—Å–ø—Ä–æ–¥–∞–∂—É');
        –¥–µ–π—Å—Ç–≤–∏—è.push('–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å"');
      } else if (–¥–Ω–µ–π <= 30) {
        —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = —Ç–æ–≤–∞—Ä.discount_percentage + 10;
        –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ = '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∏—Å—Ç–µ—á–µ–Ω–∏—é —É—Ü–µ–Ω–∫–∏';
        —Å—Ä–æ—á–Ω–æ—Å—Ç—å = '—Å—Ä–µ–¥–Ω—è—è';
        –¥–µ–π—Å—Ç–≤–∏—è.push('–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–π –±—é–¥–∂–µ—Ç');
      }
    }
    
    // –ê–Ω–∞–ª–∏–∑ —Å–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏ –¥–µ—Ñ–µ–∫—Ç–æ–≤
    const —Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã = —Ç–æ–≤–∞—Ä.defects?.filter(–¥ => –¥.severity === 'MAJOR') || [];
    if (—Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã.length > 0) {
      —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.max(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞, 40);
      –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ += (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ ? '; ' : '') + '–°–µ—Ä—å—ë–∑–Ω—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–∏—Ö —Å–∫–∏–¥–æ–∫';
      –¥–µ–π—Å—Ç–≤–∏—è.push('–î–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç—å –≤—Å–µ –¥–µ—Ñ–µ–∫—Ç—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞');
      –¥–µ–π—Å—Ç–≤–∏—è.push('–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ –¥–µ—Ñ–µ–∫—Ç–æ–≤');
    }
    
    // –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    switch (—Ç–æ–≤–∞—Ä.condition) {
      case 'RETURNED':
        if (—Ç–æ–≤–∞—Ä.discount_percentage < 25) {
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = 25;
          –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ += (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ ? '; ' : '') + '–í–æ–∑–≤—Ä–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã —Ç—Ä–µ–±—É—é—Ç –º–∏–Ω–∏–º—É–º 25% —Å–∫–∏–¥–∫–∏';
        }
        –¥–µ–π—Å—Ç–≤–∏—è.push('–£–∫–∞–∑–∞—Ç—å "–í–æ–∑–≤—Ä–∞—Ç –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è" –≤ –æ–ø–∏—Å–∞–Ω–∏–∏');
        break;
        
      case 'DISPLAY_SAMPLE':
        if (—Ç–æ–≤–∞—Ä.discount_percentage < 15) {
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = 15;
          –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ += (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ ? '; ' : '') + '–í–∏—Ç—Ä–∏–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—Ü—ã –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ —Å–∫–∏–¥–∫–µ';
        }
        –¥–µ–π—Å—Ç–≤–∏—è.push('–ü–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å "–í–∏—Ç—Ä–∏–Ω–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü - –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä"');
        break;
        
      case 'DAMAGED_PACKAGING':
        if (—Ç–æ–≤–∞—Ä.discount_percentage < 10) {
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = 10;
          –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ += (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ ? '; ' : '') + '–ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å';
        }
        –¥–µ–π—Å—Ç–≤–∏—è.push('–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è —É–ø–∞–∫–æ–≤–∫–∏');
        –¥–µ–π—Å—Ç–≤–∏—è.push('–£–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç–æ–≤–∞—Ä –≤–Ω—É—Ç—Ä–∏ –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª');
        break;
    }
    
    // –ë–∞–∑–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –≤—Å–µ—Ö —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
    –¥–µ–π—Å—Ç–≤–∏—è.push('–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã"');
    –¥–µ–π—Å—Ç–≤–∏—è.push('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è—Ä–∫–∏–µ –ª–µ–π–±–ª—ã "–°–ö–ò–î–ö–ê" –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö');
    
    if (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ !== —Ç–æ–≤–∞—Ä.discount_percentage) {
      —Å—Ä–æ—á–Ω–æ—Å—Ç—å = —Å—Ä–æ—á–Ω–æ—Å—Ç—å === '–Ω–∏–∑–∫–∞—è' ? '—Å—Ä–µ–¥–Ω—è—è' : —Å—Ä–æ—á–Ω–æ—Å—Ç—å;
    }
    
    —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push({
      sku: —Ç–æ–≤–∞—Ä.discounted_sku,
      —Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞: —Ç–æ–≤–∞—Ä.discount_percentage,
      —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞: Math.min(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞, 80), // –ú–∞–∫—Å–∏–º—É–º 80%
      –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ,
      —Å—Ä–æ—á–Ω–æ—Å—Ç—å,
      –¥–µ–π—Å—Ç–≤–∏—è
    });
  });
  
  // –í—ã–≤–æ–¥–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
  —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.sort((–∞, –±) => {
    const –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã = { –≤—ã—Å–æ–∫–∞—è: 3, —Å—Ä–µ–¥–Ω—è—è: 2, –Ω–∏–∑–∫–∞—è: 1 };
    return –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã[–±.—Å—Ä–æ—á–Ω–æ—Å—Ç—å] - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã[–∞.—Å—Ä–æ—á–Ω–æ—Å—Ç—å];
  });
  
  —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.forEach(—Ä–µ–∫ => {
    const —ç–º–æ–¥–∑–∏–°—Ä–æ—á–Ω–æ—Å—Ç–∏ = —Ä–µ–∫.—Å—Ä–æ—á–Ω–æ—Å—Ç—å === '–≤—ã—Å–æ–∫–∞—è' ? 'üî¥' : 
                           —Ä–µ–∫.—Å—Ä–æ—á–Ω–æ—Å—Ç—å === '—Å—Ä–µ–¥–Ω—è—è' ? 'üü°' : 'üü¢';
    
    console.log(`\n${—ç–º–æ–¥–∑–∏–°—Ä–æ—á–Ω–æ—Å—Ç–∏} SKU: ${—Ä–µ–∫.sku} (${—Ä–µ–∫.—Å—Ä–æ—á–Ω–æ—Å—Ç—å} —Å—Ä–æ—á–Ω–æ—Å—Ç—å)`);
    console.log(`   üí∞ –¢–µ–∫—É—â–∞—è —Å–∫–∏–¥–∫–∞: ${—Ä–µ–∫.—Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞}%`);
    
    if (—Ä–µ–∫.—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ !== —Ä–µ–∫.—Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞) {
      console.log(`   üìà –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å–∫–∏–¥–∫–∞: ${—Ä–µ–∫.—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞}% (+${—Ä–µ–∫.—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ - —Ä–µ–∫.—Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞}%)`);
    } else {
      console.log(`   ‚úÖ –°–∫–∏–¥–∫–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞: ${—Ä–µ–∫.—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞}%`);
    }
    
    if (—Ä–µ–∫.–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ) {
      console.log(`   üìù –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ${—Ä–µ–∫.–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ}`);
    }
    
    console.log(`   üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:`);
    —Ä–µ–∫.–¥–µ–π—Å—Ç–≤–∏—è.forEach(–¥–µ–π—Å—Ç–≤–∏–µ => {
      console.log(`      ‚Ä¢ ${–¥–µ–π—Å—Ç–≤–∏–µ}`);
    });
  });
  
  // –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  console.log('\nüí° –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Ü–µ–Ω—ë–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–∞–º:');
  console.log('   üì¢ –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã"');
  console.log('   üé® –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –∏ –ª–µ–π–±–ª—ã');
  console.log('   üì± –ù–∞—Å—Ç—Ä–æ–π—Ç–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∫–∏–¥–∫–∞—Ö');
  console.log('   üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—é –ø–æ —É—Ü–µ–Ω—ë–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–∞–º');
  console.log('   üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ—è–≤–ª–µ–Ω–∏—è —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤');
  
  return —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏;
}
```

---

## üèóÔ∏è –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–µ–Ω–µ–¥–∂–µ—Ä —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
```typescript
interface –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–£—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏ {
  –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞?: number;       // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ –¥–ª—è —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞?: number;      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞
  –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–ò—Å—Ç–µ—á–µ–Ω–∏—è–î–Ω–µ–π?: number; // –ó–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏
  –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–°–∫–∏–¥–æ–∫?: boolean;   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–∫–∏–¥–∫–∏
}

class –ú–µ–Ω–µ–¥–∂–µ—Ä–£—Ü–µ–Ω—ë–Ω–Ω—ã—Ö–¢–æ–≤–∞—Ä–æ–≤ {
  private api: OzonSellerAPI;
  private –∫–æ–Ω—Ñ–∏–≥: Required<–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–£—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏>;
  
  constructor(api: OzonSellerAPI, –∫–æ–Ω—Ñ–∏–≥: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–£—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏ = {}) {
    this.api = api;
    this.–∫–æ–Ω—Ñ–∏–≥ = {
      –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞: 10,
      –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞: 80,
      –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–ò—Å—Ç–µ—á–µ–Ω–∏—è–î–Ω–µ–π: 14,
      –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–°–∫–∏–¥–æ–∫: false,
      ...–∫–æ–Ω—Ñ–∏–≥
    };
  }

  /**
   * –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
   */
  async –∞–Ω–∞–ª–∏–∑–ü–æ—Ä—Ç—Ñ–µ–ª—è–£—Ü–µ–Ω—ë–Ω–Ω—ã—Ö–¢–æ–≤–∞—Ä–æ–≤(—É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU: string[]): Promise<{
    –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: {
      –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: number;
      —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞: number;
      –æ–±—â–∞—è–°—Ç–æ–∏–º–æ—Å—Ç—å–°–∫–∏–¥–æ–∫: number;
    };
    –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º: Map<string, any>;
    –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã: any[];
    —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: string[];
  }> {
    const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await this.api.pricesStocks.getDiscountedProductInfo({
      discounted_skus: —É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU
    });

    if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items) {
      return {
        –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: { –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: 0, —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞: 0, –æ–±—â–∞—è–°—Ç–æ–∏–º–æ—Å—Ç—å–°–∫–∏–¥–æ–∫: 0 },
        –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º: new Map(),
        –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã: [],
        —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: ['–£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã']
      };
    }

    const —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = {
      –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length,
      —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞: 0,
      –æ–±—â–∞—è–°—Ç–æ–∏–º–æ—Å—Ç—å–°–∫–∏–¥–æ–∫: 0
    };

    const –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º = new Map<string, {
      –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: number;
      —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞: number;
      —Ç–∏–ø–∏—á–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã: string[];
    }>();

    const –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã: any[] = [];
    const —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: string[] = [];

    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä
    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.forEach(—Ç–æ–≤–∞—Ä => {
      —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ += —Ç–æ–≤–∞—Ä.discount_percentage;

      // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é
      if (!–ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º.has(—Ç–æ–≤–∞—Ä.condition)) {
        –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º.set(—Ç–æ–≤–∞—Ä.condition, {
          –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: 0,
          —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞: 0,
          —Ç–∏–ø–∏—á–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã: []
        });
      }

      const –∫–∞—Ç–µ–≥–æ—Ä–∏—è = –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º.get(—Ç–æ–≤–∞—Ä.condition)!;
      –∫–∞—Ç–µ–≥–æ—Ä–∏—è.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ++;
      –∫–∞—Ç–µ–≥–æ—Ä–∏—è.—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ += —Ç–æ–≤–∞—Ä.discount_percentage;

      // –°–æ–±–∏—Ä–∞–µ–º —Ç–∏–ø–∏—á–Ω—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã
      —Ç–æ–≤–∞—Ä.defects?.forEach(–¥–µ—Ñ–µ–∫—Ç => {
        if (!–∫–∞—Ç–µ–≥–æ—Ä–∏—è.—Ç–∏–ø–∏—á–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã.includes(–¥–µ—Ñ–µ–∫—Ç.type)) {
          –∫–∞—Ç–µ–≥–æ—Ä–∏—è.—Ç–∏–ø–∏—á–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã.push(–¥–µ—Ñ–µ–∫—Ç.type);
        }
      });

      // –í—ã—è–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
      let –ø—Ä–æ–±–ª–µ–º—ã: string[] = [];

      // –ù–∏–∑–∫–∞—è —Å–∫–∏–¥–∫–∞
      if (—Ç–æ–≤–∞—Ä.discount_percentage < this.–∫–æ–Ω—Ñ–∏–≥.–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞) {
        –ø—Ä–æ–±–ª–µ–º—ã.push(`–°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è —Å–∫–∏–¥–∫–∞: ${—Ç–æ–≤–∞—Ä.discount_percentage}%`);
      }

      // –ò—Å—Ç–µ–∫–∞—é—â–∞—è —É—Ü–µ–Ω–∫–∞
      if (—Ç–æ–≤–∞—Ä.expires_at) {
        const –¥–Ω–µ–π = (new Date(—Ç–æ–≤–∞—Ä.expires_at).getTime() - Date.now()) / (24 * 60 * 60 * 1000);
        if (–¥–Ω–µ–π <= this.–∫–æ–Ω—Ñ–∏–≥.–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–ò—Å—Ç–µ—á–µ–Ω–∏—è–î–Ω–µ–π) {
          –ø—Ä–æ–±–ª–µ–º—ã.push(`–£—Ü–µ–Ω–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ ${Math.ceil(–¥–Ω–µ–π)} –¥–Ω–µ–π`);
        }
      }

      // –°–µ—Ä—å—ë–∑–Ω—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã —Å –Ω–∏–∑–∫–æ–π —Å–∫–∏–¥–∫–æ–π
      const —Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã = —Ç–æ–≤–∞—Ä.defects?.filter(–¥ => –¥.severity === 'MAJOR') || [];
      if (—Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã.length > 0 && —Ç–æ–≤–∞—Ä.discount_percentage < 30) {
        –ø—Ä–æ–±–ª–µ–º—ã.push('–°–µ—Ä—å—ë–∑–Ω—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ–π —Å–∫–∏–¥–∫–∏');
      }

      if (–ø—Ä–æ–±–ª–µ–º—ã.length > 0) {
        –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã.push({
          sku: —Ç–æ–≤–∞—Ä.discounted_sku,
          —Å–æ—Å—Ç–æ—è–Ω–∏–µ: —Ç–æ–≤–∞—Ä.condition,
          —Å–∫–∏–¥–∫–∞: —Ç–æ–≤–∞—Ä.discount_percentage,
          –ø—Ä–æ–±–ª–µ–º—ã,
          –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ø—Ä–æ–±–ª–µ–º—ã.some(–ø => –ø.includes('–∏—Å—Ç–µ–∫–∞–µ—Ç')) ? '–≤—ã—Å–æ–∫–∏–π' : '—Å—Ä–µ–¥–Ω–∏–π'
        });
      }
    });

    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ /= —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤;

    // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞—Å—á—ë—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º.forEach(–∫–∞—Ç–µ–≥–æ—Ä–∏—è => {
      –∫–∞—Ç–µ–≥–æ—Ä–∏—è.—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ /= –∫–∞—Ç–µ–≥–æ—Ä–∏—è.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ;
    });

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    if (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ < 20) {
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push('–°—Ä–µ–¥–Ω—è—è —Å–∫–∏–¥–∫–∞ –Ω–∏–∑–∫–∞—è - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂');
    }

    const –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ = –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º.get('RETURNED')?.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ || 0;
    if (–≤–æ–∑–≤—Ä–∞—Ç–æ–≤ > —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤ * 0.3) {
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push('–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏');
    }

    if (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã.length > —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤ * 0.4) {
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push('–ú–Ω–æ–≥–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è');
    }

    return {
      –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞,
      –ø–æ–ö–∞—Ç–µ–≥–æ—Ä–∏—è–º,
      –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã: –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ–¢–æ–≤–∞—Ä—ã.sort((–∞, –±) => {
        const –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã = { –≤—ã—Å–æ–∫–∏–π: 2, —Å—Ä–µ–¥–Ω–∏–π: 1 };
        return –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã[–±.–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç] - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã[–∞.–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç];
      }),
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    };
  }

  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–∏–¥–æ–∫
   */
  async –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–°–∫–∏–¥–æ–∫(—É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU: string[]): Promise<{
    –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: number;
    —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π–ö–û–±–Ω–æ–≤–ª–µ–Ω–∏—é: number;
    –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö–°–∏—Ç—É–∞—Ü–∏–π: number;
    –¥–µ—Ç–∞–ª–∏: Array<{
      sku: string;
      —Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞: number;
      —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞: number;
      –ø—Ä–∏—á–∏–Ω–∞: string;
    }>;
  }> {
    const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await this.api.pricesStocks.getDiscountedProductInfo({
      discounted_skus: —É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU
    });

    const —Ä–µ–∑—É–ª—å—Ç–∞—Ç = {
      –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items?.length || 0,
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π–ö–û–±–Ω–æ–≤–ª–µ–Ω–∏—é: 0,
      –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö–°–∏—Ç—É–∞—Ü–∏–π: 0,
      –¥–µ—Ç–∞–ª–∏: [] as Array<any>
    };

    if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items) return —Ä–µ–∑—É–ª—å—Ç–∞—Ç;

    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.forEach(—Ç–æ–≤–∞—Ä => {
      let —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = —Ç–æ–≤–∞—Ä.discount_percentage;
      let –ø—Ä–∏—á–∏–Ω—ã: string[] = [];
      let –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è = false;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å—Ç–µ–∫–∞—é—â—É—é —É—Ü–µ–Ω–∫—É
      if (—Ç–æ–≤–∞—Ä.expires_at) {
        const –¥–Ω–µ–π = (new Date(—Ç–æ–≤–∞—Ä.expires_at).getTime() - Date.now()) / (24 * 60 * 60 * 1000);
        
        if (–¥–Ω–µ–π <= 3) {
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.min(—Ç–æ–≤–∞—Ä.discount_percentage + 30, this.–∫–æ–Ω—Ñ–∏–≥.–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞);
          –ø—Ä–∏—á–∏–Ω—ã.push('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —É—Ü–µ–Ω–∫–∏');
          –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è = true;
        } else if (–¥–Ω–µ–π <= 7) {
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.min(—Ç–æ–≤–∞—Ä.discount_percentage + 20, this.–∫–æ–Ω—Ñ–∏–≥.–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞);
          –ø—Ä–∏—á–∏–Ω—ã.push('–°–∫–æ—Ä–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —É—Ü–µ–Ω–∫–∏');
        } else if (–¥–Ω–µ–π <= 14) {
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.min(—Ç–æ–≤–∞—Ä.discount_percentage + 10, this.–∫–æ–Ω—Ñ–∏–≥.–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞);
          –ø—Ä–∏—á–∏–Ω—ã.push('–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∏—Å—Ç–µ—á–µ–Ω–∏—é —É—Ü–µ–Ω–∫–∏');
        }
      }

      // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å –¥–µ—Ñ–µ–∫—Ç–æ–≤
      const —Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã = —Ç–æ–≤–∞—Ä.defects?.filter(–¥ => –¥.severity === 'MAJOR').length || 0;
      if (—Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã > 0 && —Ç–æ–≤–∞—Ä.discount_percentage < 40) {
        —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.max(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞, 40);
        –ø—Ä–∏—á–∏–Ω—ã.push(`${—Å–µ—Ä—å—ë–∑–Ω—ã–µ–î–µ—Ñ–µ–∫—Ç—ã} —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤`);
      }

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É –ø–æ —Ç–∏–ø—É —Å–æ—Å—Ç–æ—è–Ω–∏—è
      const –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ–°–∫–∏–¥–∫–∏–ü–æ–¢–∏–ø—É = {
        'RETURNED': 20,
        'DAMAGED_PACKAGING': 10,
        'NEW_WITH_DEFECTS': 15,
        'DISPLAY_SAMPLE': 15,
        'OVERSTOCK': 25
      };

      const –º–∏–Ω–°–∫–∏–¥–∫–∞–î–ª—è–¢–∏–ø–∞ = –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ–°–∫–∏–¥–∫–∏–ü–æ–¢–∏–ø—É[—Ç–æ–≤–∞—Ä.condition] || this.–∫–æ–Ω—Ñ–∏–≥.–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞;
      if (—Ç–æ–≤–∞—Ä.discount_percentage < –º–∏–Ω–°–∫–∏–¥–∫–∞–î–ª—è–¢–∏–ø–∞) {
        —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ = Math.max(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞, –º–∏–Ω–°–∫–∏–¥–∫–∞–î–ª—è–¢–∏–ø–∞);
        –ø—Ä–∏—á–∏–Ω—ã.push(`–ú–∏–Ω–∏–º—É–º –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è "${—Ç–æ–≤–∞—Ä.condition}"`);
      }

      // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é
      if (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞ !== —Ç–æ–≤–∞—Ä.discount_percentage) {
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç.—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π–ö–û–±–Ω–æ–≤–ª–µ–Ω–∏—é++;
        
        if (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è) {
          —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö–°–∏—Ç—É–∞—Ü–∏–π++;
        }

        —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
          sku: —Ç–æ–≤–∞—Ä.discounted_sku,
          —Ç–µ–∫—É—â–∞—è–°–∫–∏–¥–∫–∞: —Ç–æ–≤–∞—Ä.discount_percentage,
          —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞: Math.min(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è–°–∫–∏–¥–∫–∞, this.–∫–æ–Ω—Ñ–∏–≥.–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞),
          –ø—Ä–∏—á–∏–Ω–∞: –ø—Ä–∏—á–∏–Ω—ã.join('; ')
        });
      }
    });

    return —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
  }

  /**
   * –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É—Ü–µ–Ω–æ–∫
   */
  async —Å–æ–∑–¥–∞—Ç—å–û—Ç—á—ë—Ç–ü–æ–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏–£—Ü–µ–Ω–æ–∫(—É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU: string[], –ø–µ—Ä–∏–æ–¥–î–Ω–µ–π: number = 30): Promise<{
    –∞–Ω–∞–ª–∏–∑–ü–µ—Ä–∏–æ–¥–∞: {
      –Ω–∞—á–∞–ª–æ–ü–µ—Ä–∏–æ–¥–∞: string;
      –∫–æ–Ω–µ—Ü–ü–µ—Ä–∏–æ–¥–∞: string;
      –¥–Ω–µ–π–í–ü–µ—Ä–∏–æ–¥–µ: number;
    };
    —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è: any;
    —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫: any;
    —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: string[];
  }> {
    const —Å–µ–≥–æ–¥–Ω—è = new Date();
    const –Ω–∞—á–∞–ª–æ–ü–µ—Ä–∏–æ–¥–∞ = new Date(—Å–µ–≥–æ–¥–Ω—è.getTime() - –ø–µ—Ä–∏–æ–¥–î–Ω–µ–π * 24 * 60 * 60 * 1000);

    const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await this.api.pricesStocks.getDiscountedProductInfo({
      discounted_skus: —É—Ü–µ–Ω—ë–Ω–Ω—ã–µSKU
    });

    const –æ—Ç—á—ë—Ç = {
      –∞–Ω–∞–ª–∏–∑–ü–µ—Ä–∏–æ–¥–∞: {
        –Ω–∞—á–∞–ª–æ–ü–µ—Ä–∏–æ–¥–∞: –Ω–∞—á–∞–ª–æ–ü–µ—Ä–∏–æ–¥–∞.toISOString().split('T')[0],
        –∫–æ–Ω–µ—Ü–ü–µ—Ä–∏–æ–¥–∞: —Å–µ–≥–æ–¥–Ω—è.toISOString().split('T')[0],
        –¥–Ω–µ–π–í–ü–µ—Ä–∏–æ–¥–µ: –ø–µ—Ä–∏–æ–¥–î–Ω–µ–π
      },
      —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è: {
        –≤—Å–µ–≥–æ–£—Ü–µ–Ω—ë–Ω–Ω—ã—Ö–¢–æ–≤–∞—Ä–æ–≤: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items?.length || 0,
        –ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—è–º: new Map<string, number>(),
        —Å—Ä–µ–¥–Ω–∏–π–í–æ–∑—Ä–∞—Å—Ç–£—Ü–µ–Ω–∫–∏: 0
      },
      —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫: {
        —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–°–∫–∏–¥–æ–∫: new Map<string, number>(),
        —Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞: 0,
        –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ–°–∫–∏–¥–∫–∏: 0,
        –Ω–∏–∑–∫–∏–µ–°–∫–∏–¥–∫–∏: 0,
        –≤—ã—Å–æ–∫–∏–µ–°–∫–∏–¥–∫–∏: 0
      },
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: [] as string[]
    };

    if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items || –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length === 0) {
      –æ—Ç—á—ë—Ç.—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.push('–£—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
      return –æ—Ç—á—ë—Ç;
    }

    let —Å—É–º–º–∞–°–∫–∏–¥–æ–∫ = 0;
    let —Å—É–º–º–∞–í–æ–∑—Ä–∞—Å—Ç–æ–≤ = 0;

    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.forEach(—Ç–æ–≤–∞—Ä => {
      // –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è
      const —Ç–µ–∫—É—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –æ—Ç—á—ë—Ç.—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è.–ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—è–º.get(—Ç–æ–≤–∞—Ä.condition) || 0;
      –æ—Ç—á—ë—Ç.—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è.–ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—è–º.set(—Ç–æ–≤–∞—Ä.condition, —Ç–µ–∫—É—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ + 1);

      // –í–æ–∑—Ä–∞—Å—Ç —É—Ü–µ–Ω–∫–∏
      const –≤–æ–∑—Ä–∞—Å—Ç–î–Ω–µ–π = (Date.now() - new Date(—Ç–æ–≤–∞—Ä.created_at).getTime()) / (24 * 60 * 60 * 1000);
      —Å—É–º–º–∞–í–æ–∑—Ä–∞—Å—Ç–æ–≤ += –≤–æ–∑—Ä–∞—Å—Ç–î–Ω–µ–π;

      // –ê–Ω–∞–ª–∏–∑ —Å–∫–∏–¥–æ–∫
      —Å—É–º–º–∞–°–∫–∏–¥–æ–∫ += —Ç–æ–≤–∞—Ä.discount_percentage;

      const –¥–∏–∞–ø–∞–∑–æ–Ω–°–∫–∏–¥–∫–∏ = —Ç–æ–≤–∞—Ä.discount_percentage < 20 ? '–Ω–∏–∑–∫–∏–µ (0-19%)' :
                             —Ç–æ–≤–∞—Ä.discount_percentage < 50 ? '—Å—Ä–µ–¥–Ω–∏–µ (20-49%)' :
                             '–≤—ã—Å–æ–∫–∏–µ (50%+)';
      
      const —Ç–µ–∫—É—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–í–î–∏–∞–ø–∞–∑–æ–Ω–µ = –æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–°–∫–∏–¥–æ–∫.get(–¥–∏–∞–ø–∞–∑–æ–Ω–°–∫–∏–¥–∫–∏) || 0;
      –æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–°–∫–∏–¥–æ–∫.set(–¥–∏–∞–ø–∞–∑–æ–Ω–°–∫–∏–¥–∫–∏, —Ç–µ–∫—É—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–í–î–∏–∞–ø–∞–∑–æ–Ω–µ + 1);

      // –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
      if (—Ç–æ–≤–∞—Ä.discount_percentage < 15) {
        –æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.–Ω–∏–∑–∫–∏–µ–°–∫–∏–¥–∫–∏++;
      } else if (—Ç–æ–≤–∞—Ä.discount_percentage <= 60) {
        –æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ–°–∫–∏–¥–∫–∏++;
      } else {
        –æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.–≤—ã—Å–æ–∫–∏–µ–°–∫–∏–¥–∫–∏++;
      }
    });

    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
    –æ—Ç—á—ë—Ç.—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è.—Å—Ä–µ–¥–Ω–∏–π–í–æ–∑—Ä–∞—Å—Ç–£—Ü–µ–Ω–∫–∏ = —Å—É–º–º–∞–í–æ–∑—Ä–∞—Å—Ç–æ–≤ / –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length;
    –æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.—Å—Ä–µ–¥–Ω—è—è–°–∫–∏–¥–∫–∞ = —Å—É–º–º–∞–°–∫–∏–¥–æ–∫ / –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length;

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    const –ø—Ä–æ—Ü–µ–Ω—Ç–ù–∏–∑–∫–∏—Ö–°–∫–∏–¥–æ–∫ = (–æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.–Ω–∏–∑–∫–∏–µ–°–∫–∏–¥–∫–∏ / –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length) * 100;
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–ù–∏–∑–∫–∏—Ö–°–∫–∏–¥–æ–∫ > 30) {
      –æ—Ç—á—ë—Ç.—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.push(`${–ø—Ä–æ—Ü–µ–Ω—Ç–ù–∏–∑–∫–∏—Ö–°–∫–∏–¥–æ–∫.toFixed(1)}% —Ç–æ–≤–∞—Ä–æ–≤ –∏–º–µ—é—Ç –Ω–∏–∑–∫–∏–µ —Å–∫–∏–¥–∫–∏ - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ`);
    }

    const –ø—Ä–æ—Ü–µ–Ω—Ç–í—ã—Å–æ–∫–∏—Ö–°–∫–∏–¥–æ–∫ = (–æ—Ç—á—ë—Ç.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å–°–∫–∏–¥–æ–∫.–≤—ã—Å–æ–∫–∏–µ–°–∫–∏–¥–∫–∏ / –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length) * 100;
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–í—ã—Å–æ–∫–∏—Ö–°–∫–∏–¥–æ–∫ > 20) {
      –æ—Ç—á—ë—Ç.—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.push(`${–ø—Ä–æ—Ü–µ–Ω—Ç–í—ã—Å–æ–∫–∏—Ö–°–∫–∏–¥–æ–∫.toFixed(1)}% —Ç–æ–≤–∞—Ä–æ–≤ –∏–º–µ—é—Ç –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–µ —Å–∫–∏–¥–∫–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å`);
    }

    if (–æ—Ç—á—ë—Ç.—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è.—Å—Ä–µ–¥–Ω–∏–π–í–æ–∑—Ä–∞—Å—Ç–£—Ü–µ–Ω–∫–∏ > 60) {
      –æ—Ç—á—ë—Ç.—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.push('–°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç —É—Ü–µ–Ω–æ–∫ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 60 –¥–Ω–µ–π - –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂');
    }

    // –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º
    const –º–∞–∫—Å–°–æ—Å—Ç–æ—è–Ω–∏–µ = Array.from(–æ—Ç—á—ë—Ç.—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–ü–æ—Ä—Ç—Ñ–µ–ª—è.–ø–æ–°–æ—Å—Ç–æ—è–Ω–∏—è–º.entries())
      .sort(([,a], [,b]) => b - a)[0];
    
    if (–º–∞–∫—Å–°–æ—Å—Ç–æ—è–Ω–∏–µ && –º–∞–∫—Å–°–æ—Å—Ç–æ—è–Ω–∏–µ[1] > –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length * 0.4) {
      –æ—Ç—á—ë—Ç.—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏–ü–æ–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.push(`–ü—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç —Ç–æ–≤–∞—Ä—ã "${–º–∞–∫—Å–°–æ—Å—Ç–æ—è–Ω–∏–µ[0]}" - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω—ã–µ –º–µ—Ä—ã`);
    }

    return –æ—Ç—á—ë—Ç;
  }
}
```

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫
```typescript
async function —É—Å—Ç–æ–π—á–∏–≤—ã–µ–û–ø–µ—Ä–∞—Ü–∏–∏–°–£—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏–¢–æ–≤–∞—Ä–∞–º–∏() {
  try {
    // –ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
    const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await api.pricesStocks.getDiscountedProductInfo({
      discounted_skus: ['–ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ò–ô_SKU', '–ù–ï_–£–¶–ï–ù–Å–ù–ù–´–ô_SKU']
    });
    
    if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items || –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.items.length === 0) {
      console.log('üîç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
      console.log('üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:');
      console.log('   - SKU –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Å–∏—Å—Ç–µ–º–µ');
      console.log('   - –¢–æ–≤–∞—Ä—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —É—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏');
      console.log('   - –¢–æ–≤–∞—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ —Å—Ö–µ–º–µ FBS (API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ FBO)');
    }
    
  } catch (error: any) {
    if (error.response?.status === 400) {
      console.error('‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞');
      console.log('üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:');
      console.log('   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ SKU');
      console.log('   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ SKU –≤ –∑–∞–ø—Ä–æ—Å–µ (–Ω–µ –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã)');
      
    } else if (error.response?.status === 404) {
      console.error('üîç –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
      console.log('üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:');
      console.log('   - SKU —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥–µ');
      console.log('   - –¢–æ–≤–∞—Ä—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ');
      console.log('   - –¢–æ–≤–∞—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ —Å—Ö–µ–º–µ FBO');
      
    } else if (error.response?.status === 403) {
      console.error('üîí –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞');
      console.log('üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —É—Ü–µ–Ω—ë–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–∞–º FBO');
      
    } else {
      console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö:', error.message);
    }
  }
  
  try {
    // –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–∞—Ö —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏
    const –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ–ü–æ–¥—Ö–æ–¥—ã = [
      { skus: ['123456789'], –æ–ø–∏—Å–∞–Ω–∏–µ: '–û–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π SKU' },
      { skus: [], –æ–ø–∏—Å–∞–Ω–∏–µ: '–ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ SKU' }
    ];
    
    for (const –ø–æ–¥—Ö–æ–¥ of –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ–ü–æ–¥—Ö–æ–¥—ã) {
      console.log(`üîÑ –ü—Ä–æ–±—É–µ–º –ø–æ–¥—Ö–æ–¥: ${–ø–æ–¥—Ö–æ–¥.–æ–ø–∏—Å–∞–Ω–∏–µ}`);
      
      try {
        const —Ä–µ–∑—É–ª—å—Ç–∞—Ç = await api.pricesStocks.getDiscountedProductInfo({
          discounted_skus: –ø–æ–¥—Ö–æ–¥.skus
        });
        
        console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ: –Ω–∞–π–¥–µ–Ω–æ ${—Ä–µ–∑—É–ª—å—Ç–∞—Ç.items?.length || 0} —Ç–æ–≤–∞—Ä–æ–≤`);
        break;
        
      } catch (–ø–æ–¥—Ö–æ–¥–û—à–∏–±–∫–∞: any) {
        console.log(`‚ùå –ü–æ–¥—Ö–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: ${–ø–æ–¥—Ö–æ–¥–û—à–∏–±–∫–∞.message}`);
      }
    }
    
  } catch (error: any) {
    console.error('‚ùå –í—Å–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –Ω–µ—É—Å–ø–µ—à–Ω—ã');
  }
}
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[API –¶–µ–Ω—ã –∏ –û—Å—Ç–∞—Ç–∫–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏.md)** - –û—Å–Ω–æ–≤–Ω–æ–π –æ–±–∑–æ—Ä API
- **[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ü–µ–Ω—ã.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ü–µ–Ω—ã.md)** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –∏ —Å–∫–∏–¥–æ–∫
- **[API –¢–æ–≤–∞—Ä—ã (product.md)](./product.md)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤

---

**–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–í–µ—Ä—Å–∏—è API**: v1  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 1 –º–µ—Ç–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏