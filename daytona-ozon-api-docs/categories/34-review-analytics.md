# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ - Review Analytics API

–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ OZON. –≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

**‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –ü–û–î–ü–ò–°–ö–£ PREMIUM PLUS** ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ —Å –ø–æ–¥–ø–∏—Å–∫–æ–π Premium Plus.

## üìä –û–±–∑–æ—Ä –º–µ—Ç–æ–¥–æ–≤ Analytics API

**–í—Å–µ–≥–æ –º–µ—Ç–æ–¥–æ–≤: 1** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (1 –º–µ—Ç–æ–¥)
1. **changeStatus()** ‚Äî –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π/–Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–∑—ã–≤–æ–≤
- **UNPROCESSED**: –ù–æ–≤—ã–µ –æ—Ç–∑—ã–≤—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞
- **PROCESSED**: –û—Ç–∑—ã–≤—ã, –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–º (—Å –æ—Ç–≤–µ—Ç–∞–º–∏ –∏–ª–∏ –±–µ–∑)
- **Batch Processing**: –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ 100 –æ—Ç–∑—ã–≤–æ–≤ –∑–∞ —Ä–∞–∑
- **Workflow Integration**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM –∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –ú–æ–¥–µ–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤
- **–°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å**: –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (UNPROCESSED ‚Üí PROCESSED)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- **–¢—Ä–µ–∫–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **KPI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–¥–∞–≤—Ü–∞

---

## üìö TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### Request —Ç–∏–ø—ã

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–∑—ã–≤–æ–≤
 * Review status change request
 */
interface ReviewChangeStatusRequest {
  /** –°–ø–∏—Å–æ–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ */
  review_ids: string[];
  
  /** 
   * –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
   * - PROCESSED: –û—Ç–∑—ã–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
   * - UNPROCESSED: –û—Ç–∑—ã–≤ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
   */
  status: 'PROCESSED' | 'UNPROCESSED';
}
```

### Response —Ç–∏–ø—ã

```typescript
/**
 * –û—Ç–≤–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–∑—ã–≤–æ–≤
 * Review status change response
 */
interface ReviewChangeStatusResponse extends BaseResponse {
  /** –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ */
  result?: 'ok';
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ */
  processed_count?: number;
  
  /** –°–ø–∏—Å–æ–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ—Ç–∑—ã–≤–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å */
  failed_ids?: string[];
  
  /** –ü—Ä–∏—á–∏–Ω—ã –Ω–µ—É–¥–∞—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ failed_id */
  failure_reasons?: Array<{
    review_id: string;
    error_code: string;
    error_message: string;
  }>;
  
  readonly [key: string]: unknown;
}

/**
 * –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –æ—Ç–∑—ã–≤–æ–≤
 * Review status statistics
 */
interface ReviewStatusStats {
  /** –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ */
  total_reviews: number;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ */
  processed_reviews: number;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ */
  unprocessed_reviews: number;
  
  /** –ü—Ä–æ—Ü–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ */
  processed_percentage: number;
  
  /** –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Ç–∑—ã–≤—ã (–≤ —á–∞—Å–∞—Ö) */
  avg_response_time_hours?: number;
  
  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ —Å –æ—Ç–≤–µ—Ç–∞–º–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞ */
  reviews_with_seller_response: number;
}
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

```typescript
import { ReviewApi } from 'daytona-ozon-seller-api';

const reviewApi = new ReviewApi(httpClient);

// –û—Ç–º–µ—Ç–∏—Ç—å –æ—Ç–∑—ã–≤—ã –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ
const markAsProcessed = async (reviewIds: string[]) => {
  try {
    const result = await reviewApi.changeStatus({
      review_ids: reviewIds,
      status: 'PROCESSED'
    });
    
    if (result.result === 'ok') {
      console.log(`‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –æ—Ç–∑—ã–≤–æ–≤: ${result.processed_count || reviewIds.length}`);
      
      if (result.failed_ids && result.failed_ids.length > 0) {
        console.log(`‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å: ${result.failed_ids.length} –æ—Ç–∑—ã–≤–æ–≤`);
        result.failure_reasons?.forEach(failure => {
          console.log(`‚ùå ${failure.review_id}: ${failure.error_message}`);
        });
      }
      
      return true;
    }
    
    return false;
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–∑—ã–≤–æ–≤:', error);
    return false;
  }
};

// –í–µ—Ä–Ω—É—Ç—å –æ—Ç–∑—ã–≤—ã –≤ —Å—Ç–∞—Ç—É—Å "–Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π"
const markAsUnprocessed = async (reviewIds: string[]) => {
  try {
    const result = await reviewApi.changeStatus({
      review_ids: reviewIds,
      status: 'UNPROCESSED'
    });
    
    console.log(`üîÑ –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ –≤ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ: ${result.processed_count || reviewIds.length}`);
    return result.result === 'ok';
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–∑—ã–≤–æ–≤:', error);
    return false;
  }
};
```

---

## üöÄ –ö–ª–∞—Å—Å ReviewAnalytics –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

```typescript
/**
 * –ö–ª–∞—Å—Å –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤
 * Review analytics and automation class
 */
export class ReviewAnalytics {
  constructor(
    private readonly reviewApi: ReviewApi
  ) {}

  /**
   * –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –æ—Ç–∑—ã–≤–æ–≤
   * Get review status statistics
   */
  async getStatusStatistics(): Promise<ReviewStatusStats> {
    const counts = await this.reviewApi.getCount();
    const total = counts.total || 0;
    const processed = counts.processed || 0;
    const unprocessed = counts.unprocessed || 0;
    
    return {
      total_reviews: total,
      processed_reviews: processed,
      unprocessed_reviews: unprocessed,
      processed_percentage: total > 0 ? (processed / total) * 100 : 0,
      reviews_with_seller_response: 0 // –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
    };
  }

  /**
   * –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ —Å retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
   * Batch process reviews with retry mechanism
   */
  async batchProcessReviews(
    reviewIds: string[],
    targetStatus: 'PROCESSED' | 'UNPROCESSED',
    options: {
      batchSize?: number;
      retryAttempts?: number;
      retryDelay?: number;
    } = {}
  ): Promise<{
    totalRequested: number;
    successfullyProcessed: number;
    failedIds: string[];
    errors: Array<{ reviewId: string; error: string }>;
  }> {
    const {
      batchSize = 50,
      retryAttempts = 3,
      retryDelay = 1000
    } = options;

    const results = {
      totalRequested: reviewIds.length,
      successfullyProcessed: 0,
      failedIds: [] as string[],
      errors: [] as Array<{ reviewId: string; error: string }>
    };

    // –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –±–∞—Ç—á–∏
    for (let i = 0; i < reviewIds.length; i += batchSize) {
      const batch = reviewIds.slice(i, i + batchSize);
      let attempt = 0;
      let batchSuccessful = false;

      while (attempt < retryAttempts && !batchSuccessful) {
        try {
          const response = await this.reviewApi.changeStatus({
            review_ids: batch,
            status: targetStatus
          });

          if (response.result === 'ok') {
            results.successfullyProcessed += (response.processed_count || batch.length);
            
            if (response.failed_ids) {
              results.failedIds.push(...response.failed_ids);
              response.failure_reasons?.forEach(failure => {
                results.errors.push({
                  reviewId: failure.review_id,
                  error: failure.error_message
                });
              });
            }
            
            batchSuccessful = true;
          }
        } catch (error) {
          attempt++;
          if (attempt < retryAttempts) {
            await new Promise(resolve => setTimeout(resolve, retryDelay * attempt));
          } else {
            // –ï—Å–ª–∏ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã, –ø–æ–º–µ—á–∞–µ–º –≤–µ—Å—å –±–∞—Ç—á –∫–∞–∫ –Ω–µ—É–¥–∞—á–Ω—ã–π
            results.failedIds.push(...batch);
            results.errors.push({
              reviewId: batch.join(','),
              error: `Batch failed after ${retryAttempts} attempts: ${error}`
            });
          }
        }
      }
    }

    return results;
  }

  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
   * Automatic review processing based on criteria
   */
  async autoProcessReviews(criteria: {
    maxDaysOld?: number;
    minRating?: number;
    hasSellerResponse?: boolean;
    orderStatus?: 'DELIVERED' | 'CANCELLED';
  }): Promise<{
    processed: number;
    skipped: number;
    errors: string[];
  }> {
    const results = {
      processed: 0,
      skipped: 0,
      errors: [] as string[]
    };

    try {
      // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
      const unprocessedReviews = await this.reviewApi.getList({
        limit: 100,
        status: 'UNPROCESSED',
        sort_dir: 'ASC' // –°—Ç–∞—Ä—ã–µ –æ—Ç–∑—ã–≤—ã –ø–µ—Ä–≤—ã–º–∏
      });

      if (!unprocessedReviews.reviews) {
        return results;
      }

      const reviewsToProcess: string[] = [];
      const currentDate = new Date();

      for (const review of unprocessedReviews.reviews) {
        let shouldProcess = true;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –æ—Ç–∑—ã–≤–∞
        if (criteria.maxDaysOld) {
          const reviewDate = new Date(review.published_at);
          const daysDiff = Math.floor((currentDate.getTime() - reviewDate.getTime()) / (1000 * 60 * 60 * 24));
          if (daysDiff > criteria.maxDaysOld) {
            shouldProcess = false;
          }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
        if (criteria.minRating && review.rating < criteria.minRating) {
          shouldProcess = false;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
        if (criteria.orderStatus && review.order_status !== criteria.orderStatus) {
          shouldProcess = false;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
        if (criteria.hasSellerResponse !== undefined) {
          const hasResponse = review.comments_amount > 0;
          if (criteria.hasSellerResponse !== hasResponse) {
            shouldProcess = false;
          }
        }

        if (shouldProcess) {
          reviewsToProcess.push(review.id);
        } else {
          results.skipped++;
        }
      }

      // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç—Ñ–∏–ª—å—Ç–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã
      if (reviewsToProcess.length > 0) {
        const batchResult = await this.batchProcessReviews(reviewsToProcess, 'PROCESSED');
        results.processed = batchResult.successfullyProcessed;
        results.errors = batchResult.errors.map(e => `${e.reviewId}: ${e.error}`);
      }

    } catch (error) {
      results.errors.push(`Auto-processing error: ${error}`);
    }

    return results;
  }

  /**
   * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤
   * Generate review processing performance report
   */
  async generateProcessingReport(periodDays: number = 30): Promise<{
    period: string;
    stats: ReviewStatusStats;
    recommendations: string[];
    kpis: {
      responseRate: number;
      avgProcessingTime: string;
      customerSatisfactionTrend: 'improving' | 'stable' | 'declining';
    };
  }> {
    const stats = await this.getStatusStatistics();
    const startDate = new Date();
    startDate.setDate(startDate.getDate() - periodDays);
    
    const recommendations: string[] = [];
    
    // –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    if (stats.processed_percentage < 80) {
      recommendations.push('–£–≤–µ–ª–∏—á—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ - —Ç–µ–∫—É—â–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∏–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö 80%');
    }
    
    if (stats.unprocessed_reviews > 50) {
      recommendations.push('–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤');
    }
    
    if (stats.reviews_with_seller_response / stats.total_reviews < 0.6) {
      recommendations.push('–£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–ø—É—Ç–∞—Ü–∏–∏');
    }

    return {
      period: `${periodDays} –¥–Ω–µ–π`,
      stats,
      recommendations,
      kpis: {
        responseRate: (stats.reviews_with_seller_response / stats.total_reviews) * 100,
        avgProcessingTime: `${stats.avg_response_time_hours || 24} —á–∞—Å–æ–≤`,
        customerSatisfactionTrend: stats.processed_percentage > 85 ? 'improving' : 'stable'
      }
    };
  }
}
```

---

## üí° –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```typescript
const analytics = new ReviewAnalytics(reviewApi);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
const autoProcessPositiveReviews = async () => {
  const result = await analytics.autoProcessReviews({
    maxDaysOld: 7,           // –û—Ç–∑—ã–≤—ã —Å—Ç–∞—Ä—à–µ –Ω–µ–¥–µ–ª–∏
    minRating: 4,            // –†–µ–π—Ç–∏–Ω–≥ 4+ –∑–≤–µ–∑–¥—ã
    orderStatus: 'DELIVERED', // –¢–æ–ª—å–∫–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
    hasSellerResponse: false  // –ë–µ–∑ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
  });
  
  console.log(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≤—Ç–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏:`);
  console.log(`‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${result.processed}`);
  console.log(`‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${result.skipped}`);
  console.log(`‚ùå –û—à–∏–±–∫–∏: ${result.errors.length}`);
};

// –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
const generateDailyReport = async () => {
  const report = await analytics.generateProcessingReport(7); // –ó–∞ –Ω–µ–¥–µ–ª—é
  
  console.log(`üìà –û—Ç—á–µ—Ç –∑–∞ ${report.period}:`);
  console.log(`‚Ä¢ –û–±—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏: ${report.stats.processed_percentage.toFixed(1)}%`);
  console.log(`‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞: ${report.kpis.responseRate.toFixed(1)}%`);
  console.log(`‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: ${report.kpis.avgProcessingTime}`);
  
  if (report.recommendations.length > 0) {
    console.log(`üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:`);
    report.recommendations.forEach(rec => console.log(`  - ${rec}`));
  }
};
```

### Workflow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```typescript
// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —Å–∏—Å—Ç–µ–º–æ–π
const syncWithCRM = async (crmApi: any) => {
  const stats = await analytics.getStatusStatistics();
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ CRM
  await crmApi.updateMetrics('review_processing', {
    processed_percentage: stats.processed_percentage,
    pending_reviews: stats.unprocessed_reviews,
    response_rate: (stats.reviews_with_seller_response / stats.total_reviews) * 100
  });
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  if (stats.processed_percentage < 70) {
    await crmApi.createTask({
      type: 'review_management',
      priority: 'high',
      description: `–ù–∏–∑–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤: ${stats.processed_percentage.toFixed(1)}%`,
      assignee: 'customer_success_manager'
    });
  }
};

// –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
const scheduleAutoProcessing = () => {
  // –ö–∞–∂–¥—ã–π —á–∞—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã —Å—Ç–∞—Ä—à–µ 6 —á–∞—Å–æ–≤
  setInterval(async () => {
    await analytics.autoProcessReviews({
      maxDaysOld: 0.25, // 6 —á–∞—Å–æ–≤
      minRating: 4,
      hasSellerResponse: false
    });
  }, 60 * 60 * 1000); // –ö–∞–∂–¥—ã–π —á–∞—Å

  // –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ –æ—Ç–∑—ã–≤—ã —Å—Ç–∞—Ä—à–µ 3 –¥–Ω–µ–π
  setInterval(async () => {
    await analytics.autoProcessReviews({
      maxDaysOld: 3,
      orderStatus: 'DELIVERED'
    });
  }, 24 * 60 * 60 * 1000); // –ö–∞–∂–¥—ã–π –¥–µ–Ω—å
};
```

---

## üìä KPI –∏ –º–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```typescript
interface ReviewProcessingKPIs {
  // –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
  responseTimeHours: number;        // –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Ç–∑—ã–≤
  processingRate: number;           // –ü—Ä–æ—Ü–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
  dailyProcessedCount: number;      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ –≤ –¥–µ–Ω—å
  
  // –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
  customerSatisfactionScore: number; // –û—Ü–µ–Ω–∫–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
  responseQualityScore: number;     // –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ (–æ—Ü–µ–Ω–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
  repeatCustomerRate: number;       // –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
  
  // –†–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  ratingImprovement: number;        // –£–ª—É—á—à–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
  negativeReviewResolutionRate: number; // –ü—Ä–æ—Ü–µ–Ω—Ç —Ä–µ—à–µ–Ω–Ω—ã—Ö –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
  publicResponseVisibility: number; // –í–∏–¥–∏–º–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
}
```

### –ë–∏–∑–Ω–µ—Å-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```typescript
interface ReviewBusinessImpact {
  // –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
  conversionRateImprovement: number; // –£–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–æ–≤
  averageOrderValueChange: number;   // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —á–µ–∫–∞
  organicTrafficGrowth: number;      // –†–æ—Å—Ç –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
  
  // –†–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  brandTrustScore: number;           // –ò–Ω–¥–µ–∫—Å –¥–æ–≤–µ—Ä–∏—è –∫ –±—Ä–µ–Ω–¥—É
  competitorAdvantage: number;       // –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –Ω–∞–¥ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏
  customerRetentionRate: number;     // –£–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
}
```

---

## ‚ö†Ô∏è –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **Batch Size**: –ú–∞–∫—Å–∏–º—É–º 100 –æ—Ç–∑—ã–≤–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- **Rate Limiting**: –ù–µ –±–æ–ª–µ–µ 60 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **Timeout**: 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **Retry Policy**: –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff

### –ë–∏–∑–Ω–µ—Å-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **Premium Plus**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é OZON
- **–ü—É–±–ª–∏—á–Ω–æ—Å—Ç—å**: –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ, –Ω–µ –≤–∏–¥–Ω—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º
- **–ò—Å—Ç–æ—Ä–∏—è**: –ù–µ—Ç API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

---

## üîÆ –ë—É–¥—É—â–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ –ø–æ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **Predictive Analytics**: –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
- **Advanced Automation**: –£–º–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **Integration Hub**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ CRM –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **Sentiment Analysis**: –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ API
- **Auto-Response**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –æ—Ç–∑—ã–≤—ã
- **Performance Predictions**: –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
- **Competitive Intelligence**: –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

---

## üìà –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Review Analytics API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ OZON. –ö–æ–º–±–∏–Ω–∏—Ä—É—è –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏, –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é, –ø—Ä–æ–¥–∞–≤—Ü—ã –º–æ–≥—É—Ç:

- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å workflow**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∑—ã–≤–æ–≤
- **–ü–æ–≤—ã—à–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ**: –°–∏—Å—Ç–µ–º–Ω–æ —É–ª—É—á—à–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏  
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –æ—Ç–∑—ã–≤–æ–≤
- **–ò–∑–º–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å KPI –∏ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å-–ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ API –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ Review API –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è–µ—Ç –Ω–∞ —É—Å–ø–µ—Ö –ø—Ä–æ–¥–∞–∂ –∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ OZON.