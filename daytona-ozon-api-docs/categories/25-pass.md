# 25. API –ü—Ä–æ–ø—É—Å–∫–∏

**API –ü—Ä–æ–ø—É—Å–∫–∏** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞–º–∏ –ø—Ä–∏–±—ã—Ç–∏—è –∏ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–∫–ª–∞–¥—É –¥–ª—è OZON Seller API.

## –û–±–∑–æ—Ä

API –ü—Ä–æ–ø—É—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫–ª–∞–¥–∞–º —á–µ—Ä–µ–∑ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏ –ø—Ä–∏–±—ã—Ç–∏—è. –≠—Ç–æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π –∫–∞–∫ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫, —Ç–∞–∫ –∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤. –í–∫–ª—é—á–∞–µ—Ç 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏, –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –¥–æ—Å—Ç—É–ø–∞.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ü—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–æ–∫**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫
- **–ü—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤
- **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∫–ª–∞–¥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ä–µ–∑–¥–æ–º
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—Ç–æ–≤
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –¢–∏–ø—ã –ø—Ä–æ–ø—É—Å–∫–æ–≤
- **Carriage Pass**: –ü—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥
- **Return Pass**: –ü—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å–∫–ª–∞–¥–∞
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏**: –° —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è
- **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏**: –î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

---

## üìä –ú–µ—Ç–æ–¥—ã API

### üöö –ü—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–æ–∫

#### 1. **createCarriagePass** - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏
–°–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–æ–±–∞–≤–∏—Ç—Å—è –∫ –ø–µ—Ä–µ–≤–æ–∑–∫–µ.

```typescript
async createCarriagePass(
  request: PassCreateCarriagePassRequest,
  options?: RequestOptions
): Promise<PassCreateCarriagePassResponse>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassCreateCarriagePassRequest {
  carriage_id: number;                      // ID –ø–µ—Ä–µ–≤–æ–∑–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  arrival_passes: Array<{
    vehicle_number: string;                 // –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞
    driver_name: string;                    // –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
    driver_license: string;                 // –ù–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
    arrival_date: string;                   // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è (ISO 8601)
    comment?: string;                       // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø—Ä–æ–ø—É—Å–∫—É
  }>;
}
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PassCreateCarriagePassResponse {
  arrival_pass_ids?: string[];              // –ú–∞—Å—Å–∏–≤ ID —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤
}
```

#### 2. **updateCarriagePass** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏
–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∞—Ö –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏.

```typescript
async updateCarriagePass(
  request: PassUpdateCarriagePassRequest,
  options?: RequestOptions
): Promise<void>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassUpdateCarriagePassRequest {
  carriage_id: number;                      // ID –ø–µ—Ä–µ–≤–æ–∑–∫–∏
  arrival_passes: Array<{
    arrival_pass_id: string;                // ID –æ–±–Ω–æ–≤–ª—è–µ–º–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    vehicle_number?: string;                // –ù–æ–≤—ã–π –Ω–æ–º–µ—Ä –¢–°
    driver_name?: string;                   // –ù–æ–≤–æ–µ –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
    driver_license?: string;                // –ù–æ–≤—ã–π –Ω–æ–º–µ—Ä —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
    arrival_date?: string;                  // –ù–æ–≤—ã–µ –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è
    comment?: string;                       // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  }>;
}
```

#### 3. **deleteCarriagePass** - –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏
–£–¥–∞–ª—è–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏.

```typescript
async deleteCarriagePass(
  request: PassDeleteCarriagePassRequest,
  options?: RequestOptions
): Promise<void>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassDeleteCarriagePassRequest {
  carriage_id: number;                      // ID –ø–µ—Ä–µ–≤–æ–∑–∫–∏
  arrival_pass_ids: string[];               // –ú–∞—Å—Å–∏–≤ ID –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
}
```

### üìã –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

#### 4. **getPassList** - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.

```typescript
async getPassList(
  request: PassListRequest,
  options?: RequestOptions
): Promise<PassListResponse>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassListRequest {
  limit?: number;                           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
  cursor?: string;                          // –ö—É—Ä—Å–æ—Ä –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  filter?: {
    carriage_id?: number;                   // –§–∏–ª—å—Ç—Ä –ø–æ ID –ø–µ—Ä–µ–≤–æ–∑–∫–∏
    status?: PassStatus;                    // –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ–ø—É—Å–∫–∞
    date_from?: string;                     // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞
    date_to?: string;                       // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
    arrival_reason?: ArrivalReason;         // –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–∏–±—ã—Ç–∏—è
    only_active_passes?: boolean;           // –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏
    warehouse_ids?: string[];               // –§–∏–ª—å—Ç—Ä –ø–æ —Å–∫–ª–∞–¥–∞–º
  };
}

type PassStatus = 'ACTIVE' | 'EXPIRED' | 'CANCELLED' | 'USED';
type ArrivalReason = 'FBS_DELIVERY' | 'FBO_DELIVERY' | 'RETURN' | 'OTHER';
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PassListResponse {
  arrival_passes?: Array<{
    arrival_pass_id: string;                // ID –ø—Ä–æ–ø—É—Å–∫–∞
    carriage_id?: number;                   // ID –ø–µ—Ä–µ–≤–æ–∑–∫–∏
    vehicle_number: string;                 // –ù–æ–º–µ—Ä –¢–°
    driver_name: string;                    // –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
    driver_license: string;                 // –ù–æ–º–µ—Ä —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
    arrival_date: string;                   // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è
    status: PassStatus;                     // –°—Ç–∞—Ç—É—Å –ø—Ä–æ–ø—É—Å–∫–∞
    arrival_reason?: ArrivalReason;         // –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–∏–±—ã—Ç–∏—è
    warehouse_id?: string;                  // ID —Å–∫–ª–∞–¥–∞
    comment?: string;                       // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
    created_at?: string;                    // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
    updated_at?: string;                    // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  }>;
  cursor?: string;                          // –ö—É—Ä—Å–æ—Ä –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  total_count?: number;                     // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤
}
```

### üîÑ –ü—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

#### 5. **createReturnPass** - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
–°–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å–∫–ª–∞–¥–∞.

```typescript
async createReturnPass(
  request: PassCreateReturnPassRequest,
  options?: RequestOptions
): Promise<PassCreateReturnPassResponse>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassCreateReturnPassRequest {
  arrival_passes: Array<{
    vehicle_number: string;                 // –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞
    driver_name: string;                    // –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
    driver_license: string;                 // –ù–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
    arrival_date: string;                   // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è
    posting_number: string;                 // –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
    comment?: string;                       // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø—Ä–æ–ø—É—Å–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞
  }>;
}
```

#### 6. **updateReturnPass** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–ø—É—Å–∫–∞—Ö –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞.

```typescript
async updateReturnPass(
  request: PassUpdateReturnPassRequest,
  options?: RequestOptions
): Promise<void>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassUpdateReturnPassRequest {
  arrival_passes: Array<{
    arrival_pass_id: string;                // ID –æ–±–Ω–æ–≤–ª—è–µ–º–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞
    vehicle_number?: string;                // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –¢–°
    driver_name?: string;                   // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
    driver_license?: string;                // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
    arrival_date?: string;                  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è
    posting_number?: string;                // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    comment?: string;                       // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  }>;
}
```

#### 7. **deleteReturnPass** - –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
–£–¥–∞–ª—è–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞.

```typescript
async deleteReturnPass(
  request: PassDeleteReturnPassRequest,
  options?: RequestOptions
): Promise<void>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PassDeleteReturnPassRequest {
  arrival_pass_ids: string[];               // –ú–∞—Å—Å–∏–≤ ID –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
}
```

---

## üöÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏

```typescript
import { OzonSellerAPI } from 'daytona-ozon-seller-api';

const api = new OzonSellerAPI({
  clientId: '–≤–∞—à-client-id',
  apiKey: '–≤–∞—à-api-key'
});

// –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏
async function completePassManagement() {
  console.log('üöö –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏...');

  // 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏
  console.log('üìù –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è –ø–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤...');
  
  const carriagePass = await api.pass.createCarriagePass({
    carriage_id: 12345,
    arrival_passes: [{
      vehicle_number: '–ê123–ë–í777',
      driver_name: '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á',
      driver_license: '12 34 567890',
      arrival_date: '2024-01-15T09:00:00Z',
      comment: '–ü–ª–∞–Ω–æ–≤–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏'
    }, {
      vehicle_number: '–ë456–ì–î888',
      driver_name: '–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á',
      driver_license: '98 76 543210',
      arrival_date: '2024-01-15T14:00:00Z',
      comment: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ –æ–¥–µ–∂–¥—ã'
    }]
  });

  console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤: ${carriagePass.arrival_pass_ids?.length}`);
  carriagePass.arrival_pass_ids?.forEach((id, index) => {
    console.log(`   üé´ –ü—Ä–æ–ø—É—Å–∫ ${index + 1}: ${id}`);
  });

  // 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
  console.log('üîÑ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤...');
  
  const returnPass = await api.pass.createReturnPass({
    arrival_passes: [{
      vehicle_number: '–°789–ñ–ó111',
      driver_name: '–°–∏–¥–æ—Ä–æ–≤ –°–∏–¥–æ—Ä –°–∏–¥–æ—Ä–æ–≤–∏—á',
      driver_license: '55 66 778899',
      arrival_date: '2024-01-16T11:00:00Z',
      posting_number: '12345-0001-1',
      comment: '–í–æ–∑–≤—Ä–∞—Ç –±—Ä–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤'
    }]
  });

  console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞: ${returnPass.arrival_pass_ids?.length}`);

  // 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤
  console.log('üìã –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤...');
  
  const passList = await api.pass.getPassList({
    limit: 100,
    filter: {
      carriage_id: 12345,
      status: 'ACTIVE',
      date_from: '2024-01-15T00:00:00Z',
      date_to: '2024-01-16T23:59:59Z'
    }
  });

  console.log(`üìä –ù–∞–π–¥–µ–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤: ${passList.arrival_passes?.length}`);

  // –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤
  if (passList.arrival_passes && passList.arrival_passes.length > 0) {
    console.log('\nüìà –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤:');
    
    passList.arrival_passes.forEach((pass, index) => {
      console.log(`\nüé´ –ü—Ä–æ–ø—É—Å–∫ ${index + 1}:`);
      console.log(`   ID: ${pass.arrival_pass_id}`);
      console.log(`   üöõ –ê–≤—Ç–æ–º–æ–±–∏–ª—å: ${pass.vehicle_number}`);
      console.log(`   üë§ –í–æ–¥–∏—Ç–µ–ª—å: ${pass.driver_name}`);
      console.log(`   üìÑ –£–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ: ${pass.driver_license}`);
      console.log(`   üìÖ –ü—Ä–∏–±—ã—Ç–∏–µ: ${new Date(pass.arrival_date).toLocaleString('ru-RU')}`);
      console.log(`   ‚≠ê –°—Ç–∞—Ç—É—Å: ${pass.status}`);
      if (pass.comment) {
        console.log(`   üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${pass.comment}`);
      }
    });
  }

  // 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
  if (carriagePass.arrival_pass_ids && carriagePass.arrival_pass_ids.length > 0) {
    const firstPassId = carriagePass.arrival_pass_ids[0];
    
    console.log('\nüîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è...');
    await api.pass.updateCarriagePass({
      carriage_id: 12345,
      arrival_passes: [{
        arrival_pass_id: firstPassId,
        arrival_date: '2024-01-15T10:30:00Z', // –ò–∑–º–µ–Ω–∏–ª–∏ –≤—Ä–µ–º—è –Ω–∞ 10:30
        comment: '–í—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–æ –ø–æ –ø—Ä–æ—Å—å–±–µ –≤–æ–¥–∏—Ç–µ–ª—è'
      }]
    });
    
    console.log(`‚úÖ –ü—Ä–æ–ø—É—Å–∫ ${firstPassId} —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω`);
  }

  return {
    carriagePassIds: carriagePass.arrival_pass_ids,
    returnPassIds: returnPass.arrival_pass_ids,
    totalActivePasses: passList.arrival_passes?.length || 0
  };
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```typescript
// –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤
class PassMonitoring {
  constructor(private api: OzonSellerAPI) {}

  async monitorDailyPasses(): Promise<PassAnalytics> {
    const today = new Date();
    const todayStart = new Date(today.setHours(0, 0, 0, 0)).toISOString();
    const todayEnd = new Date(today.setHours(23, 59, 59, 999)).toISOString();

    console.log(`üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞ ${today.toLocaleDateString('ru-RU')}`);

    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø—Ä–æ–ø—É—Å–∫–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
    const allPasses = await this.getAllPassesForPeriod(todayStart, todayEnd);
    
    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
    const analytics = this.analyzePassData(allPasses);
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
    const alerts = this.generateAlerts(analytics);
    
    // –í—ã–≤–æ–¥–∏–º –æ—Ç—á—ë—Ç
    this.printDailyReport(analytics, alerts);
    
    return analytics;
  }

  private async getAllPassesForPeriod(dateFrom: string, dateTo: string) {
    const allPasses = [];
    let cursor: string | undefined;

    do {
      const response = await this.api.pass.getPassList({
        limit: 1000,
        cursor,
        filter: {
          date_from: dateFrom,
          date_to: dateTo
        }
      });

      if (response.arrival_passes) {
        allPasses.push(...response.arrival_passes);
      }

      cursor = response.cursor;
    } while (cursor);

    return allPasses;
  }

  private analyzePassData(passes: any[]): PassAnalytics {
    const statusCount = this.countByStatus(passes);
    const timeSlots = this.analyzeTimeSlots(passes);
    const carriageStats = this.analyzeCarriages(passes);

    return {
      totalPasses: passes.length,
      statusBreakdown: statusCount,
      timeSlotAnalysis: timeSlots,
      carriageAnalysis: carriageStats,
      peakHours: this.identifyPeakHours(timeSlots)
    };
  }

  private countByStatus(passes: any[]): Record<string, number> {
    return passes.reduce((acc, pass) => {
      const status = pass.status || 'UNKNOWN';
      acc[status] = (acc[status] || 0) + 1;
      return acc;
    }, {});
  }

  private analyzeTimeSlots(passes: any[]) {
    const hourSlots = new Array(24).fill(0);
    
    passes.forEach(pass => {
      if (pass.arrival_date) {
        const hour = new Date(pass.arrival_date).getHours();
        hourSlots[hour]++;
      }
    });

    return hourSlots.map((count, hour) => ({
      hour,
      count,
      timeSlot: `${hour}:00-${hour + 1}:00`
    }));
  }

  private analyzeCarriages(passes: any[]) {
    const carriages = passes.reduce((acc, pass) => {
      if (pass.carriage_id) {
        const carriageId = pass.carriage_id.toString();
        if (!acc[carriageId]) {
          acc[carriageId] = {
            id: carriageId,
            passCount: 0,
            drivers: new Set(),
            vehicles: new Set()
          };
        }
        acc[carriageId].passCount++;
        if (pass.driver_name) acc[carriageId].drivers.add(pass.driver_name);
        if (pass.vehicle_number) acc[carriageId].vehicles.add(pass.vehicle_number);
      }
      return acc;
    }, {});

    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º Set –≤ –º–∞—Å—Å–∏–≤—ã –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    Object.values(carriages).forEach((carriage: any) => {
      carriage.drivers = Array.from(carriage.drivers);
      carriage.vehicles = Array.from(carriage.vehicles);
    });

    return Object.values(carriages);
  }

  private identifyPeakHours(timeSlots: any[]): string[] {
    const maxCount = Math.max(...timeSlots.map(slot => slot.count));
    return timeSlots
      .filter(slot => slot.count === maxCount && slot.count > 0)
      .map(slot => slot.timeSlot);
  }

  private generateAlerts(analytics: PassAnalytics): PassAlert[] {
    const alerts: PassAlert[] = [];

    // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
    if (analytics.totalPasses > 100) {
      alerts.push({
        type: 'HIGH_VOLUME',
        severity: 'MEDIUM',
        message: `–í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: ${analytics.totalPasses} –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞ –¥–µ–Ω—å`,
        action: '–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤'
      });
    }

    // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –∏—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∞—Ö
    const expiredCount = analytics.statusBreakdown['EXPIRED'] || 0;
    if (expiredCount > analytics.totalPasses * 0.1) {
      alerts.push({
        type: 'HIGH_EXPIRED_RATE',
        severity: 'HIGH',
        message: `–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤: ${expiredCount} (${((expiredCount / analytics.totalPasses) * 100).toFixed(1)}%)`,
        action: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–æ–≤'
      });
    }

    // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø–∏–∫–æ–≤—ã—Ö —á–∞—Å–∞—Ö
    if (analytics.peakHours.length > 0) {
      const maxLoad = Math.max(...analytics.timeSlotAnalysis.map(slot => slot.count));
      if (maxLoad > 10) {
        alerts.push({
          type: 'PEAK_HOURS_OVERLOAD',
          severity: 'MEDIUM',
          message: `–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –≤ –ø–∏–∫–æ–≤—ã–µ —á–∞—Å—ã: ${analytics.peakHours.join(', ')} (${maxLoad} –ø—Ä–æ–ø—É—Å–∫–æ–≤/—á–∞—Å)`,
          action: '–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏'
        });
      }
    }

    return alerts;
  }

  private printDailyReport(analytics: PassAnalytics, alerts: PassAlert[]) {
    console.log('\nüìä –ï–ñ–ï–î–ù–ï–í–ù–´–ô –û–¢–ß–Å–¢ –ü–û –ü–†–û–ü–£–°–ö–ê–ú');
    console.log('=====================================');
    
    console.log(`üìà –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤: ${analytics.totalPasses}`);
    
    console.log('\nüìã –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º:');
    Object.entries(analytics.statusBreakdown).forEach(([status, count]) => {
      const percentage = ((count / analytics.totalPasses) * 100).toFixed(1);
      console.log(`   ${status}: ${count} (${percentage}%)`);
    });

    console.log('\n‚è∞ –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã:');
    if (analytics.peakHours.length > 0) {
      analytics.peakHours.forEach(hour => {
        console.log(`   üî• ${hour}`);
      });
    } else {
      console.log('   –ü–∏–∫–æ–≤—ã—Ö —á–∞—Å–æ–≤ –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ');
    }

    console.log('\nüöõ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–µ–≤–æ–∑–∫–∞–º:');
    analytics.carriageAnalysis.forEach((carriage: any) => {
      console.log(`   –ü–µ—Ä–µ–≤–æ–∑–∫–∞ ${carriage.id}:`);
      console.log(`     –ü—Ä–æ–ø—É—Å–∫–æ–≤: ${carriage.passCount}`);
      console.log(`     –í–æ–¥–∏—Ç–µ–ª–µ–π: ${carriage.drivers.length}`);
      console.log(`     –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞: ${carriage.vehicles.length}`);
    });

    if (alerts.length > 0) {
      console.log('\n‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø:');
      alerts.forEach(alert => {
        const severityIcon = {
          'LOW': 'üí°',
          'MEDIUM': '‚ö†Ô∏è',
          'HIGH': 'üö®',
          'CRITICAL': 'üî•'
        }[alert.severity];
        
        console.log(`   ${severityIcon} ${alert.type}: ${alert.message}`);
        console.log(`     –î–µ–π—Å—Ç–≤–∏–µ: ${alert.action}`);
      });
    } else {
      console.log('\n‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –Ω–µ—Ç - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ');
    }
  }
}

interface PassAnalytics {
  totalPasses: number;
  statusBreakdown: Record<string, number>;
  timeSlotAnalysis: Array<{
    hour: number;
    count: number;
    timeSlot: string;
  }>;
  carriageAnalysis: Array<{
    id: string;
    passCount: number;
    drivers: string[];
    vehicles: string[];
  }>;
  peakHours: string[];
}

interface PassAlert {
  type: string;
  severity: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';
  message: string;
  action: string;
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏
class AutomatedPassManager {
  constructor(private api: OzonSellerAPI) {}

  async autoCreatePassesForScheduledDeliveries(): Promise<void> {
    console.log('ü§ñ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–æ–≤...');
    
    // –ü–æ–ª—É—á–∞–µ–º –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    
    const scheduledDeliveries = await this.getScheduledDeliveries(tomorrow);
    
    for (const delivery of scheduledDeliveries) {
      try {
        await this.createPassForDelivery(delivery);
        console.log(`‚úÖ –ü—Ä–æ–ø—É—Å–∫ —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ—Å—Ç–∞–≤–∫–∏ ${delivery.carriageId}`);
      } catch (error) {
        console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è –ø–æ—Å—Ç–∞–≤–∫–∏ ${delivery.carriageId}:`, error);
      }
    }
    
    console.log(`üéØ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ ${scheduledDeliveries.length} –ø–æ—Å—Ç–∞–≤–æ–∫`);
  }

  private async getScheduledDeliveries(date: Date): Promise<ScheduledDelivery[]> {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–∏—Å—Ç–µ–º–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    return [
      {
        carriageId: 12345,
        driverName: '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á',
        driverLicense: '12 34 567890',
        vehicleNumber: '–ê123–ë–í777',
        plannedArrival: new Date(date.setHours(9, 0, 0, 0)).toISOString(),
        deliveryType: 'electronics'
      },
      {
        carriageId: 12346,
        driverName: '–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á', 
        driverLicense: '98 76 543210',
        vehicleNumber: '–ë456–ì–î888',
        plannedArrival: new Date(date.setHours(14, 0, 0, 0)).toISOString(),
        deliveryType: 'clothing'
      }
    ];
  }

  private async createPassForDelivery(delivery: ScheduledDelivery): Promise<void> {
    await this.api.pass.createCarriagePass({
      carriage_id: delivery.carriageId,
      arrival_passes: [{
        vehicle_number: delivery.vehicleNumber,
        driver_name: delivery.driverName,
        driver_license: delivery.driverLicense,
        arrival_date: delivery.plannedArrival,
        comment: `–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–ø—É—Å–∫ –¥–ª—è –ø–æ—Å—Ç–∞–≤–∫–∏ ${delivery.deliveryType}`
      }]
    });
  }

  async cleanupExpiredPasses(): Promise<void> {
    console.log('üßπ –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤...');
    
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    
    const expiredPasses = await this.api.pass.getPassList({
      limit: 1000,
      filter: {
        status: 'EXPIRED',
        date_to: yesterday.toISOString()
      }
    });

    if (expiredPasses.arrival_passes && expiredPasses.arrival_passes.length > 0) {
      // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ carriage_id –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
      const passesToDelete = this.groupPassesByCarriage(expiredPasses.arrival_passes);
      
      for (const [carriageId, passIds] of passesToDelete.entries()) {
        try {
          await this.api.pass.deleteCarriagePass({
            carriage_id: parseInt(carriageId),
            arrival_pass_ids: passIds
          });
          console.log(`üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ ${passIds.length} –∏—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ ${carriageId}`);
        } catch (error) {
          console.error(`‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ ${carriageId}:`, error);
        }
      }
    } else {
      console.log('‚ú® –ò—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
    }
  }

  private groupPassesByCarriage(passes: any[]): Map<string, string[]> {
    const grouped = new Map<string, string[]>();
    
    passes.forEach(pass => {
      if (pass.carriage_id && pass.arrival_pass_id) {
        const carriageId = pass.carriage_id.toString();
        
        if (!grouped.has(carriageId)) {
          grouped.set(carriageId, []);
        }
        
        grouped.get(carriageId)!.push(pass.arrival_pass_id);
      }
    });
    
    return grouped;
  }
}

interface ScheduledDelivery {
  carriageId: number;
  driverName: string;
  driverLicense: string;
  vehicleNumber: string;
  plannedArrival: string;
  deliveryType: string;
}
```

---

## üîÑ –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞
```mermaid
graph TD
    A[–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤–∫–∏] --> B[–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤–æ–¥–∏—Ç–µ–ª—è]
    B --> C[–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ]
    C --> D[–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö]
    D --> E{–î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã?}
    E -->|–î–∞| F[–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞]
    E -->|–ù–µ—Ç| G[–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö]
    G --> D
    F --> H[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è –∏ —Å–∫–ª–∞–¥–∞]
    H --> I[–ü—Ä–∏–±—ã—Ç–∏–µ –Ω–∞ —Å–∫–ª–∞–¥]
    I --> J[–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞]
    J --> K[–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ]
```

### –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
1. **–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫
2. **CRM —Å–∏—Å—Ç–µ–º–∞** ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
3. **–°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∫–ª–∞–¥–∞** ‚Üí –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø—Ä–∏ –≤—ä–µ–∑–¥–µ
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Üí SMS/email –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤
5. **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã** ‚Üí –û—Ç—á—ë—Ç—ã –æ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫–ª–∞–¥–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–ø—É—Å–∫–æ–≤
```typescript
type PassStatus = 
  | 'ACTIVE'         // –ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–ø—É—Å–∫, –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
  | 'EXPIRED'        // –ò—Å—Ç—ë–∫—à–∏–π –ø—Ä–æ–ø—É—Å–∫, —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  | 'CANCELLED'      // –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ–ø—É—Å–∫
  | 'USED';          // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–ø—É—Å–∫
```

### –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–∏–±—ã—Ç–∏—è
```typescript
type ArrivalReason = 
  | 'FBS_DELIVERY'   // –ü–æ—Å—Ç–∞–≤–∫–∞ –ø–æ —Å—Ö–µ–º–µ FBS
  | 'FBO_DELIVERY'   // –ü–æ—Å—Ç–∞–≤–∫–∞ –ø–æ —Å—Ö–µ–º–µ FBO
  | 'RETURN'         // –í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–æ–≤
  | 'OTHER';         // –ü—Ä–æ—á–∏–µ –ø—Ä–∏—á–∏–Ω—ã
```

### –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–ø—É—Å–∫–∞
```typescript
interface ArrivalPass {
  arrival_pass_id: string;                  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–æ–ø—É—Å–∫–∞
  carriage_id?: number;                     // ID –ø–µ—Ä–µ–≤–æ–∑–∫–∏ (–¥–ª—è –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏)
  vehicle_number: string;                   // –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞
  driver_name: string;                      // –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
  driver_license: string;                   // –ù–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
  arrival_date: string;                     // –ü–ª–∞–Ω–æ–≤—ã–µ –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è
  status: PassStatus;                       // –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–ø—É—Å–∫–∞
  arrival_reason?: ArrivalReason;           // –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–∏–±—ã—Ç–∏—è
  warehouse_id?: string;                    // ID —Ü–µ–ª–µ–≤–æ–≥–æ —Å–∫–ª–∞–¥–∞
  posting_number?: string;                  // –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤)
  comment?: string;                         // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø—Ä–æ–ø—É—Å–∫—É
  
  // –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  created_at?: string;                      // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞
  updated_at?: string;                      // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  created_by?: string;                      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Å–æ–∑–¥–∞–≤—à–∏–π –ø—Ä–æ–ø—É—Å–∫
  used_at?: string;                         // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  driver_phone?: string;                    // –¢–µ–ª–µ—Ñ–æ–Ω –≤–æ–¥–∏—Ç–µ–ª—è
  vehicle_model?: string;                   // –ú–æ–¥–µ–ª—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞
  cargo_description?: string;               // –û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–∑–∞
}
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
- **–í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–ø—É—Å–∫–∞**: –ü—Ä–æ–ø—É—Å–∫ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
- **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª—è**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
- **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –¢–°**: –û–¥–∏–Ω –Ω–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–ª–∞–¥–∞**: –ö–∞–∂–¥—ã–π –ø—Ä–æ–ø—É—Å–∫ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å–∫–ª–∞–¥—É

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤**: –î–æ 100 –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω–∏—è
- **–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è**: –ü—Ä–æ–ø—É—Å–∫ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–µ –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 2 —á–∞—Å–∞ –¥–æ –ø—Ä–∏–±—ã—Ç–∏—è
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**: –ü—Ä–æ–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –°–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫—É—Ä—Å–æ—Ä–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–æ–≤ –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤
- **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é**: –°–≤—è–∑–∫–∞ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ

---

**–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–í–µ—Ä—Å–∏—è API**: v1  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 7 –º–µ—Ç–æ–¥–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–º–∏