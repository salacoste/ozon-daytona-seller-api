# 22.3 API –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏

**API –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤, –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º –¥–ª—è OZON Seller API.

## –û–±–∑–æ—Ä

API –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö –ø–æ —Å—Ö–µ–º–∞–º FBS –∏ rFBS. –í–∫–ª—é—á–∞–µ—Ç –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤, –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑–µ—Ä–≤–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –î–æ 100 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å, –¥–æ 80 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ú—É–ª—å—Ç–∏-—Å–∫–ª–∞–¥—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∫–ª–∞–¥–∞—Ö
- **FBS/rFBS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ö–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–æ–º
- **–†–µ–∑–µ—Ä–≤—ã –∏ –æ—Å—Ç–∞—Ç–∫–∏**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö

---

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
1. **updateStocks** - –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
2. **getStocks** - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤
3. **getStocksByWarehouseFbs** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º FBS/rFBS

---

## üõ†Ô∏è –î–µ—Ç–∞–ª–∏ –º–µ—Ç–æ–¥–æ–≤

## 1. updateStocks

–ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksUpdateStocksRequest {
  stocks: Array<{
    offer_id?: string;            // ID —Ç–æ–≤–∞—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞ (–æ–¥–∏–Ω –∏–∑ offer_id/product_id –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
    product_id?: number;          // ID —Ç–æ–≤–∞—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ OZON
    stock: number;                // –ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
    warehouse_id: number;         // ID —Å–∫–ª–∞–¥–∞
  }>;
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksUpdateStocksResponse {
  result?: Array<{
    offer_id?: string;            // ID —Ç–æ–≤–∞—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
    product_id?: number;          // ID —Ç–æ–≤–∞—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
    updated: boolean;             // –£—Å–ø–µ—à–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏
    errors?: string[];            // –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
  }>;
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ë–∞–∑–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
```typescript
async function updateProductStocks() {
  const result = await api.pricesStocks.updateStocks({
    stocks: [{
      offer_id: '–¢–û–í–ê–†001',
      stock: 150,                 // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º 150 –µ–¥–∏–Ω–∏—Ü
      warehouse_id: 12345
    }, {
      offer_id: '–¢–û–í–ê–†002',
      stock: 0,                   // –û–±–Ω—É–ª—è–µ–º –æ—Å—Ç–∞—Ç–∫–∏
      warehouse_id: 12345
    }, {
      product_id: 987654,
      stock: 75,                  // 75 –µ–¥–∏–Ω–∏—Ü –ø–æ product_id
      warehouse_id: 67890
    }]
  });
  
  console.log('üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤:');
  
  let successCount = 0;
  let errorCount = 0;
  
  result.result?.forEach(product => {
    if (product.updated) {
      successCount++;
      console.log(`‚úÖ ${product.offer_id || product.product_id}: –æ—Å—Ç–∞—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã`);
    } else {
      errorCount++;
      console.log(`‚ùå ${product.offer_id || product.product_id}: –æ—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è`);
      product.errors?.forEach(error => console.log(`   - ${error}`));
    }
  });
  
  console.log(`üìä –ò—Ç–æ–≥–æ: ${successCount} —É—Å–ø–µ—à–Ω–æ, ${errorCount} –æ—à–∏–±–æ–∫`);
  
  return result;
}
```

#### –ú–∞—Å—Å–æ–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
```typescript
async function bulkStockReplenishment() {
  const productArrivals = [
    { offer_id: '–≠–õ–ï–ö–¢–†–û–ù–ò–ö–ê001', currentStock: 25, arrival: 100 },
    { offer_id: '–≠–õ–ï–ö–¢–†–û–ù–ò–ö–ê002', currentStock: 10, arrival: 50 },
    { offer_id: '–û–î–ï–ñ–î–ê001', currentStock: 5, arrival: 200 },
    { offer_id: '–î–û–ú001', currentStock: 0, arrival: 75 }
  ];
  
  const warehouseId = 12345;
  
  console.log('üì¶ –ú–∞—Å—Å–æ–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤:');
  
  const result = await api.pricesStocks.updateStocks({
    stocks: productArrivals.map(product => ({
      offer_id: product.offer_id,
      stock: product.currentStock + product.arrival,
      warehouse_id: warehouseId
    }))
  });
  
  console.log('üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:');
  
  result.result?.forEach((product, index) => {
    const original = productArrivals[index];
    
    if (product.updated) {
      console.log(`‚úÖ ${product.offer_id}:`);
      console.log(`   –ë—ã–ª–æ: ${original.currentStock} –µ–¥–∏–Ω–∏—Ü`);
      console.log(`   –ü–æ—Å—Ç—É–ø–∏–ª–æ: +${original.arrival} –µ–¥–∏–Ω–∏—Ü`);
      console.log(`   –°—Ç–∞–ª–æ: ${original.currentStock + original.arrival} –µ–¥–∏–Ω–∏—Ü`);
    } else {
      console.log(`‚ùå ${product.offer_id}: –æ—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è`);
      product.errors?.forEach(error => console.log(`   - ${error}`));
    }
  });
  
  const totalArrival = productArrivals.reduce((sum, product) => sum + product.arrival, 0);
  console.log(`üìä –û–±—â–µ–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ: ${totalArrival} –µ–¥–∏–Ω–∏—Ü —Ç–æ–≤–∞—Ä–∞`);
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∫–ª–∞–¥–∞—Ö
```typescript
async function updateStocksAcrossWarehouses() {
  const products = ['–¢–û–í–ê–†001', '–¢–û–í–ê–†002', '–¢–û–í–ê–†003'];
  const warehouses = [
    { id: 12345, name: '–ì–ª–∞–≤–Ω—ã–π —Å–∫–ª–∞–¥' },
    { id: 67890, name: '–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥' },
    { id: 11111, name: '–°–∫–ª–∞–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤' }
  ];
  
  // –û—Å—Ç–∞—Ç–∫–∏ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º
  const stockDistribution = {
    '–¢–û–í–ê–†001': { 12345: 100, 67890: 50, 11111: 10 },
    '–¢–û–í–ê–†002': { 12345: 200, 67890: 75, 11111: 5 },
    '–¢–û–í–ê–†003': { 12345: 150, 67890: 100, 11111: 0 }
  };
  
  console.log('üè≠ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∫–ª–∞–¥–∞—Ö:');
  
  let totalOperations = 0;
  let successfulOperations = 0;
  
  for (const product of products) {
    console.log(`\nüì¶ –¢–æ–≤–∞—Ä: ${product}`);
    
    const productStocks = Object.entries(stockDistribution[product]).map(([warehouseId, quantity]) => ({
      offer_id: product,
      stock: quantity,
      warehouse_id: parseInt(warehouseId)
    }));
    
    try {
      const result = await api.pricesStocks.updateStocks({
        stocks: productStocks
      });
      
      result.result?.forEach(productResult => {
        totalOperations++;
        
        if (productResult.updated) {
          successfulOperations++;
          
          // –ù–∞—Ö–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∫–ª–∞–¥–µ
          const stock = productStocks.find(s => s.offer_id === productResult.offer_id);
          const warehouse = warehouses.find(w => w.id === stock?.warehouse_id);
          
          console.log(`   ‚úÖ ${warehouse?.name}: ${stock?.stock} –µ–¥–∏–Ω–∏—Ü`);
        } else {
          console.log(`   ‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${productResult.errors?.join(', ')}`);
        }
      });
      
    } catch (error: any) {
      console.error(`   ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${product}: ${error.message}`);
      totalOperations += productStocks.length;
    }
    
    // –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–æ–≤–∞—Ä–∞–º–∏ –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
    if (products.indexOf(product) < products.length - 1) {
      await new Promise(resolve => setTimeout(resolve, 1000));
    }
  }
  
  console.log(`\nüìä –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:`);
  console.log(`   üìã –í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π: ${totalOperations}`);
  console.log(`   ‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö: ${successfulOperations}`);
  console.log(`   ‚ùå –û—à–∏–±–æ–∫: ${totalOperations - successfulOperations}`);
  console.log(`   üìà –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: ${Math.round(successfulOperations / totalOperations * 100)}%`);
}
```

---

## 2. getStocks

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Å—Ö–µ–º–∞–º FBS –∏ rFBS.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksGetStocksRequest {
  filter?: {
    offer_id?: string[];          // –§–∏–ª—å—Ç—Ä –ø–æ ID —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞
    product_id?: number[];        // –§–∏–ª—å—Ç—Ä –ø–æ ID —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
    visibility?: –í–∏–¥–∏–º–æ—Å—Ç—å–¢–æ–≤–∞—Ä–∞; // –§–∏–ª—å—Ç—Ä –ø–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤
  };
  last_id?: string;               // ID –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  limit?: number;                 // –õ–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π (–º–∞–∫—Å 1000)
}

type –í–∏–¥–∏–º–æ—Å—Ç—å–¢–æ–≤–∞—Ä–∞ = 'ALL' | 'VISIBLE' | 'INVISIBLE' | 'EMPTY_STOCK' | 'NOT_MODERATED' | 'MODERATED' | 'DISABLED' | 'STATE_FAILED';
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksGetStocksResponse {
  items?: Array<{
    offer_id: string;             // ID —Ç–æ–≤–∞—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
    product_id: number;           // ID —Ç–æ–≤–∞—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ OZON
    sku: string;                  // SKU —Ç–æ–≤–∞—Ä–∞
    stocks?: Array<{              // –û—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º
      present: number;            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –Ω–∞–ª–∏—á–∏–∏
      reserved: number;           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ
      warehouse_id: number;       // ID —Å–∫–ª–∞–¥–∞
      warehouse_name: string;     // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞
    }>;
  }>;
  last_id?: string;               // ID –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  has_next: boolean;              // –ï—Å—Ç—å –ª–∏ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
```typescript
async function –ø–æ–ª—É—á–∏—Ç—å–û—Å—Ç–∞—Ç–∫–∏–¢–æ–≤–∞—Ä–æ–≤() {
  const –æ—Å—Ç–∞—Ç–∫–∏ = await api.pricesStocks.getStocks({
    filter: {
      offer_id: ['–¢–û–í–ê–†001', '–¢–û–í–ê–†002', '–¢–û–í–ê–†003'],
      visibility: 'VISIBLE'
    },
    limit: 100
  });
  
  console.log('üì¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤:');
  
  if (!–æ—Å—Ç–∞—Ç–∫–∏.items || –æ—Å—Ç–∞—Ç–∫–∏.items.length === 0) {
    console.log('üîç –¢–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
    return;
  }
  
  let –æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ = 0;
  let –æ–±—â–∏–π–†–µ–∑–µ—Ä–≤ = 0;
  
  –æ—Å—Ç–∞—Ç–∫–∏.items.forEach(—Ç–æ–≤–∞—Ä => {
    console.log(`\nüìã –¢–æ–≤–∞—Ä: ${—Ç–æ–≤–∞—Ä.offer_id} (SKU: ${—Ç–æ–≤–∞—Ä.sku})`);
    console.log(`   ID: ${—Ç–æ–≤–∞—Ä.product_id}`);
    
    if (—Ç–æ–≤–∞—Ä.stocks && —Ç–æ–≤–∞—Ä.stocks.length > 0) {
      —Ç–æ–≤–∞—Ä.stocks.forEach(–æ—Å—Ç–∞—Ç–æ–∫ => {
        const –¥–æ—Å—Ç—É–ø–Ω–æ = –æ—Å—Ç–∞—Ç–æ–∫.present - –æ—Å—Ç–∞—Ç–æ–∫.reserved;
        
        console.log(`   üè≠ ${–æ—Å—Ç–∞—Ç–æ–∫.warehouse_name} (ID: ${–æ—Å—Ç–∞—Ç–æ–∫.warehouse_id}):`);
        console.log(`      üì¶ –í –Ω–∞–ª–∏—á–∏–∏: ${–æ—Å—Ç–∞—Ç–æ–∫.present} —à—Ç.`);
        console.log(`      üîí –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ: ${–æ—Å—Ç–∞—Ç–æ–∫.reserved} —à—Ç.`);
        console.log(`      ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ: ${–¥–æ—Å—Ç—É–ø–Ω–æ} —à—Ç.`);
        
        –æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ += –æ—Å—Ç–∞—Ç–æ–∫.present;
        –æ–±—â–∏–π–†–µ–∑–µ—Ä–≤ += –æ—Å—Ç–∞—Ç–æ–∫.reserved;
        
        // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
        if (–¥–æ—Å—Ç—É–ø–Ω–æ <= 5 && –¥–æ—Å—Ç—É–ø–Ω–æ > 0) {
          console.log(`      ‚ö†Ô∏è –ù–∏–∑–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏! –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ`);
        } else if (–¥–æ—Å—Ç—É–ø–Ω–æ === 0) {
          console.log(`      ‚ùå –¢–æ–≤–∞—Ä –∑–∞–∫–æ–Ω—á–∏–ª—Å—è! –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ`);
        }
      });
      
      // –ü–æ–¥—Å—á—ë—Ç –æ–±—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ —Ç–æ–≤–∞—Ä—É
      const –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏–¢–æ–≤–∞—Ä–∞ = —Ç–æ–≤–∞—Ä.stocks.reduce((—Å—É–º–º–∞, –æ—Å—Ç–∞—Ç–æ–∫) => —Å—É–º–º–∞ + –æ—Å—Ç–∞—Ç–æ–∫.present, 0);
      const –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã–¢–æ–≤–∞—Ä–∞ = —Ç–æ–≤–∞—Ä.stocks.reduce((—Å—É–º–º–∞, –æ—Å—Ç–∞—Ç–æ–∫) => —Å—É–º–º–∞ + –æ—Å—Ç–∞—Ç–æ–∫.reserved, 0);
      const –¥–æ—Å—Ç—É–ø–Ω–æ–í—Å–µ–≥–æ = –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏–¢–æ–≤–∞—Ä–∞ - –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã–¢–æ–≤–∞—Ä–∞;
      
      console.log(`   üìä –û–±—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–∞:`);
      console.log(`      –í—Å–µ–≥–æ: ${–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏–¢–æ–≤–∞—Ä–∞} —à—Ç.`);
      console.log(`      –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ: ${–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã–¢–æ–≤–∞—Ä–∞} —à—Ç.`);
      console.log(`      –î–æ—Å—Ç—É–ø–Ω–æ –∫ –ø—Ä–æ–¥–∞–∂–µ: ${–¥–æ—Å—Ç—É–ø–Ω–æ–í—Å–µ–≥–æ} —à—Ç.`);
      
    } else {
      console.log('   üì≠ –û—Å—Ç–∞—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç');
    }
  });
  
  console.log(`\nüìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:`);
  console.log(`   üì¶ –û–±—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏: ${–æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫} —à—Ç.`);
  console.log(`   üîí –û–±—â–∏–µ —Ä–µ–∑–µ—Ä–≤—ã: ${–æ–±—â–∏–π–†–µ–∑–µ—Ä–≤} —à—Ç.`);
  console.log(`   ‚úÖ –û–±—â–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: ${–æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ - –æ–±—â–∏–π–†–µ–∑–µ—Ä–≤} —à—Ç.`);
  
  if (–æ—Å—Ç–∞—Ç–∫–∏.has_next) {
    console.log(`üìÑ –î–æ—Å—Ç—É–ø–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (last_id: ${–æ—Å—Ç–∞—Ç–∫–∏.last_id})`);
  }
  
  return –æ—Å—Ç–∞—Ç–∫–∏;
}
```

#### –ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ —Å–∫–ª–∞–¥–∞–º
```typescript
async function –∞–Ω–∞–ª–∏–∑–û—Å—Ç–∞—Ç–∫–æ–≤–ü–æ–°–∫–ª–∞–¥–∞–º() {
  let –≤—Å–µ–¢–æ–≤–∞—Ä—ã: any[] = [];
  let –ø–æ—Å–ª–µ–¥–Ω–∏–πId: string | undefined;
  
  // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏
  do {
    const –æ—Å—Ç–∞—Ç–∫–∏ = await api.pricesStocks.getStocks({
      filter: { visibility: 'VISIBLE' },
      last_id: –ø–æ—Å–ª–µ–¥–Ω–∏–πId,
      limit: 1000
    });
    
    if (–æ—Å—Ç–∞—Ç–∫–∏.items) {
      –≤—Å–µ–¢–æ–≤–∞—Ä—ã.push(...–æ—Å—Ç–∞—Ç–∫–∏.items);
    }
    
    –ø–æ—Å–ª–µ–¥–Ω–∏–πId = –æ—Å—Ç–∞—Ç–∫–∏.last_id;
    
    if (–ø–æ—Å–ª–µ–¥–Ω–∏–πId && –≤—Å–µ–¢–æ–≤–∞—Ä—ã.length > 10000) { // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞
      break;
    }
    
  } while (–ø–æ—Å–ª–µ–¥–Ω–∏–πId);
  
  console.log(`üìä –ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤ –¥–ª—è ${–≤—Å–µ–¢–æ–≤–∞—Ä—ã.length} —Ç–æ–≤–∞—Ä–æ–≤`);
  
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–∫–ª–∞–¥–∞–º
  const —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º = new Map<string, {
    –Ω–∞–∑–≤–∞–Ω–∏–µ: string;
    —Ç–æ–≤–∞—Ä–æ–≤: number;
    –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏: number;
    –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã: number;
    –ø—É—Å—Ç—ã—Ö–¢–æ–≤–∞—Ä–æ–≤: number;
    –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–û—Å—Ç–∞—Ç–∫–∏: number; // < 10 –µ–¥–∏–Ω–∏—Ü
  }>();
  
  –≤—Å–µ–¢–æ–≤–∞—Ä—ã.forEach(—Ç–æ–≤–∞—Ä => {
    —Ç–æ–≤–∞—Ä.stocks?.forEach(–æ—Å—Ç–∞—Ç–æ–∫ => {
      const –∫–ª—é—á–°–∫–ª–∞–¥–∞ = `${–æ—Å—Ç–∞—Ç–æ–∫.warehouse_id}_${–æ—Å—Ç–∞—Ç–æ–∫.warehouse_name}`;
      
      if (!—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.has(–∫–ª—é—á–°–∫–ª–∞–¥–∞)) {
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.set(–∫–ª—é—á–°–∫–ª–∞–¥–∞, {
          –Ω–∞–∑–≤–∞–Ω–∏–µ: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_name,
          —Ç–æ–≤–∞—Ä–æ–≤: 0,
          –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏: 0,
          –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã: 0,
          –ø—É—Å—Ç—ã—Ö–¢–æ–≤–∞—Ä–æ–≤: 0,
          –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–û—Å—Ç–∞—Ç–∫–∏: 0
        });
      }
      
      const —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.get(–∫–ª—é—á–°–∫–ª–∞–¥–∞)!;
      —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.—Ç–æ–≤–∞—Ä–æ–≤++;
      —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ += –æ—Å—Ç–∞—Ç–æ–∫.present;
      —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã += –æ—Å—Ç–∞—Ç–æ–∫.reserved;
      
      const –¥–æ—Å—Ç—É–ø–Ω–æ = –æ—Å—Ç–∞—Ç–æ–∫.present - –æ—Å—Ç–∞—Ç–æ–∫.reserved;
      
      if (–¥–æ—Å—Ç—É–ø–Ω–æ === 0) {
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–ø—É—Å—Ç—ã—Ö–¢–æ–≤–∞—Ä–æ–≤++;
      } else if (–¥–æ—Å—Ç—É–ø–Ω–æ <= 10) {
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–û—Å—Ç–∞—Ç–∫–∏++;
      }
    });
  });
  
  console.log('\nüè≠ –ê–Ω–∞–ª–∏–∑ –ø–æ —Å–∫–ª–∞–¥–∞–º:');
  
  // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å–∫–ª–∞–¥—ã –ø–æ –æ–±—â–∏–º –æ—Å—Ç–∞—Ç–∫–∞–º
  const —Å–∫–ª–∞–¥–∞–ü–æ–û—Å—Ç–∞—Ç–∫–∞–º = Array.from(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.entries())
    .sort(([,a], [,b]) => b.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ - a.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏);
  
  —Å–∫–ª–∞–¥–∞–ü–æ–û—Å—Ç–∞—Ç–∫–∞–º.forEach(([–∫–ª—é—á, –¥–∞–Ω–Ω—ã–µ], –∏–Ω–¥–µ–∫—Å) => {
    const –ø—Ä–æ—Ü–µ–Ω—Ç–ü—É—Å—Ç—ã—Ö = Math.round(–¥–∞–Ω–Ω—ã–µ.–ø—É—Å—Ç—ã—Ö–¢–æ–≤–∞—Ä–æ–≤ / –¥–∞–Ω–Ω—ã–µ.—Ç–æ–≤–∞—Ä–æ–≤ * 100);
    const –ø—Ä–æ—Ü–µ–Ω—Ç–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö = Math.round(–¥–∞–Ω–Ω—ã–µ.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–û—Å—Ç–∞—Ç–∫–∏ / –¥–∞–Ω–Ω—ã–µ.—Ç–æ–≤–∞—Ä–æ–≤ * 100);
    const –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å–ü—Ä–æ—Ü–µ–Ω—Ç = –¥–∞–Ω–Ω—ã–µ.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ > 0 ? 
      Math.round((–¥–∞–Ω–Ω—ã–µ.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ - –¥–∞–Ω–Ω—ã–µ.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã) / –¥–∞–Ω–Ω—ã–µ.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ * 100) : 0;
    
    console.log(`\n${–∏–Ω–¥–µ–∫—Å + 1}. üè≠ ${–¥–∞–Ω–Ω—ã–µ.–Ω–∞–∑–≤–∞–Ω–∏–µ}`);
    console.log(`   üì¶ –¢–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ: ${–¥–∞–Ω–Ω—ã–µ.—Ç–æ–≤–∞—Ä–æ–≤.toLocaleString()}`);
    console.log(`   üìä –û–±—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏: ${–¥–∞–Ω–Ω—ã–µ.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏.toLocaleString()} –µ–¥–∏–Ω–∏—Ü`);
    console.log(`   üîí –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ: ${–¥–∞–Ω–Ω—ã–µ.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã.toLocaleString()} –µ–¥–∏–Ω–∏—Ü`);
    console.log(`   ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: ${–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å–ü—Ä–æ—Ü–µ–Ω—Ç}%`);
    console.log(`   üì≠ –ü—É—Å—Ç—ã–µ —Ç–æ–≤–∞—Ä—ã: ${–¥–∞–Ω–Ω—ã–µ.–ø—É—Å—Ç—ã—Ö–¢–æ–≤–∞—Ä–æ–≤} (${–ø—Ä–æ—Ü–µ–Ω—Ç–ü—É—Å—Ç—ã—Ö}%)`);
    console.log(`   ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏: ${–¥–∞–Ω–Ω—ã–µ.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–û—Å—Ç–∞—Ç–∫–∏} (${–ø—Ä–æ—Ü–µ–Ω—Ç–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö}%)`);
    
    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–ü—É—Å—Ç—ã—Ö > 20) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—É—Å—Ç—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ`);
    }
    
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö > 15) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ú–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏`);
    }
    
    if (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å–ü—Ä–æ—Ü–µ–Ω—Ç < 70) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ–∑–µ—Ä–≤–æ–≤ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫–∞–∑–æ–≤`);
    }
  });
  
  // –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  const –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = {
    –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: –≤—Å–µ–¢–æ–≤–∞—Ä—ã.length,
    –≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.size,
    –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏: Array.from(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.values()).reduce((—Å—É–º–º–∞, —Å–∫–ª–∞–¥) => —Å—É–º–º–∞ + —Å–∫–ª–∞–¥.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏, 0),
    –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã: Array.from(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ü–æ–°–∫–ª–∞–¥–∞–º.values()).reduce((—Å—É–º–º–∞, —Å–∫–ª–∞–¥) => —Å—É–º–º–∞ + —Å–∫–ª–∞–¥.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã, 0)
  };
  
  console.log(`\nüìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Å—Ç–∞—Ç–∫–∞–º:`);
  console.log(`   üè≠ –°–∫–ª–∞–¥–æ–≤: ${–æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤}`);
  console.log(`   üì¶ –¢–æ–≤–∞—Ä–æ–≤: ${–æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤.toLocaleString()}`);
  console.log(`   üìä –û–±—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏: ${–æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏.toLocaleString()} –µ–¥–∏–Ω–∏—Ü`);
  console.log(`   üîí –û–±—â–∏–µ —Ä–µ–∑–µ—Ä–≤—ã: ${–æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã.toLocaleString()} –µ–¥–∏–Ω–∏—Ü`);
  console.log(`   ‚úÖ –û–±—â–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: ${(–æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ - –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã).toLocaleString()} –µ–¥–∏–Ω–∏—Ü`);
}
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
```typescript
async function –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö–û—Å—Ç–∞—Ç–∫–æ–≤() {
  console.log('‚ö†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤');
  
  const –æ—Å—Ç–∞—Ç–∫–∏ = await api.pricesStocks.getStocks({
    filter: { visibility: 'VISIBLE' },
    limit: 1000
  });
  
  if (!–æ—Å—Ç–∞—Ç–∫–∏.items) return;
  
  const –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏ = [];
  
  –æ—Å—Ç–∞—Ç–∫–∏.items.forEach(—Ç–æ–≤–∞—Ä => {
    —Ç–æ–≤–∞—Ä.stocks?.forEach(–æ—Å—Ç–∞—Ç–æ–∫ => {
      const –¥–æ—Å—Ç—É–ø–Ω–æ = –æ—Å—Ç–∞—Ç–æ–∫.present - –æ—Å—Ç–∞—Ç–æ–∫.reserved;
      
      let –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å = '–Ω–æ—Ä–º–∞';
      let –æ–ø–∏—Å–∞–Ω–∏–µ = '';
      
      if (–¥–æ—Å—Ç—É–ø–Ω–æ === 0) {
        –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å = '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è';
        –æ–ø–∏—Å–∞–Ω–∏–µ = '–¢–æ–≤–∞—Ä –∑–∞–∫–æ–Ω—á–∏–ª—Å—è';
      } else if (–¥–æ—Å—Ç—É–ø–Ω–æ <= 5) {
        –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å = '–≤—ã—Å–æ–∫–∞—è';
        –æ–ø–∏—Å–∞–Ω–∏–µ = `–û—Å—Ç–∞–ª–æ—Å—å –≤—Å–µ–≥–æ ${–¥–æ—Å—Ç—É–ø–Ω–æ} –µ–¥–∏–Ω–∏—Ü`;
      } else if (–¥–æ—Å—Ç—É–ø–Ω–æ <= 20) {
        –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å = '—Å—Ä–µ–¥–Ω—è—è';
        –æ–ø–∏—Å–∞–Ω–∏–µ = `–ù–∏–∑–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏: ${–¥–æ—Å—Ç—É–ø–Ω–æ} –µ–¥–∏–Ω–∏—Ü`;
      }
      
      if (–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å !== '–Ω–æ—Ä–º–∞') {
        –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.push({
          —Ç–æ–≤–∞—ÄId: —Ç–æ–≤–∞—Ä.offer_id,
          sku: —Ç–æ–≤–∞—Ä.sku,
          —Å–∫–ª–∞–¥–ù–∞–∑–≤–∞–Ω–∏–µ: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_name,
          —Å–∫–ª–∞–¥Id: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_id,
          –æ—Å—Ç–∞—Ç–æ–∫: –æ—Å—Ç–∞—Ç–æ–∫.present,
          —Ä–µ–∑–µ—Ä–≤: –æ—Å—Ç–∞—Ç–æ–∫.reserved,
          –¥–æ—Å—Ç—É–ø–Ω–æ,
          –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å,
          –æ–ø–∏—Å–∞–Ω–∏–µ
        });
      }
    });
  });
  
  if (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.length === 0) {
    console.log('‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã');
    return;
  }
  
  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
  –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.sort((–∞, –±) => {
    const –ø–æ—Ä—è–¥–æ–∫–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ = { –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è: 3, –≤—ã—Å–æ–∫–∞—è: 2, —Å—Ä–µ–¥–Ω—è—è: 1 };
    return –ø–æ—Ä—è–¥–æ–∫–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏[–±.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å] - –ø–æ—Ä—è–¥–æ–∫–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏[–∞.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å];
  });
  
  console.log(`üö® –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ ${–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.length} –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π:`);
  
  const –≥—Ä—É–ø–ø—ã–ü–æ–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ = {
    –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.filter(—Å => —Å.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å === '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è'),
    –≤—ã—Å–æ–∫–∞—è: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.filter(—Å => —Å.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å === '–≤—ã—Å–æ–∫–∞—è'),
    —Å—Ä–µ–¥–Ω—è—è: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏.filter(—Å => —Å.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å === '—Å—Ä–µ–¥–Ω—è—è')
  };
  
  Object.entries(–≥—Ä—É–ø–ø—ã–ü–æ–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏).forEach(([—É—Ä–æ–≤–µ–Ω—å, —Å–∏—Ç—É–∞—Ü–∏–∏]) => {
    if (—Å–∏—Ç—É–∞—Ü–∏–∏.length === 0) return;
    
    const —ç–º–æ–¥–∑–∏ = —É—Ä–æ–≤–µ–Ω—å === '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è' ? 'üî¥' : —É—Ä–æ–≤–µ–Ω—å === '–≤—ã—Å–æ–∫–∞—è' ? 'üü†' : 'üü°';
    console.log(`\n${—ç–º–æ–¥–∑–∏} ${—É—Ä–æ–≤–µ–Ω—å.toUpperCase()} –ö–†–ò–¢–ò–ß–ù–û–°–¢–¨ (${—Å–∏—Ç—É–∞—Ü–∏–∏.length}):`);
    
    —Å–∏—Ç—É–∞—Ü–∏–∏.slice(0, 10).forEach(—Å–∏—Ç—É–∞—Ü–∏—è => { // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 10
      console.log(`   üì¶ ${—Å–∏—Ç—É–∞—Ü–∏—è.—Ç–æ–≤–∞—ÄId} (SKU: ${—Å–∏—Ç—É–∞—Ü–∏—è.sku})`);
      console.log(`      üè≠ –°–∫–ª–∞–¥: ${—Å–∏—Ç—É–∞—Ü–∏—è.—Å–∫–ª–∞–¥–ù–∞–∑–≤–∞–Ω–∏–µ}`);
      console.log(`      üìä ${—Å–∏—Ç—É–∞—Ü–∏—è.–æ–ø–∏—Å–∞–Ω–∏–µ}`);
      console.log(`      üìã –û—Å—Ç–∞—Ç–æ–∫: ${—Å–∏—Ç—É–∞—Ü–∏—è.–æ—Å—Ç–∞—Ç–æ–∫}, –†–µ–∑–µ—Ä–≤: ${—Å–∏—Ç—É–∞—Ü–∏—è.—Ä–µ–∑–µ—Ä–≤}`);
      
      // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º
      if (—Å–∏—Ç—É–∞—Ü–∏—è.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å === '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è') {
        console.log(`      üöÄ –°–†–û–ß–ù–û: –ü–æ–ø–æ–ª–Ω–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ –∏–ª–∏ —Å–Ω—è—Ç—å —Å –ø—Ä–æ–¥–∞–∂–∏`);
      } else if (—Å–∏—Ç—É–∞—Ü–∏—è.–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å === '–≤—ã—Å–æ–∫–∞—è') {
        console.log(`      ‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –±–ª–∏–∂–∞–π—à–∏–µ –¥–Ω–∏`);
      } else {
        console.log(`      üìÖ –í–∫–ª—é—á–∏—Ç—å –≤ –ø–ª–∞–Ω –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é`);
      }
    });
    
    if (—Å–∏—Ç—É–∞—Ü–∏–∏.length > 10) {
      console.log(`   ... –∏ –µ—â—ë ${—Å–∏—Ç—É–∞—Ü–∏–∏.length - 10} —Å–∏—Ç—É–∞—Ü–∏–π`);
    }
  });
  
  return –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–°–∏—Ç—É–∞—Ü–∏–∏;
}
```

---

## 3. getStocksByWarehouseFbs

–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö –ø—Ä–æ–¥–∞–≤—Ü–∞ –ø–æ —Å—Ö–µ–º–∞–º FBS –∏ rFBS.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksGetStocksByWarehouseFbsRequest {
  sku: string[];                  // –ú–∞—Å—Å–∏–≤ SKU —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksGetStocksByWarehouseFbsResponse {
  result?: Array<{
    sku: string;                  // SKU —Ç–æ–≤–∞—Ä–∞
    stocks?: Array<{
      warehouse_id: number;       // ID —Å–∫–ª–∞–¥–∞
      warehouse_name: string;     // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞
      present: number;            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –Ω–∞–ª–∏—á–∏–∏
      reserved: number;           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ
      available: number;          // –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
    }>;
  }>;
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º
```typescript
async function –ø–æ–ª—É—á–∏—Ç—å–î–µ—Ç–∞–ª—å–Ω—É—é–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é–ü–æ–°–∫–ª–∞–¥–∞–º() {
  const —Å–∫–ª–∞–¥—Å–∫–∞—è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await api.pricesStocks.getStocksByWarehouseFbs({
    sku: ['123456789', '987654321', '555666777', '111222333']
  });
  
  console.log('üè≠ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º FBS:');
  
  if (!—Å–∫–ª–∞–¥—Å–∫–∞—è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.result || —Å–∫–ª–∞–¥—Å–∫–∞—è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.result.length === 0) {
    console.log('üîç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
    return;
  }
  
  —Å–∫–ª–∞–¥—Å–∫–∞—è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.result.forEach(—Ç–æ–≤–∞—Ä => {
    console.log(`\nüì¶ –¢–æ–≤–∞—Ä SKU: ${—Ç–æ–≤–∞—Ä.sku}`);
    
    if (—Ç–æ–≤–∞—Ä.stocks && —Ç–æ–≤–∞—Ä.stocks.length > 0) {
      let –æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ = 0;
      let –æ–±—â–∏–π–†–µ–∑–µ—Ä–≤ = 0;
      let –æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = 0;
      
      —Ç–æ–≤–∞—Ä.stocks.forEach(—Å–∫–ª–∞–¥ => {
        console.log(`   üè≠ ${—Å–∫–ª–∞–¥.warehouse_name} (ID: ${—Å–∫–ª–∞–¥.warehouse_id}):`);
        console.log(`      üì¶ –í –Ω–∞–ª–∏—á–∏–∏: ${—Å–∫–ª–∞–¥.present} —à—Ç.`);
        console.log(`      üîí –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ: ${—Å–∫–ª–∞–¥.reserved} —à—Ç.`);
        console.log(`      ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ: ${—Å–∫–ª–∞–¥.available} —à—Ç.`);
        
        –æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ += —Å–∫–ª–∞–¥.present;
        –æ–±—â–∏–π–†–µ–∑–µ—Ä–≤ += —Å–∫–ª–∞–¥.reserved;
        –æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å += —Å–∫–ª–∞–¥.available;
        
        // –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∫–ª–∞–¥–∞
        const –ø—Ä–æ—Ü–µ–Ω—Ç–†–µ–∑–µ—Ä–≤–∞ = —Å–∫–ª–∞–¥.present > 0 ? (—Å–∫–ª–∞–¥.reserved / —Å–∫–ª–∞–¥.present * 100) : 0;
        if (–ø—Ä–æ—Ü–µ–Ω—Ç–†–µ–∑–µ—Ä–≤–∞ > 80) {
          console.log(`      ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ–∑–µ—Ä–≤–∞: ${–ø—Ä–æ—Ü–µ–Ω—Ç–†–µ–∑–µ—Ä–≤–∞.toFixed(1)}%`);
        }
        
        if (—Å–∫–ª–∞–¥.present > 0 && —Å–∫–ª–∞–¥.available === 0) {
          console.log(`      üö´ –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã`);
        }
      });
      
      console.log(`   üìä –û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ç–æ–≤–∞—Ä–∞:`);
      console.log(`      –í—Å–µ–≥–æ –æ—Å—Ç–∞—Ç–∫–æ–≤: ${–æ–±—â–∏–π–û—Å—Ç–∞—Ç–æ–∫} —à—Ç.`);
      console.log(`      –û–±—â–∏–µ —Ä–µ–∑–µ—Ä–≤—ã: ${–æ–±—â–∏–π–†–µ–∑–µ—Ä–≤} —à—Ç.`);
      console.log(`      –û–±—â–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: ${–æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å} —à—Ç.`);
      
      // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é
      const –∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã = —Ç–æ–≤–∞—Ä.stocks.filter(—Å => —Å.present > 0);
      if (–∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length === 1) {
        console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –¢–æ–≤–∞—Ä —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ –æ–¥–Ω–æ–º —Å–∫–ª–∞–¥–µ`);
      }
      
      const –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã = —Ç–æ–≤–∞—Ä.stocks.filter(—Å => —Å.present > 0 && —Å.available === 0);
      if (–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length > 0) {
        console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ${–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length} —Å–∫–ª–∞–¥–æ–≤ —Å –Ω—É–ª–µ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é`);
      }
      
    } else {
      console.log('   üì≠ –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç');
    }
  });
  
  return —Å–∫–ª–∞–¥—Å–∫–∞—è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è;
}
```

#### –ê—É–¥–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Å–∫–ª–∞–¥–∞–º
```typescript
async function –∞—É–¥–∏—Ç–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–ü–æ–°–∫–ª–∞–¥–∞–º() {
  const —Ç–æ–≤–∞—Ä—ã–î–ª—è–ê—É–¥–∏—Ç–∞ = ['123456789', '987654321', '555666777'];
  
  const –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = await api.pricesStocks.getStocksByWarehouseFbs({
    sku: —Ç–æ–≤–∞—Ä—ã–î–ª—è–ê—É–¥–∏—Ç–∞
  });
  
  if (!–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.result) return;
  
  console.log('üîç –ê—É–¥–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Å–∫–ª–∞–¥–∞–º:');
  
  const —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°–∫–ª–∞–¥–æ–≤ = new Map<string, {
    —Ç–æ–≤–∞—Ä–æ–≤: number;
    –æ—Å—Ç–∞—Ç–∫–æ–≤: number;
    —Ä–µ–∑–µ—Ä–≤–æ–≤: number;
    –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: number;
    —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: number;
  }>();
  
  // –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–∫–ª–∞–¥–∞–º
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.result.forEach(—Ç–æ–≤–∞—Ä => {
    —Ç–æ–≤–∞—Ä.stocks?.forEach(—Å–∫–ª–∞–¥ => {
      const –∫–ª—é—á–°–∫–ª–∞–¥–∞ = `${—Å–∫–ª–∞–¥.warehouse_id}_${—Å–∫–ª–∞–¥.warehouse_name}`;
      
      if (!—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°–∫–ª–∞–¥–æ–≤.has(–∫–ª—é—á–°–∫–ª–∞–¥–∞)) {
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°–∫–ª–∞–¥–æ–≤.set(–∫–ª—é—á–°–∫–ª–∞–¥–∞, {
          —Ç–æ–≤–∞—Ä–æ–≤: 0,
          –æ—Å—Ç–∞—Ç–∫–æ–≤: 0,
          —Ä–µ–∑–µ—Ä–≤–æ–≤: 0,
          –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: 0,
          —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 0
        });
      }
      
      const –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞ = —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°–∫–ª–∞–¥–æ–≤.get(–∫–ª—é—á–°–∫–ª–∞–¥–∞)!;
      –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.—Ç–æ–≤–∞—Ä–æ–≤++;
      –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–æ—Å—Ç–∞—Ç–∫–æ–≤ += —Å–∫–ª–∞–¥.present;
      –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.—Ä–µ–∑–µ—Ä–≤–æ–≤ += —Å–∫–ª–∞–¥.reserved;
      –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ += —Å–∫–ª–∞–¥.available;
      
      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤)
      –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å = –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–æ—Å—Ç–∞—Ç–∫–æ–≤ > 0 ? 
        (–¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ / –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–æ—Å—Ç–∞—Ç–∫–æ–≤) * 100 : 0;
    });
  });
  
  // –í—ã–≤–æ–¥–∏–º –∞—É–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∫–ª–∞–¥—É
  Array.from(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°–∫–ª–∞–¥–æ–≤.entries()).forEach(([–∫–ª—é—á, –¥–∞–Ω–Ω—ã–µ]) => {
    const [–∏–¥–°–∫–ª–∞–¥–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ–°–∫–ª–∞–¥–∞] = –∫–ª—é—á.split('_');
    
    console.log(`\nüè≠ –°–∫–ª–∞–¥: ${–Ω–∞–∑–≤–∞–Ω–∏–µ–°–∫–ª–∞–¥–∞} (ID: ${–∏–¥–°–∫–ª–∞–¥–∞})`);
    console.log(`   üì¶ –¢–æ–≤–∞—Ä–æ–≤: ${–¥–∞–Ω–Ω—ã–µ.—Ç–æ–≤–∞—Ä–æ–≤}`);
    console.log(`   üìä –û—Å—Ç–∞—Ç–∫–æ–≤: ${–¥–∞–Ω–Ω—ã–µ.–æ—Å—Ç–∞—Ç–∫–æ–≤} –µ–¥–∏–Ω–∏—Ü`);
    console.log(`   üîí –†–µ–∑–µ—Ä–≤–æ–≤: ${–¥–∞–Ω–Ω—ã–µ.—Ä–µ–∑–µ—Ä–≤–æ–≤} –µ–¥–∏–Ω–∏—Ü`);
    console.log(`   ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ: ${–¥–∞–Ω–Ω—ã–µ.–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏} –µ–¥–∏–Ω–∏—Ü`);
    console.log(`   üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${–¥–∞–Ω–Ω—ã–µ.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.toFixed(1)}%`);
    
    // –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    if (–¥–∞–Ω–Ω—ã–µ.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å < 50) {
      console.log(`   ‚ö†Ô∏è –ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–æ–≤`);
    } else if (–¥–∞–Ω–Ω—ã–µ.—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å > 90) {
      console.log(`   ‚úÖ –í—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ`);
    }
    
    if (–¥–∞–Ω–Ω—ã–µ.–æ—Å—Ç–∞—Ç–∫–æ–≤ === 0) {
      console.log(`   üì≠ –°–∫–ª–∞–¥ –ø—É—Å—Ç–æ–π: —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ`);
    } else if (–¥–∞–Ω–Ω—ã–µ.–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ === 0) {
      console.log(`   üîí –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫–∞–∑–æ–≤`);
    }
  });
  
  // –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
  console.log('\nüìä –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤:');
  
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.result.forEach(—Ç–æ–≤–∞—Ä => {
    const –∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã = —Ç–æ–≤–∞—Ä.stocks?.filter(—Å => —Å.present > 0) || [];
    const –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ = —Ç–æ–≤–∞—Ä.stocks?.reduce((—Å—É–º–º–∞, —Å) => —Å—É–º–º–∞ + —Å.present, 0) || 0;
    
    console.log(`\nüì¶ SKU: ${—Ç–æ–≤–∞—Ä.sku}`);
    console.log(`   üè≠ –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤: ${–∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length}`);
    console.log(`   üìä –û–±—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏: ${–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏} –µ–¥–∏–Ω–∏—Ü`);
    
    if (–∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length === 1) {
      console.log(`   ‚ö†Ô∏è –†–∏—Å–∫: —Ç–æ–≤–∞—Ä —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ –æ–¥–Ω–æ–º —Å–∫–ª–∞–¥–µ`);
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–∫–ª–∞–¥–∞–º`);
    } else if (–∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length === 0) {
      console.log(`   ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ: —Ç–æ–≤–∞—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–∫–ª–∞–¥–∞—Ö`);
      console.log(`   üöÄ –î–µ–π—Å—Ç–≤–∏–µ: —Å—Ä–æ—á–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤`);
    } else {
      console.log(`   ‚úÖ –•–æ—Ä–æ—à–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ ${–∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length} —Å–∫–ª–∞–¥–∞–º`);
    }
    
    // –ê–Ω–∞–ª–∏–∑ –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏
    if (–∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.length > 1) {
      const –æ—Å—Ç–∞—Ç–∫–∏–ü–æ–°–∫–ª–∞–¥–∞–º = –∞–∫—Ç–∏–≤–Ω—ã–µ–°–∫–ª–∞–¥—ã.map(—Å => —Å.present);
      const –º–∞–∫—Å–û—Å—Ç–∞—Ç–æ–∫ = Math.max(...–æ—Å—Ç–∞—Ç–∫–∏–ü–æ–°–∫–ª–∞–¥–∞–º);
      const –º–∏–Ω–û—Å—Ç–∞—Ç–æ–∫ = Math.min(...–æ—Å—Ç–∞—Ç–∫–∏–ü–æ–°–∫–ª–∞–¥–∞–º);
      
      if (–º–∞–∫—Å–û—Å—Ç–∞—Ç–æ–∫ / –º–∏–Ω–û—Å—Ç–∞—Ç–æ–∫ > 10) {
        console.log(`   ‚ö†Ô∏è –î–∏—Å–±–∞–ª–∞–Ω—Å: —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –æ—Å—Ç–∞—Ç–∫–∞—Ö –±–æ–ª–µ–µ —á–µ–º –≤ 10 —Ä–∞–∑`);
        console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏`);
      }
    }
  });
}
```

---

## üèóÔ∏è –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤
```typescript
interface –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–û—Å—Ç–∞—Ç–∫–æ–≤ {
  —Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞?: number;            // –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
  –ª–∏–º–∏—Ç–ó–∞–ø—Ä–æ—Å–æ–≤–í–ú–∏–Ω—É—Ç—É?: number;    // –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (80)
  –∑–∞–¥–µ—Ä–∂–∫–∞–ú–µ–∂–¥—É–ó–∞–ø—Ä–æ—Å–∞–º–∏?: number;  // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–º—Å)
  –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫?: number;      // –ü–æ—Ä–æ–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
  –Ω–∏–∑–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫?: number;           // –ü–æ—Ä–æ–≥ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
  –º–∞–∫—Å–∏–º—É–º–ü–æ–ø—ã—Ç–æ–∫?: number;         // –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
}

class –ú–µ–Ω–µ–¥–∂–µ—Ä–û—Å—Ç–∞—Ç–∫–æ–≤ {
  private api: OzonSellerAPI;
  private –∫–æ–Ω—Ñ–∏–≥: Required<–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–û—Å—Ç–∞—Ç–∫–æ–≤>;
  private —Å—á—ë—Ç—á–∏–∫–ó–∞–ø—Ä–æ—Å–æ–≤ = new Map<number, number[]>(); // –ú–∏–Ω—É—Ç–∞ -> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
  
  constructor(api: OzonSellerAPI, –∫–æ–Ω—Ñ–∏–≥: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–û—Å—Ç–∞—Ç–∫–æ–≤ = {}) {
    this.api = api;
    this.–∫–æ–Ω—Ñ–∏–≥ = {
      —Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞: 100,
      –ª–∏–º–∏—Ç–ó–∞–ø—Ä–æ—Å–æ–≤–í–ú–∏–Ω—É—Ç—É: 80,
      –∑–∞–¥–µ—Ä–∂–∫–∞–ú–µ–∂–¥—É–ó–∞–ø—Ä–æ—Å–∞–º–∏: 1000,
      –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫: 5,
      –Ω–∏–∑–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫: 20,
      –º–∞–∫—Å–∏–º—É–º–ü–æ–ø—ã—Ç–æ–∫: 3,
      ...–∫–æ–Ω—Ñ–∏–≥
    };
  }

  /**
   * –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–æ–≤
   */
  async –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ–û—Å—Ç–∞—Ç–∫–æ–≤(
    –æ—Å—Ç–∞—Ç–∫–∏: Array<{
      —Ç–æ–≤–∞—ÄId: string;
      –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: number;
      —Å–∫–ª–∞–¥Id: number;
    }>
  ): Promise<{
    —É—Å–ø–µ—à–Ω–æ: number;
    –æ—à–∏–±–æ–∫: number;
    –ø—Ä–æ–ø—É—â–µ–Ω–æ: number;
    –¥–µ—Ç–∞–ª–∏: Array<{ —Ç–æ–≤–∞—ÄId: string; —Å—Ç–∞—Ç—É—Å: '—É—Å–ø–µ—à–Ω–æ' | '–æ—à–∏–±–∫–∞' | '–ø—Ä–æ–ø—É—â–µ–Ω–æ'; –ø—Ä–∏—á–∏–Ω–∞?: string }>;
  }> {
    const —Ä–µ–∑—É–ª—å—Ç–∞—Ç = {
      —É—Å–ø–µ—à–Ω–æ: 0,
      –æ—à–∏–±–æ–∫: 0,
      –ø—Ä–æ–ø—É—â–µ–Ω–æ: 0,
      –¥–µ—Ç–∞–ª–∏: [] as Array<{ —Ç–æ–≤–∞—ÄId: string; —Å—Ç–∞—Ç—É—Å: '—É—Å–ø–µ—à–Ω–æ' | '–æ—à–∏–±–∫–∞' | '–ø—Ä–æ–ø—É—â–µ–Ω–æ'; –ø—Ä–∏—á–∏–Ω–∞?: string }>
    };

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
    if (!this.–ø—Ä–æ–≤–µ—Ä–∏—Ç—å–õ–∏–º–∏—Ç–ó–∞–ø—Ä–æ—Å–æ–≤()) {
      console.log('‚è∞ –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É, –æ–∂–∏–¥–∞–Ω–∏–µ...');
      await this.–æ–∂–∏–¥–∞—Ç—å–°–±—Ä–æ—Å—Å–∞–õ–∏–º–∏—Ç–∞();
    }

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–∞–∫–µ—Ç–∞–º–∏
    for (let i = 0; i < –æ—Å—Ç–∞—Ç–∫–∏.length; i += this.–∫–æ–Ω—Ñ–∏–≥.—Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞) {
      const –ø–∞–∫–µ—Ç = –æ—Å—Ç–∞—Ç–∫–∏.slice(i, i + this.–∫–æ–Ω—Ñ–∏–≥.—Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞);
      let –ø–æ–ø—ã—Ç–∫–∞ = 0;
      let —É—Å–ø–µ—à–Ω–æ = false;

      while (!—É—Å–ø–µ—à–Ω–æ && –ø–æ–ø—ã—Ç–∫–∞ < this.–∫–æ–Ω—Ñ–∏–≥.–º–∞–∫—Å–∏–º—É–º–ü–æ–ø—ã—Ç–æ–∫) {
        –ø–æ–ø—ã—Ç–∫–∞++;

        try {
          const –∑–∞–ø—Ä–æ—Å = {
            stocks: –ø–∞–∫–µ—Ç.map(–æ—Å—Ç–∞—Ç–æ–∫ => ({
              offer_id: –æ—Å—Ç–∞—Ç–æ–∫.—Ç–æ–≤–∞—ÄId,
              stock: –æ—Å—Ç–∞—Ç–æ–∫.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ,
              warehouse_id: –æ—Å—Ç–∞—Ç–æ–∫.—Å–∫–ª–∞–¥Id
            }))
          };

          const –æ—Ç–≤–µ—Ç = await this.api.pricesStocks.updateStocks(–∑–∞–ø—Ä–æ—Å);
          this.–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å–ó–∞–ø—Ä–æ—Å();

          // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
          –æ—Ç–≤–µ—Ç.result?.forEach((—Ç–æ–≤–∞—Ä, –∏–Ω–¥–µ–∫—Å) => {
            const –∏—Å—Ö–æ–¥–Ω—ã–π–¢–æ–≤–∞—Ä = –ø–∞–∫–µ—Ç[–∏–Ω–¥–µ–∫—Å];
            
            if (—Ç–æ–≤–∞—Ä.updated) {
              —Ä–µ–∑—É–ª—å—Ç–∞—Ç.—É—Å–ø–µ—à–Ω–æ++;
              —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
                —Ç–æ–≤–∞—ÄId: –∏—Å—Ö–æ–¥–Ω—ã–π–¢–æ–≤–∞—Ä.—Ç–æ–≤–∞—ÄId,
                —Å—Ç–∞—Ç—É—Å: '—É—Å–ø–µ—à–Ω–æ'
              });
            } else {
              —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–æ—à–∏–±–æ–∫++;
              —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
                —Ç–æ–≤–∞—ÄId: –∏—Å—Ö–æ–¥–Ω—ã–π–¢–æ–≤–∞—Ä.—Ç–æ–≤–∞—ÄId,
                —Å—Ç–∞—Ç—É—Å: '–æ—à–∏–±–∫–∞',
                –ø—Ä–∏—á–∏–Ω–∞: —Ç–æ–≤–∞—Ä.errors?.join(', ')
              });
            }
          });

          —É—Å–ø–µ—à–Ω–æ = true;

        } catch (error: any) {
          if (error.response?.status === 429) {
            // –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç - –∂–¥—ë–º
            console.log(`‚è∞ –õ–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π ${–ø–æ–ø—ã—Ç–∫–∞}...`);
            await this.–æ–∂–∏–¥–∞—Ç—å–°–±—Ä–æ—Å—Å–∞–õ–∏–º–∏—Ç–∞();
          } else if (–ø–æ–ø—ã—Ç–∫–∞ >= this.–∫–æ–Ω—Ñ–∏–≥.–º–∞–∫—Å–∏–º—É–º–ü–æ–ø—ã—Ç–æ–∫) {
            // –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –ø–∞–∫–µ—Ç–µ —Å—á–∏—Ç–∞–µ–º –æ—à–∏–±–æ—á–Ω—ã–º–∏
            –ø–∞–∫–µ—Ç.forEach(–æ—Å—Ç–∞—Ç–æ–∫ => {
              —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–æ—à–∏–±–æ–∫++;
              —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
                —Ç–æ–≤–∞—ÄId: –æ—Å—Ç–∞—Ç–æ–∫.—Ç–æ–≤–∞—ÄId,
                —Å—Ç–∞—Ç—É—Å: '–æ—à–∏–±–∫–∞',
                –ø—Ä–∏—á–∏–Ω–∞: error.message
              });
            });
            —É—Å–ø–µ—à–Ω–æ = true; // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –ø–æ–ø—ã—Ç–æ–∫
          } else {
            // –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–æ–º
            await new Promise(resolve => setTimeout(resolve, 2000));
          }
        }
      }

      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏
      if (i + this.–∫–æ–Ω—Ñ–∏–≥.—Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞ < –æ—Å—Ç–∞—Ç–∫–∏.length) {
        await new Promise(resolve => setTimeout(resolve, this.–∫–æ–Ω—Ñ–∏–≥.–∑–∞–¥–µ—Ä–∂–∫–∞–ú–µ–∂–¥—É–ó–∞–ø—Ä–æ—Å–∞–º–∏));
      }
    }

    return —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
  }

  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–¥–∞–∂
   */
  async –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ(
    –ø—Ä–∞–≤–∏–ª–∞–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è: {
      –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π–û—Å—Ç–∞—Ç–æ–∫: number;
      —Ü–µ–ª–µ–≤–æ–π–û—Å—Ç–∞—Ç–æ–∫: number;
      –ø–æ—Å—Ç–∞–≤—â–∏–∫?: string;
      –≤—Ä–µ–º—è–ü–æ—Å—Ç–∞–≤–∫–∏?: number; // –¥–Ω–µ–π
    }
  ): Promise<void> {
    console.log('üîÑ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤');

    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
    const —Ç–µ–∫—É—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ = await this.–ø–æ–ª—É—á–∏—Ç—å–í—Å–µ–û—Å—Ç–∞—Ç–∫–∏();

    // –ù–∞—Ö–æ–¥–∏–º —Ç–æ–≤–∞—Ä—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
    const —Ç—Ä–µ–±—É—é—Ç–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è: Array<{
      —Ç–æ–≤–∞—ÄId: string;
      sku: string;
      —Ç–µ–∫—É—â–∏–π–û—Å—Ç–∞—Ç–æ–∫: number;
      –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–ü–æ–ø–æ–ª–Ω–∏—Ç—å: number;
      —Å–∫–ª–∞–¥Id: number;
      —Å–∫–ª–∞–¥–ù–∞–∑–≤–∞–Ω–∏–µ: string;
    }> = [];

    —Ç–µ–∫—É—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏.forEach(—Ç–æ–≤–∞—Ä => {
      —Ç–æ–≤–∞—Ä.stocks?.forEach(–æ—Å—Ç–∞—Ç–æ–∫ => {
        const –¥–æ—Å—Ç—É–ø–Ω–æ = –æ—Å—Ç–∞—Ç–æ–∫.present - –æ—Å—Ç–∞—Ç–æ–∫.reserved;
        
        if (–¥–æ—Å—Ç—É–ø–Ω–æ <= –ø—Ä–∞–≤–∏–ª–∞–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π–û—Å—Ç–∞—Ç–æ–∫) {
          const –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–ü–æ–ø–æ–ª–Ω–∏—Ç—å = –ø—Ä–∞–≤–∏–ª–∞–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.—Ü–µ–ª–µ–≤–æ–π–û—Å—Ç–∞—Ç–æ–∫ - do—Å—Ç—É–ø–Ω–æ;
          
          —Ç—Ä–µ–±—É—é—Ç–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.push({
            —Ç–æ–≤–∞—ÄId: —Ç–æ–≤–∞—Ä.offer_id,
            sku: —Ç–æ–≤–∞—Ä.sku,
            —Ç–µ–∫—É—â–∏–π–û—Å—Ç–∞—Ç–æ–∫: –¥–æ—Å—Ç—É–ø–Ω–æ,
            –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–ü–æ–ø–æ–ª–Ω–∏—Ç—å,
            —Å–∫–ª–∞–¥Id: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_id,
            —Å–∫–ª–∞–¥–ù–∞–∑–≤–∞–Ω–∏–µ: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_name
          });
        }
      });
    });

    if (—Ç—Ä–µ–±—É—é—Ç–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length === 0) {
      console.log('‚úÖ –¢–æ–≤–∞—Ä—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è');
      return;
    }

    console.log(`üì¶ –ù–∞–π–¥–µ–Ω–æ ${—Ç—Ä–µ–±—É—é—Ç–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length} —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è`);

    // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
    const –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è = —Ç—Ä–µ–±—É—é—Ç–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.filter(—Ç => —Ç.—Ç–µ–∫—É—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ <= this.–∫–æ–Ω—Ñ–∏–≥.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫);
    const –æ–±—ã—á–Ω—ã–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è = —Ç—Ä–µ–±—É—é—Ç–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.filter(—Ç => —Ç.—Ç–µ–∫—É—â–∏–π–û—Å—Ç–∞—Ç–æ–∫ > this.–∫–æ–Ω—Ñ–∏–≥.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫);

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
    if (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length > 0) {
      console.log(`üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: ${–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length}`);
      
      –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.forEach(—Ç–æ–≤–∞—Ä => {
        console.log(`   üì¶ ${—Ç–æ–≤–∞—Ä.—Ç–æ–≤–∞—ÄId} (${—Ç–æ–≤–∞—Ä.sku})`);
        console.log(`      üè≠ –°–∫–ª–∞–¥: ${—Ç–æ–≤–∞—Ä.—Å–∫–ª–∞–¥–ù–∞–∑–≤–∞–Ω–∏–µ}`);
        console.log(`      üìä –û—Å—Ç–∞—Ç–æ–∫: ${—Ç–æ–≤–∞—Ä.—Ç–µ–∫—É—â–∏–π–û—Å—Ç–∞—Ç–æ–∫}, –Ω—É–∂–Ω–æ: +${—Ç–æ–≤–∞—Ä.–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–ü–æ–ø–æ–ª–Ω–∏—Ç—å}`);
        console.log(`      üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô`);
      });
    }

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–±—ã—á–Ω—ã–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
    if (–æ–±—ã—á–Ω—ã–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length > 0) {
      console.log(`üìã –ü–ª–∞–Ω–æ–≤—ã–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: ${–æ–±—ã—á–Ω—ã–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length}`);
      
      –æ–±—ã—á–Ω—ã–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.slice(0, 10).forEach(—Ç–æ–≤–∞—Ä => { // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 10
        console.log(`   üì¶ ${—Ç–æ–≤–∞—Ä.—Ç–æ–≤–∞—ÄId}: +${—Ç–æ–≤–∞—Ä.–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–ü–æ–ø–æ–ª–Ω–∏—Ç—å} –µ–¥–∏–Ω–∏—Ü`);
      });
      
      if (–æ–±—ã—á–Ω—ã–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length > 10) {
        console.log(`   ... –∏ –µ—â—ë ${–æ–±—ã—á–Ω—ã–µ–ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è.length - 10} —Ç–æ–≤–∞—Ä–æ–≤`);
      }
    }

    // –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –≤—ã–∑–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫—É–ø–æ–∫/ERP
    console.log('üí° –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—É–ø–∫–∞–º–∏');
  }

  /**
   * –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –ø–æ –æ—Å—Ç–∞—Ç–∫–∞–º
   */
  async —Å–æ–∑–¥–∞—Ç—å–û—Ç—á—ë—Ç–ü–æ–û—Å—Ç–∞—Ç–∫–∞–º(): Promise<{
    –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: {
      –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: number;
      –≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤: number;
      –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏: number;
      –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã: number;
      –æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: number;
    };
    –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–û—Å—Ç–∞—Ç–∫–∏: any[];
    —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: string[];
    —Ç–æ–ø–°–∫–ª–∞–¥—ã: any[];
  }> {
    const –æ—Å—Ç–∞—Ç–∫–∏ = await this.–ø–æ–ª—É—á–∏—Ç—å–í—Å–µ–û—Å—Ç–∞—Ç–∫–∏();

    const —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = {
      –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: –æ—Å—Ç–∞—Ç–∫–∏.length,
      –≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤: new Set<number>(),
      –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏: 0,
      –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã: 0,
      –æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: 0
    };

    const –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–û—Å—Ç–∞—Ç–∫–∏: any[] = [];
    const —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: string[] = [];
    const —Å–∫–ª–∞–¥—Å–∫–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = new Map<number, any>();

    –æ—Å—Ç–∞—Ç–∫–∏.forEach(—Ç–æ–≤–∞—Ä => {
      —Ç–æ–≤–∞—Ä.stocks?.forEach(–æ—Å—Ç–∞—Ç–æ–∫ => {
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤.add(–æ—Å—Ç–∞—Ç–æ–∫.warehouse_id);
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏ += –æ—Å—Ç–∞—Ç–æ–∫.present;
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã += –æ—Å—Ç–∞—Ç–æ–∫.reserved;
        
        const –¥–æ—Å—Ç—É–ø–Ω–æ = –æ—Å—Ç–∞—Ç–æ–∫.present - –æ—Å—Ç–∞—Ç–æ–∫.reserved;
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å += –¥–æ—Å—Ç—É–ø–Ω–æ;

        // –°–∫–ª–∞–¥—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        if (!—Å–∫–ª–∞–¥—Å–∫–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.has(–æ—Å—Ç–∞—Ç–æ–∫.warehouse_id)) {
          —Å–∫–ª–∞–¥—Å–∫–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.set(–æ—Å—Ç–∞—Ç–æ–∫.warehouse_id, {
            –Ω–∞–∑–≤–∞–Ω–∏–µ: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_name,
            —Ç–æ–≤–∞—Ä–æ–≤: 0,
            –æ—Å—Ç–∞—Ç–∫–æ–≤: 0,
            —Ä–µ–∑–µ—Ä–≤–æ–≤: 0,
            –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: 0
          });
        }

        const –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞ = —Å–∫–ª–∞–¥—Å–∫–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.get(–æ—Å—Ç–∞—Ç–æ–∫.warehouse_id)!;
        –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.—Ç–æ–≤–∞—Ä–æ–≤++;
        –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–æ—Å—Ç–∞—Ç–∫–æ–≤ += –æ—Å—Ç–∞—Ç–æ–∫.present;
        –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.—Ä–µ–∑–µ—Ä–≤–æ–≤ += –æ—Å—Ç–∞—Ç–æ–∫.reserved;
        –¥–∞–Ω–Ω—ã–µ–°–∫–ª–∞–¥–∞.–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ += –¥–æ—Å—Ç—É–ø–Ω–æ;

        // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
        if (–¥–æ—Å—Ç—É–ø–Ω–æ <= this.–∫–æ–Ω—Ñ–∏–≥.–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π–û—Å—Ç–∞—Ç–æ–∫) {
          –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–û—Å—Ç–∞—Ç–∫–∏.push({
            —Ç–æ–≤–∞—ÄId: —Ç–æ–≤–∞—Ä.offer_id,
            sku: —Ç–æ–≤–∞—Ä.sku,
            —Å–∫–ª–∞–¥–ù–∞–∑–≤–∞–Ω–∏–µ: –æ—Å—Ç–∞—Ç–æ–∫.warehouse_name,
            –æ—Å—Ç–∞—Ç–æ–∫: –æ—Å—Ç–∞—Ç–æ–∫.present,
            —Ä–µ–∑–µ—Ä–≤: –æ—Å—Ç–∞—Ç–æ–∫.reserved,
            –¥–æ—Å—Ç—É–ø–Ω–æ,
            –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –¥–æ—Å—Ç—É–ø–Ω–æ === 0 ? '–Ω–µ—Ç_–≤_–Ω–∞–ª–∏—á–∏–∏' : '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π'
          });
        }
      });
    });

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    const –ø—Ä–æ—Ü–µ–Ω—Ç–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö = (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–û—Å—Ç–∞—Ç–∫–∏.length / —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤) * 100;
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö > 10) {
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push(`–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤: ${–ø—Ä–æ—Ü–µ–Ω—Ç–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö.toFixed(1)}%`);
    }

    const –ø—Ä–æ—Ü–µ–Ω—Ç–†–µ–∑–µ—Ä–≤–æ–≤ = (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã / —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏) * 100;
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–†–µ–∑–µ—Ä–≤–æ–≤ > 50) {
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push(`–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ–∑–µ—Ä–≤–æ–≤: ${–ø—Ä–æ—Ü–µ–Ω—Ç–†–µ–∑–µ—Ä–≤–æ–≤.toFixed(1)}% - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫–∞–∑–æ–≤`);
    }

    if (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤.size < 2) {
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.push('–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∫–ª–∞–¥–æ–≤ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏');
    }

    // –¢–æ–ø —Å–∫–ª–∞–¥–æ–≤ –ø–æ –æ—Å—Ç–∞—Ç–∫–∞–º
    const —Ç–æ–ø–°–∫–ª–∞–¥—ã = Array.from(—Å–∫–ª–∞–¥—Å–∫–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.values())
      .sort((–∞, –±) => –±.–æ—Å—Ç–∞—Ç–∫–æ–≤ - –∞.–æ—Å—Ç–∞—Ç–∫–æ–≤)
      .slice(0, 5);

    return {
      –æ–±—â–∞—è–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: {
        –≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–¢–æ–≤–∞—Ä–æ–≤,
        –≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–≤—Å–µ–≥–æ–°–∫–ª–∞–¥–æ–≤.size,
        –æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–û—Å—Ç–∞—Ç–∫–∏,
        –æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∏–µ–†–µ–∑–µ—Ä–≤—ã,
        –æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.–æ–±—â–∞—è–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
      },
      –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–û—Å—Ç–∞—Ç–∫–∏: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ–û—Å—Ç–∞—Ç–∫–∏.sort((–∞, –±) => –∞.–¥–æ—Å—Ç—É–ø–Ω–æ - –±.–¥–æ—Å—Ç—É–ø–Ω–æ),
      —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏,
      —Ç–æ–ø–°–∫–ª–∞–¥—ã
    };
  }

  private –ø—Ä–æ–≤–µ—Ä–∏—Ç—å–õ–∏–º–∏—Ç–ó–∞–ø—Ä–æ—Å–æ–≤(): boolean {
    const —Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞ = Math.floor(Date.now() / 60000);
    const –∑–∞–ø—Ä–æ—Å—ã–í–¢–µ–∫—É—â–µ–π–ú–∏–Ω—É—Ç–µ = this.—Å—á—ë—Ç—á–∏–∫–ó–∞–ø—Ä–æ—Å–æ–≤.get(—Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞) || [];
    
    return –∑–∞–ø—Ä–æ—Å—ã–í–¢–µ–∫—É—â–µ–π–ú–∏–Ω—É—Ç–µ.length < this.–∫–æ–Ω—Ñ–∏–≥.–ª–∏–º–∏—Ç–ó–∞–ø—Ä–æ—Å–æ–≤–í–ú–∏–Ω—É—Ç—É;
  }

  private –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å–ó–∞–ø—Ä–æ—Å(): void {
    const —Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞ = Math.floor(Date.now() / 60000);
    
    if (!this.—Å—á—ë—Ç—á–∏–∫–ó–∞–ø—Ä–æ—Å–æ–≤.has(—Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞)) {
      this.—Å—á—ë—Ç—á–∏–∫–ó–∞–ø—Ä–æ—Å–æ–≤.set(—Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞, []);
    }
    
    this.—Å—á—ë—Ç—á–∏–∫–ó–∞–ø—Ä–æ—Å–æ–≤.get(—Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞)!.push(Date.now());
    
    // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏
    const –º–∏–Ω—É—Ç—É–ù–∞–∑–∞–¥ = —Ç–µ–∫—É—â–∞—è–ú–∏–Ω—É—Ç–∞ - 1;
    this.—Å—á—ë—Ç—á–∏–∫–ó–∞–ø—Ä–æ—Å–æ–≤.delete(–º–∏–Ω—É—Ç—É–ù–∞–∑–∞–¥);
  }

  private async –æ–∂–∏–¥–∞—Ç—å–°–±—Ä–æ—Å—Å–∞–õ–∏–º–∏—Ç–∞(): Promise<void> {
    const –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–î–æ–°–ª–µ–¥—É—é—â–µ–π–ú–∏–Ω—É—Ç—ã = 60000 - (Date.now() % 60000);
    console.log(`‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞: ${Math.round(–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–î–æ–°–ª–µ–¥—É—é—â–µ–π–ú–∏–Ω—É—Ç—ã / 1000)} —Å–µ–∫—É–Ω–¥`);
    await new Promise(resolve => setTimeout(resolve, –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–î–æ–°–ª–µ–¥—É—é—â–µ–π–ú–∏–Ω—É—Ç—ã + 1000));
  }

  private async –ø–æ–ª—É—á–∏—Ç—å–í—Å–µ–û—Å—Ç–∞—Ç–∫–∏(): Promise<any[]> {
    // –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è - –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–∞ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
    const –æ—Å—Ç–∞—Ç–∫–∏ = await this.api.pricesStocks.getStocks({
      filter: { visibility: 'VISIBLE' },
      limit: 1000
    });
    
    return –æ—Å—Ç–∞—Ç–∫–∏.items || [];
  }
}
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[API –¶–µ–Ω—ã –∏ –û—Å—Ç–∞—Ç–∫–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏.md)** - –û—Å–Ω–æ–≤–Ω–æ–π –æ–±–∑–æ—Ä API
- **[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ü–µ–Ω—ã.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ü–µ–Ω—ã.md)** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω
- **[–¢–∞–π–º–µ—Ä—ã –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ç–∞–π–º–µ—Ä—ã.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ç–∞–π–º–µ—Ä—ã.md)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏ —Ü–µ–Ω

---

**–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–í–µ—Ä—Å–∏–∏ API**: v2, v4  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 3 –º–µ—Ç–æ–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–∞–º–∏