# –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã RFBS Returns - Legacy Methods API

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –º–µ—Ç–æ–¥–∞–º RFBS Returns API, –∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è –∫ –æ—Ç–∫–ª—é—á–µ–Ω–∏—é. –≠—Ç–∏ –º–µ—Ç–æ–¥—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π `setAction()` –º–µ—Ç–æ–¥.

**‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û –ò –ë–£–î–ï–¢ –û–¢–ö–õ–Æ–ß–ï–ù–û** ‚Äî –≤—Å–µ –º–µ—Ç–æ–¥—ã –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –∑–∞–º–µ–Ω–µ–Ω—ã —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º `setAction()` –º–µ—Ç–æ–¥–æ–º.

## üìä –û–±–∑–æ—Ä —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤

**–í—Å–µ–≥–æ –º–µ—Ç–æ–¥–æ–≤: 5** ‚Äî legacy –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API

### üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (2 –º–µ—Ç–æ–¥–∞)
1. **compensate()** ‚Äî –í–µ—Ä–Ω—É—Ç—å —á–∞—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞ *(v2, —É—Å—Ç–∞—Ä–µ–ª)*
2. **returnMoney()** ‚Äî –í–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é *(v2, —É—Å—Ç–∞—Ä–µ–ª)*

### üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (3 –º–µ—Ç–æ–¥–∞)
3. **receiveReturn()** ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É *(v2, —É—Å—Ç–∞—Ä–µ–ª)*
4. **reject()** ‚Äî –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç *(v2, —É—Å—Ç–∞—Ä–µ–ª)*
5. **verify()** ‚Äî –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç *(v2, —É—Å—Ç–∞—Ä–µ–ª)*

---

## üîß –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É API

| –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥ | –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ | –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ |
|------------------|-------------------|-----------------|
| `compensate()` | `setAction({ action: 'compensate' })` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| `returnMoney()` | `setAction({ action: 'return_money' })` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| `receiveReturn()` | `setAction({ action: 'receive_return' })` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| `reject()` | `setAction({ action: 'reject' })` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| `verify()` | `setAction({ action: 'approve' })` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- **Q1 2024**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
- **Q2 2024**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤
- **Q3 2024**: –ê–∫—Ç–∏–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞
- **Q4 2024**: –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤

---

## üìö TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤

### –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è (compensate)

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å —á–∞—Å—Ç–∏—á–Ω–æ–π –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (–£–°–¢–ê–†–ï–õ)
 * Partial compensation request (DEPRECATED)
 * 
 * @deprecated –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'compensate' }) –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
 */
interface RfbsReturnsCompensateRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** –°—É–º–º–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ */
  compensation_amount: number;
  
  /** –ü—Ä–∏—á–∏–Ω–∞ —á–∞—Å—Ç–∏—á–Ω–æ–π –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ */
  reason?: string;
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–æ–¥–∞–≤—Ü–∞ */
  comment?: string;
  
  /** –ö–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ */
  compensate_shipping?: boolean;
  
  readonly [key: string]: unknown;
}

/**
 * –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
 * Empty response for deprecated methods
 */
interface RfbsReturnsEmptyResponse {
  /** –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ (–º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å) */
  result?: 'ok';
  
  readonly [key: string]: unknown;
}
```

### –ü–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥ (returnMoney)

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å –ø–æ–ª–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–Ω–µ–≥ (–£–°–¢–ê–†–ï–õ)
 * Full money return request (DEPRECATED)
 * 
 * @deprecated –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'return_money' }) –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
 */
interface RfbsReturnsReturnMoneyRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—É—é —Å—É–º–º—É */
  full_amount?: boolean;
  
  /** –ö–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ */
  compensate_shipping?: boolean;
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–æ–¥–∞–≤—Ü–∞ */
  comment?: string;
  
  readonly [key: string]: unknown;
}
```

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è (receiveReturn)

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ (–£–°–¢–ê–†–ï–õ)
 * Receive return confirmation request (DEPRECATED)
 * 
 * @deprecated –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'receive_return' }) –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
 */
interface RfbsReturnsReceiveReturnRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** –î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ */
  received_at?: string;
  
  /** –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ */
  condition?: string;
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ */
  condition_comment?: string;
  
  readonly [key: string]: unknown;
}
```

### –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (reject)

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ (–£–°–¢–ê–†–ï–õ)
 * Return rejection request (DEPRECATED)
 * 
 * @deprecated –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'reject' }) –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
 */
interface RfbsReturnsRejectRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –ø—Ä–∏—á–∏–Ω–æ–π –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è */
  comment: string;
  
  /** –ö–æ–¥ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è */
  rejection_code?: string;
  
  readonly [key: string]: unknown;
}
```

### –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (verify)

```typescript
/**
 * –ó–∞–ø—Ä–æ—Å –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ (–£–°–¢–ê–†–ï–õ)
 * Return approval request (DEPRECATED)
 * 
 * @deprecated –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'approve' }) –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
 */
interface RfbsReturnsVerifyRequest {
  /** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç */
  return_id: number;
  
  /** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–æ–¥–∞–≤—Ü–∞ */
  comment?: string;
  
  /** –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–∞ */
  expected_return_date?: string;
  
  readonly [key: string]: unknown;
}
```

---

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### –ú–∏–≥—Ä–∞—Ü–∏—è compensate() ‚Üí setAction()

```typescript
// ‚ùå –£–°–¢–ê–†–ï–õ–û - –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.compensate({
  return_id: 123456,
  compensation_amount: 500,
  reason: '–ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –∑–∞ –¥–µ—Ñ–µ–∫—Ç',
  comment: '–¢–æ–≤–∞—Ä –∏–º–µ–µ—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ—Ñ–µ–∫—Ç'
});

// ‚úÖ –°–û–í–†–ï–ú–ï–ù–ù–´–ô –°–ü–û–°–û–ë - –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.setAction({
  return_id: 123456,
  action: 'compensate',
  compensation_amount: 500,
  comment: '–ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –∑–∞ –¥–µ—Ñ–µ–∫—Ç. –¢–æ–≤–∞—Ä –∏–º–µ–µ—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ—Ñ–µ–∫—Ç.',
  metadata: {
    internal_notes: '–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ compensate() –º–µ—Ç–æ–¥–∞'
  }
});
```

### –ú–∏–≥—Ä–∞—Ü–∏—è returnMoney() ‚Üí setAction()

```typescript
// ‚ùå –£–°–¢–ê–†–ï–õ–û - –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.returnMoney({
  return_id: 123456,
  full_amount: true,
  compensate_shipping: true,
  comment: '–¢–æ–≤–∞—Ä –æ–∫–∞–∑–∞–ª—Å—è –±—Ä–∞–∫–æ–≤–∞–Ω–Ω—ã–º'
});

// ‚úÖ –°–û–í–†–ï–ú–ï–ù–ù–´–ô –°–ü–û–°–û–ë - –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.setAction({
  return_id: 123456,
  action: 'return_money',
  comment: '–¢–æ–≤–∞—Ä –æ–∫–∞–∑–∞–ª—Å—è –±—Ä–∞–∫–æ–≤–∞–Ω–Ω—ã–º',
  compensate_shipping: true,
  metadata: {
    internal_notes: '–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ returnMoney() –º–µ—Ç–æ–¥–∞'
  }
});
```

### –ú–∏–≥—Ä–∞—Ü–∏—è receiveReturn() ‚Üí setAction()

```typescript
// ‚ùå –£–°–¢–ê–†–ï–õ–û - –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï  
await rfbsReturnsApi.receiveReturn({
  return_id: 123456,
  received_at: '2024-01-20T10:00:00Z',
  condition: 'good',
  condition_comment: '–¢–æ–≤–∞—Ä –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏'
});

// ‚úÖ –°–û–í–†–ï–ú–ï–ù–ù–´–ô –°–ü–û–°–û–ë - –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.setAction({
  return_id: 123456,
  action: 'receive_return',
  comment: '–¢–æ–≤–∞—Ä –ø–æ–ª—É—á–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω. –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Ö–æ—Ä–æ—à–µ–µ',
  metadata: {
    item_condition: 'good',
    internal_notes: '–¢–æ–≤–∞—Ä –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å receiveReturn()'
  }
});
```

### –ú–∏–≥—Ä–∞—Ü–∏—è reject() ‚Üí setAction()

```typescript
// ‚ùå –£–°–¢–ê–†–ï–õ–û - –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.reject({
  return_id: 123456,
  comment: '–ü—Ä–µ–≤—ã—à–µ–Ω —Å—Ä–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ–ª–∏—Ç–∏–∫–µ',
  rejection_code: 'TIME_EXPIRED'
});

// ‚úÖ –°–û–í–†–ï–ú–ï–ù–ù–´–ô –°–ü–û–°–û–ë - –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.setAction({
  return_id: 123456,
  action: 'reject',
  comment: '–ü—Ä–µ–≤—ã—à–µ–Ω —Å—Ä–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ–ª–∏—Ç–∏–∫–µ',
  metadata: {
    rejection_reason: 'time_expired',
    internal_notes: '–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ reject() –º–µ—Ç–æ–¥–∞'
  }
});
```

### –ú–∏–≥—Ä–∞—Ü–∏—è verify() ‚Üí setAction()

```typescript
// ‚ùå –£–°–¢–ê–†–ï–õ–û - –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï
await rfbsReturnsApi.verify({
  return_id: 123456,
  comment: '–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞',
  expected_return_date: '2024-01-25T00:00:00Z'
});

// ‚úÖ –°–û–í–†–ï–ú–ï–ù–ù–´–ô –°–ü–û–°–û–ë - –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï  
await rfbsReturnsApi.setAction({
  return_id: 123456,
  action: 'approve',
  comment: '–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞. –û–∂–∏–¥–∞–µ–º –≤–æ–∑–≤—Ä–∞—Ç –¥–æ 25.01.2024',
  metadata: {
    internal_notes: '–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ verify() –º–µ—Ç–æ–¥–∞'
  }
});
```

---

## üõ†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### –£—Ç–∏–ª–∏—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞

```typescript
/**
 * –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
 * Migration utility for deprecated methods
 */
export class RfbsReturnsLegacyMigrator {
  constructor(
    private readonly rfbsReturnsApi: RfbsReturnsApi
  ) {}

  /**
   * –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ compensate() —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   * Wrapper for deprecated compensate() with logging
   */
  async compensateWithWarning(request: RfbsReturnsCompensateRequest): Promise<any> {
    console.warn(`‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û: compensate() –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'compensate' })`);
    console.warn(`üìÖ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤ Q4 2024`);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
    return await this.rfbsReturnsApi.setAction({
      return_id: request.return_id,
      action: 'compensate',
      compensation_amount: request.compensation_amount,
      comment: request.comment || request.reason || '–ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è',
      compensate_shipping: request.compensate_shipping,
      metadata: {
        internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å compensate()',
        legacy_method: 'compensate',
        migration_date: new Date().toISOString()
      }
    });
  }

  /**
   * –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ returnMoney() —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   * Wrapper for deprecated returnMoney() with logging
   */
  async returnMoneyWithWarning(request: RfbsReturnsReturnMoneyRequest): Promise<any> {
    console.warn(`‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û: returnMoney() –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'return_money' })`);
    
    return await this.rfbsReturnsApi.setAction({
      return_id: request.return_id,
      action: 'return_money',
      comment: request.comment || '–í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞',
      compensate_shipping: request.compensate_shipping,
      metadata: {
        internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å returnMoney()',
        legacy_method: 'returnMoney',
        migration_date: new Date().toISOString()
      }
    });
  }

  /**
   * –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ receiveReturn() —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   * Wrapper for deprecated receiveReturn() with logging
   */
  async receiveReturnWithWarning(request: RfbsReturnsReceiveReturnRequest): Promise<any> {
    console.warn(`‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û: receiveReturn() –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'receive_return' })`);
    
    return await this.rfbsReturnsApi.setAction({
      return_id: request.return_id,
      action: 'receive_return',
      comment: request.condition_comment || `–¢–æ–≤–∞—Ä –ø–æ–ª—É—á–µ–Ω –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏: ${request.condition || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`,
      metadata: {
        item_condition: request.condition as any,
        received_at: request.received_at,
        internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å receiveReturn()',
        legacy_method: 'receiveReturn',
        migration_date: new Date().toISOString()
      }
    });
  }

  /**
   * –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ reject() —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   * Wrapper for deprecated reject() with logging
   */
  async rejectWithWarning(request: RfbsReturnsRejectRequest): Promise<any> {
    console.warn(`‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û: reject() –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'reject' })`);
    
    const rejectionReasonMap: Record<string, string> = {
      'TIME_EXPIRED': 'time_expired',
      'POLICY_VIOLATION': 'policy_violation',
      'CONDITION_UNACCEPTABLE': 'condition_unacceptable'
    };
    
    return await this.rfbsReturnsApi.setAction({
      return_id: request.return_id,
      action: 'reject',
      comment: request.comment,
      metadata: {
        rejection_reason: rejectionReasonMap[request.rejection_code || ''] || 'other',
        internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å reject()',
        legacy_method: 'reject',
        legacy_rejection_code: request.rejection_code,
        migration_date: new Date().toISOString()
      }
    });
  }

  /**
   * –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ verify() —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   * Wrapper for deprecated verify() with logging
   */
  async verifyWithWarning(request: RfbsReturnsVerifyRequest): Promise<any> {
    console.warn(`‚ö†Ô∏è –£–°–¢–ê–†–ï–õ–û: verify() –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setAction({ action: 'approve' })`);
    
    return await this.rfbsReturnsApi.setAction({
      return_id: request.return_id,
      action: 'approve',
      comment: request.comment || '–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞',
      metadata: {
        expected_return_date: request.expected_return_date,
        internal_notes: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å verify()',
        legacy_method: 'verify',
        migration_date: new Date().toISOString()
      }
    });
  }

  /**
   * –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ legacy –∫–æ–¥–∞
   * Legacy code compatibility check
   */
  async checkLegacyCompatibility(): Promise<{
    supportedUntil: string;
    currentDate: string;
    daysRemaining: number;
    recommendedActions: string[];
  }> {
    const supportEndDate = new Date('2024-12-31');
    const currentDate = new Date();
    const daysRemaining = Math.max(0, Math.floor(
      (supportEndDate.getTime() - currentDate.getTime()) / (1000 * 60 * 60 * 24)
    ));

    const recommendedActions = [];
    
    if (daysRemaining < 90) {
      recommendedActions.push('üö® –ö–†–ò–¢–ò–ß–ù–û: –î–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω–µ–µ 90 –¥–Ω–µ–π! –°—Ä–æ—á–Ω–æ –º–∏–≥—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–æ–≤—ã–π API');
    } else if (daysRemaining < 180) {
      recommendedActions.push('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –î–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω–µ–µ 6 –º–µ—Å—è—Ü–µ–≤. –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é');
    } else {
      recommendedActions.push('üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –ù–∞—á–Ω–∏—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–π API');
    }

    recommendedActions.push('üìñ –ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ setAction() –º–µ—Ç–æ–¥–∞');
    recommendedActions.push('üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ');
    recommendedActions.push('üîÑ –°–æ–∑–¥–∞–π—Ç–µ –ø–ª–∞–Ω –ø–æ—ç—Ç–∞–ø–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏');

    return {
      supportedUntil: supportEndDate.toISOString().split('T')[0],
      currentDate: currentDate.toISOString().split('T')[0],
      daysRemaining,
      recommendedActions
    };
  }

  /**
   * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
   * Generate deprecated methods usage report
   */
  generateMigrationReport(): {
    methods: Array<{
      name: string;
      status: 'deprecated';
      replacement: string;
      complexity: 'low' | 'medium' | 'high';
      estimatedEffort: string;
    }>;
    totalMethods: number;
    migrationGuide: string;
  } {
    const methods = [
      {
        name: 'compensate()',
        status: 'deprecated' as const,
        replacement: 'setAction({ action: "compensate" })',
        complexity: 'low' as const,
        estimatedEffort: '2-4 —á–∞—Å–∞'
      },
      {
        name: 'returnMoney()',
        status: 'deprecated' as const,
        replacement: 'setAction({ action: "return_money" })',
        complexity: 'low' as const,
        estimatedEffort: '1-2 —á–∞—Å–∞'
      },
      {
        name: 'receiveReturn()',
        status: 'deprecated' as const,
        replacement: 'setAction({ action: "receive_return" })',
        complexity: 'medium' as const,
        estimatedEffort: '4-6 —á–∞—Å–æ–≤'
      },
      {
        name: 'reject()',
        status: 'deprecated' as const,
        replacement: 'setAction({ action: "reject" })',
        complexity: 'low' as const,
        estimatedEffort: '1-2 —á–∞—Å–∞'
      },
      {
        name: 'verify()',
        status: 'deprecated' as const,
        replacement: 'setAction({ action: "approve" })',
        complexity: 'low' as const,
        estimatedEffort: '1-2 —á–∞—Å–∞'
      }
    ];

    return {
      methods,
      totalMethods: methods.length,
      migrationGuide: '–°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä–∞–º –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RfbsReturnsLegacyMigrator –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.'
    };
  }
}
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```typescript
import { RfbsReturnsApi } from 'daytona-ozon-seller-api';

// –°–æ–∑–¥–∞–µ–º –º–∏–≥—Ä–∞—Ç–æ—Ä –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
const migrator = new RfbsReturnsLegacyMigrator(rfbsReturnsApi);

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–∏–æ–¥
const processReturnWithMigration = async (returnId: number) => {
  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
    const compatibility = await migrator.checkLegacyCompatibility();
    console.log(`‚è≥ –î–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è legacy API: ${compatibility.daysRemaining} –¥–Ω–µ–π`);
    
    if (compatibility.daysRemaining < 30) {
      console.error('üö® –ö–†–ò–¢–ò–ß–ù–û: Legacy API –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω –º–µ–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü!');
    }

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–≥—Ä–∞—Ç–æ—Ä –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
    // –≠—Ç–æ –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π API
    await migrator.compensateWithWarning({
      return_id: returnId,
      compensation_amount: 500,
      reason: '–ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è'
    });
    
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏:', error);
  }
};

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –º–∏–≥—Ä–∞—Ü–∏–∏
const generateMigrationAnalysis = async () => {
  const report = migrator.generateMigrationReport();
  
  console.log('üìä –ê–Ω–∞–ª–∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ RFBS Returns API:');
  console.log(`–í—Å–µ–≥–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤: ${report.totalMethods}`);
  
  console.log('\nüìù –ú–µ—Ç–æ–¥—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏:');
  report.methods.forEach(method => {
    console.log(`  ‚Ä¢ ${method.name}`);
    console.log(`    ‚Üí ${method.replacement}`);
    console.log(`    –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${method.complexity}`);
    console.log(`    –í—Ä–µ–º—è: ${method.estimatedEffort}`);
    console.log('');
  });
  
  console.log('üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏:');
  console.log(report.migrationGuide);
  
  return report;
};
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –≤ –∫–æ–¥–µ

```typescript
/**
 * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ –∫–æ–¥–µ
 * Automatic search and replace of deprecated methods in code
 */
class LegacyCodeReplacer {
  private readonly replacements = new Map([
    [
      /\.compensate\s*\(\s*{([^}]+)}\s*\)/g,
      (match: string, params: string) => {
        // –ü–∞—Ä—Å–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
        return `.setAction({\n  action: 'compensate',\n  ${params.trim()}\n})`;
      }
    ],
    [
      /\.returnMoney\s*\(\s*{([^}]+)}\s*\)/g,
      (match: string, params: string) => {
        return `.setAction({\n  action: 'return_money',\n  ${params.trim()}\n})`;
      }
    ],
    [
      /\.verify\s*\(\s*{([^}]+)}\s*\)/g,
      (match: string, params: string) => {
        return `.setAction({\n  action: 'approve',\n  ${params.trim()}\n})`;
      }
    ]
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–º–µ–Ω—ã...
  ]);

  replaceInFile(fileContent: string): string {
    let updatedContent = fileContent;
    
    for (const [pattern, replacement] of this.replacements) {
      updatedContent = updatedContent.replace(pattern, replacement as any);
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ –º–∏–≥—Ä–∞—Ü–∏–∏
    if (updatedContent !== fileContent) {
      updatedContent = `// ‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ú–ò–ì–†–ò–†–û–í–ê–ù–û: —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ RFBS Returns –º–µ—Ç–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ setAction()\n// –î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏: ${new Date().toISOString().split('T')[0]}\n\n${updatedContent}`;
    }
    
    return updatedContent;
  }

  generateMigrationScript(): string {
    return `
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ RFBS Returns API

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é RFBS Returns API..."

# –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ TypeScript —Ñ–∞–π–ª—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
grep -r "\\.(compensate|returnMoney|receiveReturn|reject|verify)(" . --include="*.ts" --include="*.tsx" > legacy_usage.txt

if [ -s legacy_usage.txt ]; then
    echo "‚ö†Ô∏è –ù–∞–π–¥–µ–Ω—ã —Ñ–∞–π–ª—ã —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:"
    cat legacy_usage.txt
    echo ""
    echo "üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–ª–µ–¥—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤:"
    echo "  ‚Ä¢ compensate() ‚Üí setAction({ action: 'compensate' })"
    echo "  ‚Ä¢ returnMoney() ‚Üí setAction({ action: 'return_money' })"
    echo "  ‚Ä¢ receiveReturn() ‚Üí setAction({ action: 'receive_return' })"
    echo "  ‚Ä¢ reject() ‚Üí setAction({ action: 'reject' })"
    echo "  ‚Ä¢ verify() ‚Üí setAction({ action: 'approve' })"
else
    echo "‚úÖ –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –æ—Ç–∫–ª—é—á–µ–Ω–∏—é legacy API."
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç—ã
grep -r "RfbsReturns.*Request" . --include="*.ts" --include="*.tsx" > legacy_types.txt
if [ -s legacy_types.txt ]; then
    echo "üì¶ –ù–∞–π–¥–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ç–∏–ø–æ–≤ - —Ç–∞–∫–∂–µ —Ç—Ä–µ–±—É—é—Ç –º–∏–≥—Ä–∞—Ü–∏–∏"
fi

rm -f legacy_usage.txt legacy_types.txt
echo "‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω"
`;
  }
}
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```typescript
/**
 * –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ RFBS Returns API
 * RFBS Returns API migration plan
 */
interface MigrationPlan {
  phases: Array<{
    phase: number;
    name: string;
    duration: string;
    tasks: string[];
    deliverables: string[];
  }>;
  risks: string[];
  rollbackPlan: string[];
}

const createMigrationPlan = (): MigrationPlan => ({
  phases: [
    {
      phase: 1,
      name: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑',
      duration: '1 –Ω–µ–¥–µ–ª—è',
      tasks: [
        '–ê—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è legacy –º–µ—Ç–æ–¥–æ–≤',
        '–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π',
        '–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã —Å –Ω–æ–≤—ã–º API',
        '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏'
      ],
      deliverables: [
        '–û—Ç—á–µ—Ç –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ legacy –º–µ—Ç–æ–¥–æ–≤',
        '–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏',
        '–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é'
      ]
    },
    {
      phase: 2,
      name: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
      duration: '2-3 –Ω–µ–¥–µ–ª–∏',
      tasks: [
        '–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ –Ω–∞ –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã',
        '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ TypeScript',
        '–°–æ–∑–¥–∞–Ω–∏–µ wrapper-–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞',
        '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ API'
      ],
      deliverables: [
        '–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ —Å –Ω–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏',
        '–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤',
        '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º'
      ]
    },
    {
      phase: 3,
      name: '–ü–æ—ç—Ç–∞–ø–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ',
      duration: '1-2 –Ω–µ–¥–µ–ª–∏',
      tasks: [
        '–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ',
        '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
        '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ',
        '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã –Ω–æ–≤–æ–≥–æ API'
      ],
      deliverables: [
        '–†–∞–±–æ—Ç–∞—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ –ø—Ä–æ–¥—É–∫—Ü–∏–∏',
        '–û—Ç—á–µ—Ç—ã –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏',
        '–ü–ª–∞–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞'
      ]
    }
  ],
  risks: [
    '–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è API –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É',
    'Legacy –º–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω—ã —Ä–∞–Ω—å—à–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–≥–æ —Å—Ä–æ–∫–∞',
    '–ù–µ–ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –≤ –ø—Ä–æ–¥—É–∫—Ü–∏–∏',
    '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —Å—Ç–∞—Ä–æ–µ API'
  ],
  rollbackPlan: [
    '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å legacy –æ–±–µ—Ä—Ç–∫–∏ –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∞',
    '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã',
    '–û–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏',
    '–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –æ—Ç–∫–∞—Ç–∞'
  ]
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
const executeMigrationPlan = async () => {
  const plan = createMigrationPlan();
  console.log('üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ RFBS Returns API:');
  
  plan.phases.forEach((phase, index) => {
    console.log(`\n${phase.phase}. ${phase.name} (${phase.duration})`);
    console.log('–ó–∞–¥–∞—á–∏:');
    phase.tasks.forEach(task => console.log(`  ‚Ä¢ ${task}`));
    console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:');
    phase.deliverables.forEach(deliverable => console.log(`  ‚úì ${deliverable}`));
  });
  
  console.log('\n‚ö†Ô∏è –†–∏—Å–∫–∏:');
  plan.risks.forEach(risk => console.log(`  ‚Ä¢ ${risk}`));
  
  console.log('\nüîô –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞:');
  plan.rollbackPlan.forEach(step => console.log(`  ‚Ä¢ ${step}`));
};
```

### –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

```markdown
## üìã –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ RFBS Returns API

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω –∞—É–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è legacy –º–µ—Ç–æ–¥–æ–≤
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Å–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã –∏ –º–æ–¥—É–ª–∏
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞

### –ö–æ–¥
- [ ] –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `compensate()` –Ω–∞ `setAction({ action: 'compensate' })`
- [ ] –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `returnMoney()` –Ω–∞ `setAction({ action: 'return_money' })`
- [ ] –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `receiveReturn()` –Ω–∞ `setAction({ action: 'receive_return' })`
- [ ] –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `reject()` –Ω–∞ `setAction({ action: 'reject' })`  
- [ ] –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `verify()` –Ω–∞ `setAction({ action: 'approve' })`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã TypeScript
- [ ] –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã legacy —Ç–∏–ø–æ–≤

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤ API
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –°–æ–∑–¥–∞–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤ –∫–æ–¥–µ
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ staging —Å—Ä–µ–¥–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤—ã—Ö API –≤—ã–∑–æ–≤–æ–≤
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞
- [ ] –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏ –Ω–æ–≤–æ–≥–æ API
- [ ] –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- [ ] –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- [ ] –ö–æ–º–∞–Ω–¥–∞ –æ–±—É—á–µ–Ω–∞ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ–≤—ã–º API
```

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –º–µ—Ç–æ–¥–∞–º —Å –ø–ª–∞–Ω–æ–º –º–∏–≥—Ä–∞—Ü–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ –∏ —á–µ–∫-–ª–∏—Å—Ç–æ–º. –¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ workflow.