# 26. API Premium

**API Premium** - –ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ Premium –∏ Premium Plus –≤ OZON Seller API.

## –û–±–∑–æ—Ä

API Premium –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ Premium –∏–ª–∏ Premium Plus. –≠—Ç–æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –≤–∫–ª—é—á–∞–µ—Ç 8 –º–µ—Ç–æ–¥–æ–≤, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã—Ö –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, —á–∞—Ç–æ–≤ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–æ–≤. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤ —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥–ø–∏—Å–∫—É Premium Plus –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ì–ª—É–±–æ–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫–∞–∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç –≤–∞—à–∏ —Ç–æ–≤–∞—Ä—ã
- **–ü—Ä—è–º–æ–µ –æ–±—â–µ–Ω–∏–µ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏**: –ß–∞—Ç—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è —Å–µ—Ä–≤–∏—Å–∞
- **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å**: –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- **–ü—Ä–µ–º–∏—É–º –º–µ—Ç—Ä–∏–∫–∏**: –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –£—Ä–æ–≤–Ω–∏ –ø–æ–¥–ø–∏—Å–æ–∫
- **Premium**: –ë–∞–∑–æ–≤—ã–µ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Premium Plus**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º, –≤–∫–ª—é—á–∞—è —á–∞—Ç—ã –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å

---

## üìä –ú–µ—Ç–æ–¥—ã API

### üìà –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

#### 1. **getAnalyticsData** - –î–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (Premium Plus)
–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∏–∑–º–µ—Ä–µ–Ω–∏—è–º –∏ –º–µ—Ç—Ä–∏–∫–∞–º.

```typescript
async getAnalyticsData(
  request: PremiumAnalyticsGetDataRequest,
  options?: RequestOptions
): Promise<PremiumAnalyticsGetDataResponse>
```

**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Premium Plus**

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ –±–æ–ª–µ–µ 1 —Ä–∞–∑–∞ –≤ –º–∏–Ω—É—Ç—É
- –î–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞
- –° –ø–æ–¥–ø–∏—Å–∫–æ–π Premium Plus –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–µ—Ç

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumAnalyticsGetDataRequest {
  date_from: string;                        // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞ (YYYY-MM-DD)
  date_to: string;                          // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ (YYYY-MM-DD)
  dimension: AnalyticsDimension[];          // –ò–∑–º–µ—Ä–µ–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  metrics: AnalyticsMetric[];               // –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞
  limit?: number;                           // –õ–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)
  offset?: number;                          // –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  filters?: Array<{                         // –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
    field: string;                          // –ü–æ–ª–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    values: string[];                       // –ó–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞
  }>;
  sort?: Array<{                           // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    field: string;                          // –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    direction: 'ASC' | 'DESC';              // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  }>;
}

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
type AnalyticsDimension = 
  | 'sku'              // –ü–æ —Ç–æ–≤–∞—Ä–∞–º (SKU)
  | 'day'              // –ü–æ –¥–Ω—è–º
  | 'week'             // –ü–æ –Ω–µ–¥–µ–ª—è–º
  | 'month'            // –ü–æ –º–µ—Å—è—Ü–∞–º
  | 'category1'        // –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —É—Ä–æ–≤–Ω—è 1
  | 'category2'        // –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —É—Ä–æ–≤–Ω—è 2
  | 'category3'        // –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —É—Ä–æ–≤–Ω—è 3
  | 'brand'            // –ü–æ –±—Ä–µ–Ω–¥–∞–º
  | 'warehouse'        // –ü–æ —Å–∫–ª–∞–¥–∞–º
  | 'region';          // –ü–æ —Ä–µ–≥–∏–æ–Ω–∞–º

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
type AnalyticsMetric = 
  | 'revenue'          // –í—ã—Ä—É—á–∫–∞
  | 'ordered_units'    // –ó–∞–∫–∞–∑–∞–Ω–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã
  | 'hits_view'        // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
  | 'hits_tocart'      // –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
  | 'session_view'     // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Å–µ—Å—Å–∏–π
  | 'conv_tocart'      // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
  | 'returns'          // –í–æ–∑–≤—Ä–∞—Ç—ã
  | 'cancellations'    // –û—Ç–º–µ–Ω—ã
  | 'revenue_return'   // –í—ã—Ä—É—á–∫–∞ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
  | 'position_category'; // –°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumAnalyticsGetDataResponse {
  result?: {
    data?: Array<{
      dimensions?: Record<AnalyticsDimension, string>; // –ó–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π
      metrics?: Record<AnalyticsMetric, number>;       // –ó–Ω–∞—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
    }>;
    totals?: Record<AnalyticsMetric, number>;          // –û–±—â–∏–µ –∏—Ç–æ–≥–∏ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º
  };
  timestamp?: string;                                  // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
}
```

### üîç –ü–æ–∏—Å–∫–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### 2. **getProductQueries** - –ó–∞–ø—Ä–æ—Å—ã —Ç–æ–≤–∞—Ä–æ–≤ (Premium/Premium Plus)
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –Ω–∞—Ö–æ–¥—è—Ç –≤–∞—à–∏ —Ç–æ–≤–∞—Ä—ã.

```typescript
async getProductQueries(
  request: PremiumProductQueriesRequest,
  options?: RequestOptions
): Promise<PremiumProductQueriesResponse>
```

**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Premium –∏–ª–∏ Premium Plus**

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumProductQueriesRequest {
  date_from?: string;                       // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞
  date_to?: string;                         // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
  skus?: string[];                          // –°–ø–∏—Å–æ–∫ SKU –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
  page_size?: number;                       // –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
  page_token?: string;                      // –¢–æ–∫–µ–Ω –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  sort_by?: QuerySortField;                 // –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  sort_dir?: 'ASC' | 'DESC';               // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
}

type QuerySortField = 
  | 'queries_count'    // –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤
  | 'ctr'              // –ü–æ CTR (Click Through Rate)
  | 'shows_count'      // –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–∫–∞–∑–æ–≤
  | 'clicks_count';    // –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–ª–∏–∫–æ–≤
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumProductQueriesResponse {
  items?: Array<{
    sku: string;                            // SKU —Ç–æ–≤–∞—Ä–∞
    queries_count: number;                  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    shows_count: number;                    // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–æ–≤
    clicks_count: number;                   // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤
    ctr: number;                            // CTR –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
    avg_position: number;                   // –°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è –≤ –ø–æ–∏—Å–∫–µ
    conversion_rate: number;                // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫–∏
  }>;
  next_page_token?: string;                 // –¢–æ–∫–µ–Ω —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  total_count?: number;                     // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
}
```

#### 3. **getProductQueriesDetails** - –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (Premium/Premium Plus)
–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.

```typescript
async getProductQueriesDetails(
  request: PremiumProductQueriesDetailsRequest,
  options?: RequestOptions
): Promise<PremiumProductQueriesDetailsResponse>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumProductQueriesDetailsRequest {
  date_from?: string;                       // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞
  date_to?: string;                         // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
  skus: string[];                           // –°–ø–∏—Å–æ–∫ SKU (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  limit_by_sku?: number;                    // –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ SKU (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
  page_size?: number;                       // –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
  page_token?: string;                      // –¢–æ–∫–µ–Ω –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  sort_by?: QueryDetailSortField;           // –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  sort_dir?: 'ASC' | 'DESC';               // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
}

type QueryDetailSortField = 
  | 'clicks'           // –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–ª–∏–∫–æ–≤
  | 'shows'            // –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–∫–∞–∑–æ–≤
  | 'ctr'              // –ü–æ CTR
  | 'position'         // –ü–æ —Å—Ä–µ–¥–Ω–µ–π –ø–æ–∑–∏—Ü–∏–∏
  | 'query';           // –ü–æ –∑–∞–ø—Ä–æ—Å—É (–∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π)
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumProductQueriesDetailsResponse {
  queries?: Array<{
    sku: string;                            // SKU —Ç–æ–≤–∞—Ä–∞
    query: string;                          // –¢–µ–∫—Å—Ç –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    clicks: number;                         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É
    shows: number;                          // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É
    ctr: number;                            // CTR –ø–æ –∑–∞–ø—Ä–æ—Å—É
    position: number;                       // –°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è –≤ –ø–æ–∏—Å–∫–µ
    avg_price: number;                      // –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ
    query_frequency: number;                // –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å)
  }>;
  next_page_token?: string;                 // –¢–æ–∫–µ–Ω —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  total_count?: number;                     // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
}
```

### üí¨ –ß–∞—Ç—ã —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏

#### 4. **sendChatMessage** - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (Premium Plus)
–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —á–∞—Ç.

```typescript
async sendChatMessage(
  request: PremiumChatSendMessageRequest,
  options?: RequestOptions
): Promise<PremiumChatSendMessageResponse>
```

**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Premium Plus**

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- **FBO**: 48 —á–∞—Å–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- **FBS/rFBS**: 72 —á–∞—Å–∞ –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ + 48 —á–∞—Å–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumChatSendMessageRequest {
  chat_id: string;                          // ID —á–∞—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  text: string;                             // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –¥–æ 4000 —Å–∏–º–≤–æ–ª–æ–≤)
  reply_to_message_id?: string;             // ID —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–≤–µ—á–∞–µ–º
}
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumChatSendMessageResponse {
  result?: {
    message_id: string;                     // ID –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    status: MessageStatus;                  // –°—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏
    sent_at: string;                        // –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
  };
  error?: string;                           // –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
}

type MessageStatus = 'SENT' | 'DELIVERED' | 'READ' | 'FAILED';
```

#### 5. **startChat** - –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ (Premium Plus)
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º –ø–æ –Ω–æ–º–µ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

```typescript
async startChat(
  request: PremiumChatStartRequest,
  options?: RequestOptions
): Promise<PremiumChatStartResponse>
```

**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Premium Plus**

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å—Ö–µ–º–∞–º:**
- **FBO**: –ß–∞—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å
- **FBS/rFBS**: –ü—Ä–æ–¥–∞–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 72 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∏–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumChatStartRequest {
  posting_number: string;                   // –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  initial_message?: string;                 // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
}
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumChatStartResponse {
  result?: {
    chat_id: string;                        // ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞
    posting_number: string;                 // –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    customer_id?: string;                   // ID –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
    created_at: string;                     // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞
  };
  error?: string;                           // –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
}
```

#### 6. **markChatAsRead** - –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö (Premium Plus)
–û—Ç–º–µ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö.

```typescript
async markChatAsRead(
  request: PremiumChatReadRequest,
  options?: RequestOptions
): Promise<PremiumChatReadResponse>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumChatReadRequest {
  chat_id: string;                          // ID —á–∞—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  message_id: string;                       // ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
}
```

#### 7. **getChatHistory** - –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ (Premium Plus)
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º.

```typescript
async getChatHistory(
  request: PremiumChatHistoryRequest,
  options?: RequestOptions
): Promise<PremiumChatHistoryResponse>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumChatHistoryRequest {
  chat_id: string;                          // ID —á–∞—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  limit?: number;                           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
  offset?: number;                          // –°–º–µ—â–µ–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –∏—Å—Ç–æ—Ä–∏–∏
  order?: 'ASC' | 'DESC';                  // –ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é DESC)
}
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumChatHistoryResponse {
  messages?: Array<{
    message_id: string;                     // ID —Å–æ–æ–±—â–µ–Ω–∏—è
    author: 'SELLER' | 'CUSTOMER' | 'SYSTEM'; // –ê–≤—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
    text: string;                           // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    created_at: string;                     // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    status: MessageStatus;                  // –°—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏—è
    reply_to_message_id?: string;           // ID —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–≤–µ—á–∞—é—Ç
  }>;
  total_count?: number;                     // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
  chat_status: ChatStatus;                  // –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —á–∞—Ç–∞
}

type ChatStatus = 'ACTIVE' | 'CLOSED' | 'BLOCKED';
```

### üìä –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã

#### 8. **getRealizationByDay** - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Premium Plus)
–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å.

```typescript
async getRealizationByDay(
  request: PremiumRealizationByDayRequest,
  options?: RequestOptions
): Promise<PremiumRealizationByDayResponse>
```

**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É Premium Plus**

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ –±–æ–ª–µ–µ —á–µ–º –∑–∞ 32 –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã—Ö –¥–Ω—è –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
- –û—Ç–º–µ–Ω—ã –∏ –Ω–µ–≤—ã–∫—É–ø—ã –Ω–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
interface PremiumRealizationByDayRequest {
  day: number;                              // –î–µ–Ω—å –º–µ—Å—è—Ü–∞ (1-31)
  month: number;                            // –ú–µ—Å—è—Ü (1-12)
  year: number;                             // –ì–æ–¥ (YYYY)
}
```

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface PremiumRealizationByDayResponse {
  rows?: Array<{
    name: string;                           // –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è
    quantity: number;                       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü
    amount: number;                         // –°—É–º–º–∞
    currency: string;                       // –í–∞–ª—é—Ç–∞ (RUB)
    percentage?: number;                    // –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –æ–±—â–µ–π —Å—É–º–º—ã
  }>;
  totals?: {
    total_quantity: number;                 // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    total_amount: number;                   // –û–±—â–∞—è —Å—É–º–º–∞
    currency: string;                       // –í–∞–ª—é—Ç–∞ –∏—Ç–æ–≥–æ–≤
  };
  report_date: string;                      // –î–∞—Ç–∞ –æ—Ç—á—ë—Ç–∞
  generated_at: string;                     // –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞
}
```

---

## üöÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

```typescript
import { OzonSellerAPI } from 'daytona-ozon-seller-api';

const api = new OzonSellerAPI({
  clientId: '–≤–∞—à-client-id',
  apiKey: '–≤–∞—à-api-key'
});

// –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤ (Premium Plus)
async function comprehensiveProductAnalysis() {
  console.log('üìä –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ Premium —Ñ—É–Ω–∫—Ü–∏–π...');

  // 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∑–∞ –º–µ—Å—è—Ü
  console.log('üìà –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏...');
  
  const analyticsData = await api.premium.getAnalyticsData({
    date_from: '2024-01-01',
    date_to: '2024-01-31',
    dimension: ['sku', 'week'],
    metrics: ['revenue', 'ordered_units', 'hits_view', 'conv_tocart', 'returns'],
    limit: 500,
    filters: [{
      field: 'category1',
      values: ['Electronics', 'Clothing']
    }],
    sort: [{
      field: 'revenue',
      direction: 'DESC'
    }]
  });

  // 2. –ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  console.log('üîç –ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤...');
  
  const topSkus = analyticsData.result?.data
    ?.slice(0, 10)
    ?.map(item => item.dimensions?.sku)
    ?.filter(Boolean) as string[];

  const productQueries = await api.premium.getProductQueries({
    date_from: '2024-01-01',
    date_to: '2024-01-31',
    skus: topSkus,
    page_size: 100,
    sort_by: 'ctr',
    sort_dir: 'DESC'
  });

  // 3. –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–æ–ø-—Ç–æ–≤–∞—Ä–æ–≤
  const queryDetails = await api.premium.getProductQueriesDetails({
    date_from: '2024-01-01',
    date_to: '2024-01-31',
    skus: topSkus.slice(0, 5), // –¢–æ–ø-5 —Ç–æ–≤–∞—Ä–æ–≤
    limit_by_sku: 20,
    page_size: 100,
    sort_by: 'clicks',
    sort_dir: 'DESC'
  });

  // 4. –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
  console.log('üìä –ó–∞–≥—Ä—É–∑–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤...');
  
  const dailyReports = [];
  for (let i = 1; i <= 7; i++) {
    const reportDate = new Date();
    reportDate.setDate(reportDate.getDate() - i);
    
    try {
      const dailyReport = await api.premium.getRealizationByDay({
        day: reportDate.getDate(),
        month: reportDate.getMonth() + 1,
        year: reportDate.getFullYear()
      });
      
      dailyReports.push({
        date: reportDate.toISOString().split('T')[0],
        data: dailyReport
      });
    } catch (error) {
      console.warn(`‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –∑–∞ ${reportDate.toISOString().split('T')[0]} –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã`);
    }
  }

  // –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  console.log('\nüéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–ï–ú–ò–ê–õ–¨–ù–û–ì–û –ê–ù–ê–õ–ò–ó–ê');
  console.log('=====================================');

  // –¢–æ–ø-—Ç–æ–≤–∞—Ä—ã –ø–æ –≤—ã—Ä—É—á–∫–µ
  console.log('\nüí∞ –¢–æ–ø-—Ç–æ–≤–∞—Ä—ã –ø–æ –≤—ã—Ä—É—á–∫–µ:');
  analyticsData.result?.data?.slice(0, 10).forEach((item, index) => {
    console.log(`${index + 1}. SKU: ${item.dimensions?.sku}`);
    console.log(`   –í—ã—Ä—É—á–∫–∞: ${item.metrics?.revenue} ‚ÇΩ`);
    console.log(`   –ó–∞–∫–∞–∑—ã: ${item.metrics?.ordered_units} —à—Ç.`);
    console.log(`   –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É: ${item.metrics?.conv_tocart?.toFixed(2)}%`);
  });

  // –ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  console.log('\nüîç –ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:');
  productQueries.items?.slice(0, 5).forEach((item, index) => {
    console.log(`${index + 1}. SKU: ${item.sku}`);
    console.log(`   CTR: ${item.ctr.toFixed(2)}%`);
    console.log(`   –°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è: ${item.avg_position}`);
    console.log(`   –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: ${item.queries_count}`);
  });

  // –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
  console.log('\nüìù –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:');
  const topQueries = queryDetails.queries?.slice(0, 10) || [];
  topQueries.forEach((query, index) => {
    console.log(`${index + 1}. "${query.query}" (SKU: ${query.sku})`);
    console.log(`   –ö–ª–∏–∫–∏: ${query.clicks}, –ü–æ–∫–∞–∑—ã: ${query.shows}`);
    console.log(`   CTR: ${query.ctr.toFixed(2)}%, –ü–æ–∑–∏—Ü–∏—è: ${query.position}`);
  });

  // –î–∏–Ω–∞–º–∏–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –≤—ã—Ä—É—á–∫–∏
  console.log('\nüìà –î–∏–Ω–∞–º–∏–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –≤—ã—Ä—É—á–∫–∏:');
  dailyReports.reverse().forEach(report => {
    const totalAmount = report.data.totals?.total_amount || 0;
    console.log(`${report.date}: ${totalAmount} ‚ÇΩ`);
  });

  return {
    analyticsData: analyticsData.result?.data?.length || 0,
    queriesAnalyzed: productQueries.items?.length || 0,
    queryDetailsCount: queryDetails.queries?.length || 0,
    dailyReportsCount: dailyReports.length
  };
}
```

### –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —á–µ—Ä–µ–∑ Premium —á–∞—Ç—ã
class PremiumCustomerSupport {
  constructor(private api: OzonSellerAPI) {}

  async handleCustomerInquiries(): Promise<void> {
    console.log('üí¨ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏...');

    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Chat API
    // (–∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π Chat API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞)
    const activeChats = await this.getActiveChats();

    for (const chat of activeChats) {
      try {
        await this.processChat(chat);
      } catch (error) {
        console.error(`‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Ç–∞ ${chat.chatId}:`, error);
      }
    }

    console.log(`‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —á–∞—Ç–æ–≤: ${activeChats.length}`);
  }

  private async getActiveChats(): Promise<ActiveChat[]> {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ /v3/chat/list
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞
    return [
      {
        chatId: 'chat_123456',
        postingNumber: '12345-0001-1',
        lastMessageAt: '2024-01-15T10:30:00Z',
        unreadCount: 2,
        status: 'ACTIVE'
      },
      {
        chatId: 'chat_789012',
        postingNumber: '12345-0002-1',
        lastMessageAt: '2024-01-15T11:15:00Z',
        unreadCount: 1,
        status: 'ACTIVE'
      }
    ];
  }

  private async processChat(chat: ActiveChat): Promise<void> {
    console.log(`üí¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Ç–∞ ${chat.chatId}...`);

    // 1. –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞
    const history = await this.api.premium.getChatHistory({
      chat_id: chat.chatId,
      limit: 10,
      order: 'DESC'
    });

    // 2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    const lastMessages = history.messages?.slice(0, 3) || [];
    const needsResponse = this.analyzeNeedForResponse(lastMessages);

    if (needsResponse.shouldRespond) {
      // 3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
      const response = this.generateResponse(needsResponse.context);
      
      await this.api.premium.sendChatMessage({
        chat_id: chat.chatId,
        text: response,
        reply_to_message_id: needsResponse.replyToMessageId
      });

      console.log(`‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç–≤–µ—Ç –≤ —á–∞—Ç ${chat.chatId}`);

      // 4. –û—Ç–º–µ—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
      if (lastMessages.length > 0) {
        await this.api.premium.markChatAsRead({
          chat_id: chat.chatId,
          message_id: lastMessages[0].message_id
        });
      }
    }
  }

  private analyzeNeedForResponse(messages: any[]): ResponseAnalysis {
    const customerMessages = messages.filter(msg => msg.author === 'CUSTOMER');
    
    if (customerMessages.length === 0) {
      return { shouldRespond: false, context: 'NO_CUSTOMER_MESSAGES' };
    }

    const lastCustomerMessage = customerMessages[0];
    const messageText = lastCustomerMessage.text.toLowerCase();

    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞
    if (messageText.includes('–≥–¥–µ –∑–∞–∫–∞–∑') || messageText.includes('–∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∞')) {
      return {
        shouldRespond: true,
        context: 'DELIVERY_INQUIRY',
        replyToMessageId: lastCustomerMessage.message_id
      };
    }

    if (messageText.includes('–æ—Ç–º–µ–Ω–∏—Ç—å') || messageText.includes('–≤–æ–∑–≤—Ä–∞—Ç')) {
      return {
        shouldRespond: true,
        context: 'CANCELLATION_REQUEST',
        replyToMessageId: lastCustomerMessage.message_id
      };
    }

    if (messageText.includes('—Ä–∞–∑–º–µ—Ä') || messageText.includes('—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏')) {
      return {
        shouldRespond: true,
        context: 'PRODUCT_INQUIRY',
        replyToMessageId: lastCustomerMessage.message_id
      };
    }

    // –û–±—â–∏–π –≤–µ–∂–ª–∏–≤—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø—Ä–æ—á–∏—Ö —Å–ª—É—á–∞–µ–≤
    return {
      shouldRespond: true,
      context: 'GENERAL_INQUIRY',
      replyToMessageId: lastCustomerMessage.message_id
    };
  }

  private generateResponse(context: string): string {
    const responses = {
      'DELIVERY_INQUIRY': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Ç–µ—Ä–ø–µ–Ω–∏–µ! üì¶',
      'CANCELLATION_REQUEST': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ü–æ–Ω–∏–º–∞—é –≤–∞—à–µ –∂–µ–ª–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑. –ü—Ä–æ–≤–µ—Ä—è—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –∏ —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. üîÑ',
      'PRODUCT_INQUIRY': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –° —Ä–∞–¥–æ—Å—Ç—å—é –æ—Ç–≤–µ—á—É –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –æ —Ç–æ–≤–∞—Ä–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Ç–æ—á–Ω–∏—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç? üìù',
      'GENERAL_INQUIRY': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ. –Ø –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á—É –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—á—É –≤ –∫—Ä–∞—Ç—á–∞–π—à–∏–µ —Å—Ä–æ–∫–∏. üëã'
    };

    return responses[context] || responses['GENERAL_INQUIRY'];
  }

  async createProactiveChat(postingNumber: string, reason: string): Promise<void> {
    console.log(`üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è ${postingNumber}...`);

    try {
      const initialMessages = {
        'DELIVERY_DELAY': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–æ—Å—Ç–∞–≤–∫–∞ –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1 –¥–µ–Ω—å –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º. –ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞!',
        'QUALITY_CHECK': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–æ—à—ë–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞. –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ, —Å–∫–æ—Ä–æ –æ—Ç–ø—Ä–∞–≤–∏–º! üì¶‚úÖ',
        'SPECIAL_OFFER': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –Ω–∞—Å –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –•–æ—Ç–µ–ª–∏ –±—ã —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ? üéÅ'
      };

      const chat = await this.api.premium.startChat({
        posting_number: postingNumber,
        initial_message: initialMessages[reason] || '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –°–≤—è–∑—ã–≤–∞–µ–º—Å—è —Å –≤–∞–º–∏ –ø–æ –ø–æ–≤–æ–¥—É –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞.'
      });

      console.log(`‚úÖ –°–æ–∑–¥–∞–Ω –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç: ${chat.result?.chat_id}`);
    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞ –¥–ª—è ${postingNumber}:`, error);
    }
  }
}

interface ActiveChat {
  chatId: string;
  postingNumber: string;
  lastMessageAt: string;
  unreadCount: number;
  status: string;
}

interface ResponseAnalysis {
  shouldRespond: boolean;
  context: string;
  replyToMessageId?: string;
}
```

### –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞

```typescript
// –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ SEO
class SearchOptimizationAnalyzer {
  constructor(private api: OzonSellerAPI) {}

  async performSearchOptimizationAnalysis(): Promise<SearchOptimizationReport> {
    console.log('üîç –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∏—Å–∫–æ–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏...');

    // 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–∞—Ö
    const allProductQueries = await this.getAllProductQueries();
    
    // 2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    const searchAnalysis = await this.analyzeSearchPerformance(allProductQueries);
    
    // 3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    const optimizationRecommendations = this.generateOptimizationRecommendations(searchAnalysis);
    
    // 4. –°–æ–∑–¥–∞—ë–º –æ—Ç—á—ë—Ç
    const report = this.createOptimizationReport(searchAnalysis, optimizationRecommendations);
    
    this.printOptimizationReport(report);
    
    return report;
  }

  private async getAllProductQueries(): Promise<ProductQueryData[]> {
    const allQueries: ProductQueryData[] = [];
    let pageToken: string | undefined;

    do {
      const response = await this.api.premium.getProductQueries({
        date_from: '2024-01-01',
        date_to: '2024-01-31',
        page_size: 100,
        page_token: pageToken,
        sort_by: 'queries_count',
        sort_dir: 'DESC'
      });

      if (response.items) {
        allQueries.push(...response.items.map(item => ({
          ...item,
          efficiency_score: this.calculateEfficiencyScore(item)
        })));
      }

      pageToken = response.next_page_token;
    } while (pageToken);

    return allQueries;
  }

  private calculateEfficiencyScore(item: any): number {
    // –§–æ—Ä–º—É–ª–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: CTR * 40 + ConversionRate * 30 + (1/AvgPosition) * 30
    const ctrScore = Math.min(item.ctr * 4, 40); // –ú–∞–∫—Å–∏–º—É–º 40 –±–∞–ª–ª–æ–≤ –∑–∞ CTR
    const conversionScore = Math.min(item.conversion_rate * 3, 30); // –ú–∞–∫—Å–∏–º—É–º 30 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—é
    const positionScore = Math.min(30 / Math.max(item.avg_position, 1), 30); // –ú–∞–∫—Å–∏–º—É–º 30 –±–∞–ª–ª–æ–≤ –∑–∞ –ø–æ–∑–∏—Ü–∏—é
    
    return Number((ctrScore + conversionScore + positionScore).toFixed(2));
  }

  private async analyzeSearchPerformance(products: ProductQueryData[]): Promise<SearchAnalysis> {
    console.log('üìä –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞...');

    const totalProducts = products.length;
    const highPerformers = products.filter(p => p.efficiency_score >= 70);
    const lowPerformers = products.filter(p => p.efficiency_score < 30);
    const averageCTR = products.reduce((sum, p) => sum + p.ctr, 0) / totalProducts;
    const averagePosition = products.reduce((sum, p) => sum + p.avg_position, 0) / totalProducts;

    // –ê–Ω–∞–ª–∏–∑ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –Ω–∏–∑–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
    const poorPerformingSKUs = lowPerformers.slice(0, 5).map(p => p.sku);
    
    const detailedQueries = poorPerformingSKUs.length > 0 
      ? await this.api.premium.getProductQueriesDetails({
          skus: poorPerformingSKUs,
          limit_by_sku: 15,
          page_size: 100,
          sort_by: 'shows',
          sort_dir: 'DESC'
        })
      : { queries: [] };

    return {
      totalProducts,
      highPerformers: highPerformers.length,
      lowPerformers: lowPerformers.length,
      averageCTR: Number(averageCTR.toFixed(3)),
      averagePosition: Number(averagePosition.toFixed(1)),
      topProducts: products.slice(0, 10),
      bottomProducts: lowPerformers.slice(0, 10),
      inefficientQueries: detailedQueries.queries?.filter(q => q.ctr < 1) || []
    };
  }

  private generateOptimizationRecommendations(analysis: SearchAnalysis): OptimizationRecommendation[] {
    const recommendations: OptimizationRecommendation[] = [];

    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∏–∑–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Ç–æ–≤–∞—Ä–∞–º
    if (analysis.lowPerformers > analysis.totalProducts * 0.3) {
      recommendations.push({
        priority: 'HIGH',
        category: 'SEARCH_POSITION',
        title: '–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –≤ –ø–æ–∏—Å–∫–µ',
        description: `${analysis.lowPerformers} —Ç–æ–≤–∞—Ä–æ–≤ –∏–º–µ—é—Ç –Ω–∏–∑–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏`,
        actionItems: [
          '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏',
          '–£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ –æ–ø–∏—Å–∞–Ω–∏–π',
          '–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏',
          '–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–π –±—é–¥–∂–µ—Ç –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö SKU'
        ],
        expectedImpact: '–†–æ—Å—Ç CTR –Ω–∞ 15-25%, —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ 2-5 –ø—É–Ω–∫—Ç–æ–≤'
      });
    }

    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ CTR
    if (analysis.averageCTR < 2.0) {
      recommendations.push({
        priority: 'HIGH',
        category: 'CTR_OPTIMIZATION',
        title: '–ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤',
        description: `–°—Ä–µ–¥–Ω–∏–π CTR ${analysis.averageCTR}% –Ω–∏–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–≥–æ —É—Ä–æ–≤–Ω—è 2-3%`,
        actionItems: [
          'A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤',
          '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞',
          '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–ª–µ–∫–∞—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏–µ –±–µ–π–¥–∂–µ–π',
          '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö'
        ],
        expectedImpact: '–†–æ—Å—Ç CTR –Ω–∞ 20-40%, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 15-30%'
      });
    }

    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º
    if (analysis.inefficientQueries.length > 20) {
      recommendations.push({
        priority: 'MEDIUM',
        category: 'QUERY_OPTIMIZATION',
        title: '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤',
        description: `${analysis.inefficientQueries.length} –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–º–µ—é—Ç CTR –º–µ–Ω–µ–µ 1%`,
        actionItems: [
          '–ê–Ω–∞–ª–∏–∑ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤',
          '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ long-tail –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –æ–ø–∏—Å–∞–Ω–∏—è',
          '–°–æ–∑–¥–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã',
          '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–∞–º–ø–∞–Ω–∏–π –ø–æ –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º'
        ],
        expectedImpact: '–û—Ö–≤–∞—Ç –Ω–æ–≤—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —Ä–æ—Å—Ç –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 10-20%'
      });
    }

    return recommendations;
  }

  private createOptimizationReport(analysis: SearchAnalysis, recommendations: OptimizationRecommendation[]): SearchOptimizationReport {
    return {
      generated_at: new Date().toISOString(),
      analysis,
      recommendations,
      summary: {
        health_score: this.calculateHealthScore(analysis),
        priority_actions: recommendations.filter(r => r.priority === 'HIGH').length,
        estimated_impact: this.estimateOverallImpact(recommendations)
      }
    };
  }

  private calculateHealthScore(analysis: SearchAnalysis): number {
    const ctrScore = Math.min(analysis.averageCTR * 20, 40); // 40% –∑–∞ CTR
    const positionScore = Math.min(100 - analysis.averagePosition * 10, 30); // 30% –∑–∞ –ø–æ–∑–∏—Ü–∏—é
    const performanceRatio = (analysis.highPerformers / analysis.totalProducts) * 30; // 30% –∑–∞ –¥–æ–ª—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö
    
    return Number((ctrScore + positionScore + performanceRatio).toFixed(1));
  }

  private estimateOverallImpact(recommendations: OptimizationRecommendation[]): string {
    const highPriorityCount = recommendations.filter(r => r.priority === 'HIGH').length;
    const mediumPriorityCount = recommendations.filter(r => r.priority === 'MEDIUM').length;
    
    if (highPriorityCount >= 2) {
      return '–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –æ–∂–∏–¥–∞–µ—Ç—Å—è —Ä–æ—Å—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 25-40% –≤ —Ç–µ—á–µ–Ω–∏–µ 2-3 –º–µ—Å—è—Ü–µ–≤';
    } else if (highPriorityCount === 1 || mediumPriorityCount >= 2) {
      return '–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –æ–∂–∏–¥–∞–µ—Ç—Å—è —Ä–æ—Å—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 15-25% –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–µ—Å—è—Ü–µ–≤';
    } else {
      return '–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –æ–∂–∏–¥–∞–µ—Ç—Å—è —Ä–æ—Å—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 5-15% –≤ —Ç–µ—á–µ–Ω–∏–µ 1 –º–µ—Å—è—Ü–∞';
    }
  }

  private printOptimizationReport(report: SearchOptimizationReport): void {
    console.log('\nüéØ –û–¢–ß–Å–¢ –ü–û –ü–û–ò–°–ö–û–í–û–ô –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò');
    console.log('=====================================');
    
    console.log(`üìä –û–±—â–∏–π –∏–Ω–¥–µ–∫—Å –∑–¥–æ—Ä–æ–≤—å—è –ø–æ–∏—Å–∫–∞: ${report.summary.health_score}/100`);
    console.log(`üìà –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${report.analysis.totalProducts}`);
    console.log(`‚úÖ –í—ã—Å–æ–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤: ${report.analysis.highPerformers}`);
    console.log(`‚ö†Ô∏è –ù–∏–∑–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤: ${report.analysis.lowPerformers}`);
    console.log(`üéØ –°—Ä–µ–¥–Ω–∏–π CTR: ${report.analysis.averageCTR}%`);
    console.log(`üìç –°—Ä–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è: ${report.analysis.averagePosition}`);
    
    console.log('\nüî• –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:');
    report.recommendations.forEach((rec, index) => {
      const priorityIcon = rec.priority === 'HIGH' ? 'üö®' : '‚ö†Ô∏è';
      console.log(`\n${index + 1}. ${priorityIcon} ${rec.title} (${rec.priority})`);
      console.log(`   ${rec.description}`);
      console.log(`   üí° –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${rec.expectedImpact}`);
    });

    console.log(`\nüìà ${report.summary.estimated_impact}`);
  }
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
interface ProductQueryData {
  sku: string;
  queries_count: number;
  shows_count: number;
  clicks_count: number;
  ctr: number;
  avg_position: number;
  conversion_rate: number;
  efficiency_score: number;
}

interface SearchAnalysis {
  totalProducts: number;
  highPerformers: number;
  lowPerformers: number;
  averageCTR: number;
  averagePosition: number;
  topProducts: ProductQueryData[];
  bottomProducts: ProductQueryData[];
  inefficientQueries: any[];
}

interface OptimizationRecommendation {
  priority: 'HIGH' | 'MEDIUM' | 'LOW';
  category: string;
  title: string;
  description: string;
  actionItems: string[];
  expectedImpact: string;
}

interface SearchOptimizationReport {
  generated_at: string;
  analysis: SearchAnalysis;
  recommendations: OptimizationRecommendation[];
  summary: {
    health_score: number;
    priority_actions: number;
    estimated_impact: string;
  };
}
```

---

## üîÑ –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```mermaid
graph TD
    A[Premium –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞] --> B[–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏]
    B --> C[–ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤]
    C --> D[–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–≤–∞—Ä–∞–º]
    D --> E[–í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–æ–Ω]
    E --> F[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π]
    F --> G[–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–∏–π]
    G --> H[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤]
    H --> I{–¶–µ–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã?}
    I -->|–ù–µ—Ç| E
    I -->|–î–∞| J[–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫]
```

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å —á–∞—Ç–∞–º–∏
```mermaid
graph TD
    A[–ü–æ–∫—É–ø–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑] --> B{–°—Ö–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è}
    B -->|FBS/rFBS| C[–ü—Ä–æ–¥–∞–≤–µ—Ü –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç]
    B -->|FBO| D[–¢–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç —á–∞—Ç]
    C --> E[–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ]
    D --> F[–†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã]
    E --> G[–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π]
    F --> G
    G --> H[–û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö]
    H --> I[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏]
```

### –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
1. **CRM —Å–∏—Å—Ç–µ–º–∞** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –≤ —á–∞—Ç–∞—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
2. **–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏** ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –≤ –æ–±—â–∏–µ –¥–∞—à–±–æ—Ä–¥—ã
3. **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã SEO** ‚Üí –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** ‚Üí –ê–ª–µ—Ä—Ç—ã –æ –≤–∞–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö
5. **–ë–∏–ª–ª–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫
- **Premium**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–∏—Å–∫–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- **Premium Plus**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Premium + —á–∞—Ç—ã + –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã
- **–ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ù–µ –±–æ–ª–µ–µ 1 –∑–∞–ø—Ä–æ—Å–∞ –≤ –º–∏–Ω—É—Ç—É
- **–ß–∞—Ç—ã FBO**: 48 —á–∞—Å–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- **–ß–∞—Ç—ã FBS/rFBS**: 72 —á–∞—Å–∞ –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã**: –î–∞–Ω–Ω—ã–µ –Ω–µ –±–æ–ª–µ–µ —á–µ–º –∑–∞ 32 –¥–Ω—è
- **–†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è**: –î–æ 4000 —Å–∏–º–≤–æ–ª–æ–≤ –≤ —á–∞—Ç–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **–†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
- **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- **SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–í–µ—Ä—Å–∏–∏ API**: v1, v2, v3  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 8 –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ü–æ–¥–ø–∏—Å–∫–∞ Premium –∏–ª–∏ Premium Plus