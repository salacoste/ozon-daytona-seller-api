# 22.1 API –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏

**API –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω, –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∞–º–∏ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è OZON Seller API.

## –û–±–∑–æ—Ä

API –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–æ–≤, –≤–∫–ª—é—á–∞—è –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–Ω—ã, —Å—Ç–∞—Ä—ã–µ —Ü–µ–Ω—ã –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–∫–∏–¥–æ–∫, –ø—Ä–µ–º–∏—É–º-—Ü–µ–Ω—ã –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω**: –î–æ 100 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- **–ì–∏–±–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–Ω–∞, —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞, –ø—Ä–µ–º–∏—É–º-—Ü–µ–Ω–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∞–º–∏**: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —É—Ü–µ–Ω—ë–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
- **–õ–∏–º–∏—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ù–µ –±–æ–ª–µ–µ 10 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —á–∞—Å –Ω–∞ —Ç–æ–≤–∞—Ä

---

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏
1. **updatePrices** - –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Ç–æ–≤–∞—Ä–æ–≤
2. **getPrices** - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ü–µ–Ω–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤
3. **updateDiscountedProductDiscount** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∏–¥–∫–∏ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

---

## üõ†Ô∏è –î–µ—Ç–∞–ª–∏ –º–µ—Ç–æ–¥–æ–≤

## 1. updatePrices

–ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksImportPricesRequest {
  prices: Array<{
    offer_id?: string;            // ID —Ç–æ–≤–∞—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞ (–æ–¥–∏–Ω –∏–∑ offer_id/product_id –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
    product_id?: number;          // ID —Ç–æ–≤–∞—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ OZON
    price: string;                // –ù–æ–≤–∞—è —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    old_price?: string;           // –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–∫–∏–¥–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    premium_price?: string;       // –¶–µ–Ω–∞ –¥–ª—è Premium –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) 
    currency_code: string;        // –ö–æ–¥ –≤–∞–ª—é—Ç—ã (–æ–±—ã—á–Ω–æ RUB)
  }>;
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksImportPricesResponse {
  result?: Array<{
    offer_id?: string;            // ID —Ç–æ–≤–∞—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
    product_id?: number;          // ID —Ç–æ–≤–∞—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
    updated: boolean;             // –£—Å–ø–µ—à–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Ü–µ–Ω–∞
    errors?: string[];            // –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
  }>;
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ë–∞–∑–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω
```typescript
async function updateProductPrices() {
  const result = await api.pricesStocks.updatePrices({
    prices: [{
      offer_id: '–¢–û–í–ê–†001',
      price: '1500',
      old_price: '2000',           // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–∏–¥–∫—É —Å 2000 –¥–æ 1500
      currency_code: 'RUB'
    }, {
      offer_id: '–¢–û–í–ê–†002', 
      price: '999',
      old_price: '0',              // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É
      currency_code: 'RUB'
    }, {
      product_id: 123456,
      price: '750',
      premium_price: '700',        // –¶–µ–Ω–∞ –¥–ª—è Premium –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
      currency_code: 'RUB'
    }]
  });
  
  console.log(`üí∞ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω:`);
  result.result?.forEach(product => {
    if (product.updated) {
      console.log(`‚úÖ ${product.offer_id || product.product_id}: —Ü–µ–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞`);
    } else {
      console.log(`‚ùå ${product.offer_id || product.product_id}: –æ—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è`);
      product.errors?.forEach(error => console.log(`   - ${error}`));
    }
  });
  
  return result;
}
```

#### –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ —Å–∫–∏–¥–∫–∞–º–∏
```typescript
async function bulkPriceUpdate() {
  const products = [
    { offer_id: '–≠–õ–ï–ö–¢–†–û–ù–ò–ö–ê001', —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞: 15000, –Ω–æ–≤–∞—è_—Ü–µ–Ω–∞: 12000 },
    { offer_id: '–≠–õ–ï–ö–¢–†–û–ù–ò–ö–ê002', —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞: 8000, –Ω–æ–≤–∞—è_—Ü–µ–Ω–∞: 6500 },
    { offer_id: '–û–î–ï–ñ–î–ê001', —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞: 3000, –Ω–æ–≤–∞—è_—Ü–µ–Ω–∞: 2100 },
    { offer_id: '–î–û–ú001', —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞: 5000, –Ω–æ–≤–∞—è_—Ü–µ–Ω–∞: 4000 }
  ];
  
  const result = await api.pricesStocks.updatePrices({
    prices: —Ç–æ–≤–∞—Ä—ã.map(—Ç–æ–≤–∞—Ä => ({
      offer_id: —Ç–æ–≤–∞—Ä.offer_id,
      price: —Ç–æ–≤–∞—Ä.–Ω–æ–≤–∞—è_—Ü–µ–Ω–∞.toString(),
      old_price: —Ç–æ–≤–∞—Ä.—Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞.toString(),
      currency_code: 'RUB'
    }))
  });
  
  console.log('üè∑Ô∏è –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω:');
  
  let —É—Å–ø–µ—à–Ω–æ = 0;
  let –æ—à–∏–±–æ–∫ = 0;
  
  —Ä–µ–∑—É–ª—å—Ç–∞—Ç.result?.forEach(—Ç–æ–≤–∞—Ä => {
    if (—Ç–æ–≤–∞—Ä.updated) {
      —É—Å–ø–µ—à–Ω–æ++;
      const –∏—Å—Ö–æ–¥–Ω—ã–π = —Ç–æ–≤–∞—Ä—ã.find(—Ç => —Ç.offer_id === —Ç–æ–≤–∞—Ä.offer_id);
      const —Å–∫–∏–¥–∫–∞ = –∏—Å—Ö–æ–¥–Ω—ã–π ? 
        Math.round((1 - –∏—Å—Ö–æ–¥–Ω—ã–π.–Ω–æ–≤–∞—è_—Ü–µ–Ω–∞ / –∏—Å—Ö–æ–¥–Ω—ã–π.—Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞) * 100) : 0;
      console.log(`‚úÖ ${—Ç–æ–≤–∞—Ä.offer_id}: —Å–∫–∏–¥–∫–∞ ${—Å–∫–∏–¥–∫–∞}%`);
    } else {
      –æ—à–∏–±–æ–∫++;
      console.log(`‚ùå ${—Ç–æ–≤–∞—Ä.offer_id}: ${—Ç–æ–≤–∞—Ä.errors?.join(', ')}`);
    }
  });
  
  console.log(`üìä –ò—Ç–æ–≥–æ: ${—É—Å–ø–µ—à–Ω–æ} —É—Å–ø–µ—à–Ω–æ, ${–æ—à–∏–±–æ–∫} –æ—à–∏–±–æ–∫`);
}
```

#### –ü—Ä–µ–º–∏—É–º-—Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
```typescript
async function —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü—Ä–µ–º–∏—É–º–¶–µ–Ω—ã() {
  const –ø—Ä–µ–º–∏—É–º–¢–æ–≤–∞—Ä—ã = [
    {
      offer_id: '–ü–†–ï–ú–ò–£–ú001',
      –æ–±—ã—á–Ω–∞—è_—Ü–µ–Ω–∞: 5000,
      –ø—Ä–µ–º–∏—É–º_—Ü–µ–Ω–∞: 4500,    // 10% —Å–∫–∏–¥–∫–∞ –¥–ª—è Premium
      —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞: 6000
    },
    {
      offer_id: '–ü–†–ï–ú–ò–£–ú002', 
      –æ–±—ã—á–Ω–∞—è_—Ü–µ–Ω–∞: 2000,
      –ø—Ä–µ–º–∏—É–º_—Ü–µ–Ω–∞: 1800,    // 10% —Å–∫–∏–¥–∫–∞ –¥–ª—è Premium
      —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞: 2500
    }
  ];
  
  const result = await api.pricesStocks.updatePrices({
    prices: –ø—Ä–µ–º–∏—É–º–¢–æ–≤–∞—Ä—ã.map(—Ç–æ–≤–∞—Ä => ({
      offer_id: —Ç–æ–≤–∞—Ä.offer_id,
      price: —Ç–æ–≤–∞—Ä.–æ–±—ã—á–Ω–∞—è_—Ü–µ–Ω–∞.toString(),
      old_price: —Ç–æ–≤–∞—Ä.—Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞.toString(),
      premium_price: —Ç–æ–≤–∞—Ä.–ø—Ä–µ–º–∏—É–º_—Ü–µ–Ω–∞.toString(),
      currency_code: 'RUB'
    }))
  });
  
  console.log('‚≠ê –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ–º–∏—É–º-—Ü–µ–Ω:');
  —Ä–µ–∑—É–ª—å—Ç–∞—Ç.result?.forEach(—Ç–æ–≤–∞—Ä => {
    if (—Ç–æ–≤–∞—Ä.updated) {
      const –∏—Å—Ö–æ–¥–Ω—ã–π = –ø—Ä–µ–º–∏—É–º–¢–æ–≤–∞—Ä—ã.find(—Ç => —Ç.offer_id === —Ç–æ–≤–∞—Ä.offer_id);
      if (–∏—Å—Ö–æ–¥–Ω—ã–π) {
        const –ø—Ä–µ–º–∏—É–º–°–∫–∏–¥–∫–∞ = Math.round((1 - –∏—Å—Ö–æ–¥–Ω—ã–π.–ø—Ä–µ–º–∏—É–º_—Ü–µ–Ω–∞ / –∏—Å—Ö–æ–¥–Ω—ã–π.–æ–±—ã—á–Ω–∞—è_—Ü–µ–Ω–∞) * 100);
        console.log(`‚úÖ ${—Ç–æ–≤–∞—Ä.offer_id}: Premium —Å–∫–∏–¥–∫–∞ ${–ø—Ä–µ–º–∏—É–º–°–∫–∏–¥–∫–∞}%`);
      }
    } else {
      console.log(`‚ùå ${—Ç–æ–≤–∞—Ä.offer_id}: –æ—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Premium —Ü–µ–Ω—ã`);
    }
  });
}
```

---

## 2. getPrices

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ü–µ–Ω–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksGetPricesRequest {
  filter?: {
    offer_id?: string[];          // –§–∏–ª—å—Ç—Ä –ø–æ ID —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞
    product_id?: number[];        // –§–∏–ª—å—Ç—Ä –ø–æ ID —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
    visibility?: –í–∏–¥–∏–º–æ—Å—Ç—å–¢–æ–≤–∞—Ä–∞; // –§–∏–ª—å—Ç—Ä –ø–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤
  };
  last_id?: string;               // ID –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  limit?: number;                 // –õ–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π (–º–∞–∫—Å 1000)
}

type –í–∏–¥–∏–º–æ—Å—Ç—å–¢–æ–≤–∞—Ä–∞ = 'ALL' | 'VISIBLE' | 'INVISIBLE' | 'EMPTY_STOCK' | 'NOT_MODERATED' | 'MODERATED' | 'DISABLED' | 'STATE_FAILED';
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksGetPricesResponse {
  items?: Array<{
    offer_id: string;             // ID —Ç–æ–≤–∞—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
    product_id: number;           // ID —Ç–æ–≤–∞—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ OZON
    price: string;                // –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞
    old_price?: string;           // –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
    premium_price?: string;       // Premium —Ü–µ–Ω–∞ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
    currency_code: string;        // –ö–æ–¥ –≤–∞–ª—é—Ç—ã
    auto_action_enabled: boolean; // –í–∫–ª—é—á–µ–Ω—ã –ª–∏ –∞–≤—Ç–æ–ø—Ä–∞–≤–∏–ª–∞
    commissions?: {               // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–∏—Å—Å–∏—è—Ö
      fbo?: number;               // –ö–æ–º–∏—Å—Å–∏—è FBO (%)
      fbs?: number;               // –ö–æ–º–∏—Å—Å–∏—è FBS (%)
      rfbs?: number;              // –ö–æ–º–∏—Å—Å–∏—è rFBS (%)
    };
    marketing_actions?: Array<{   // –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∞–∫—Ü–∏–∏
      title: string;              // –ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏
      action_type: string;        // –¢–∏–ø –∞–∫—Ü–∏–∏
      date_from?: string;         // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
      date_to?: string;           // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
    }>;
  }>;
  last_id?: string;               // ID –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  has_next: boolean;              // –ï—Å—Ç—å –ª–∏ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
```typescript
async function getProductPrices() {
  const —Ü–µ–Ω—ã = await api.pricesStocks.getPrices({
    filter: {
      offer_id: ['–¢–û–í–ê–†001', '–¢–û–í–ê–†002', '–¢–û–í–ê–†003'],
      visibility: 'VISIBLE'
    },
    limit: 100
  });
  
  console.log('üí∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤:');
  
  —Ü–µ–Ω—ã.items?.forEach(—Ç–æ–≤–∞—Ä => {
    console.log(`\nüì¶ –¢–æ–≤–∞—Ä: ${—Ç–æ–≤–∞—Ä.offer_id} (ID: ${—Ç–æ–≤–∞—Ä.product_id})`);
    console.log(`   üíµ –¶–µ–Ω–∞: ${—Ç–æ–≤–∞—Ä.price} ${—Ç–æ–≤–∞—Ä.currency_code}`);
    
    if (—Ç–æ–≤–∞—Ä.old_price && —Ç–æ–≤–∞—Ä.old_price !== '0') {
      const —Å–∫–∏–¥–∫–∞ = Math.round((1 - parseFloat(—Ç–æ–≤–∞—Ä.price) / parseFloat(—Ç–æ–≤–∞—Ä.old_price)) * 100);
      console.log(`   üè∑Ô∏è –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: ${—Ç–æ–≤–∞—Ä.old_price} ${—Ç–æ–≤–∞—Ä.currency_code} (—Å–∫–∏–¥–∫–∞ ${—Å–∫–∏–¥–∫–∞}%)`);
    }
    
    if (—Ç–æ–≤–∞—Ä.premium_price) {
      const –ø—Ä–µ–º–∏—É–º–°–∫–∏–¥–∫–∞ = Math.round((1 - parseFloat(—Ç–æ–≤–∞—Ä.premium_price) / parseFloat(—Ç–æ–≤–∞—Ä.price)) * 100);
      console.log(`   ‚≠ê Premium —Ü–µ–Ω–∞: ${—Ç–æ–≤–∞—Ä.premium_price} ${—Ç–æ–≤–∞—Ä.currency_code} (—Å–∫–∏–¥–∫–∞ ${–ø—Ä–µ–º–∏—É–º–°–∫–∏–¥–∫–∞}%)`);
    }
    
    if (—Ç–æ–≤–∞—Ä.commissions) {
      console.log(`   üíº –ö–æ–º–∏—Å—Å–∏–∏: FBO ${—Ç–æ–≤–∞—Ä.commissions.fbo}%, FBS ${—Ç–æ–≤–∞—Ä.commissions.fbs}%, rFBS ${—Ç–æ–≤–∞—Ä.commissions.rfbs}%`);
    }
    
    if (—Ç–æ–≤–∞—Ä.marketing_actions && —Ç–æ–≤–∞—Ä.marketing_actions.length > 0) {
      console.log(`   üéØ –ê–∫—Ü–∏–∏: ${—Ç–æ–≤–∞—Ä.marketing_actions.map(–∞–∫—Ü–∏—è => –∞–∫—Ü–∏—è.title).join(', ')}`);
    }
    
    console.log(`   ü§ñ –ê–≤—Ç–æ–ø—Ä–∞–≤–∏–ª–∞: ${—Ç–æ–≤–∞—Ä.auto_action_enabled ? '–≤–∫–ª—é—á–µ–Ω—ã' : '–≤—ã–∫–ª—é—á–µ–Ω—ã'}`);
  });
  
  if (—Ü–µ–Ω—ã.has_next) {
    console.log(`üìÑ –î–æ—Å—Ç—É–ø–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (last_id: ${—Ü–µ–Ω—ã.last_id})`);
  }
  
  return —Ü–µ–Ω—ã;
}
```

#### –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ü–µ–Ω
```typescript
async function getAllPrices() {
  let –≤—Å–µ–¢–æ–≤–∞—Ä—ã: any[] = [];
  let –ø–æ—Å–ª–µ–¥–Ω–∏–πId: string | undefined;
  let —Å—Ç—Ä–∞–Ω–∏—Ü–∞ = 1;
  
  do {
    console.log(`üìÑ –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É ${—Å—Ç—Ä–∞–Ω–∏—Ü–∞}...`);
    
    const —Ü–µ–Ω—ã = await api.pricesStocks.getPrices({
      filter: {
        visibility: 'VISIBLE'
      },
      last_id: –ø–æ—Å–ª–µ–¥–Ω–∏–πId,
      limit: 1000
    });
    
    if (—Ü–µ–Ω—ã.items) {
      –≤—Å–µ–¢–æ–≤–∞—Ä—ã.push(...—Ü–µ–Ω—ã.items);
      console.log(`   ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${—Ü–µ–Ω—ã.items.length} —Ç–æ–≤–∞—Ä–æ–≤`);
    }
    
    –ø–æ—Å–ª–µ–¥–Ω–∏–πId = —Ü–µ–Ω—ã.last_id;
    —Å—Ç—Ä–∞–Ω–∏—Ü–∞++;
    
    // –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
    if (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ > 100) {
      console.log('‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü (100), –æ—Å—Ç–∞–Ω–æ–≤–∫–∞');
      break;
    }
    
  } while (–ø–æ—Å–ª–µ–¥–Ω–∏–πId);
  
  console.log(`üìä –ò—Ç–æ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: ${–≤—Å–µ–¢–æ–≤–∞—Ä—ã.length} —Ç–æ–≤–∞—Ä–æ–≤`);
  
  // –ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω
  const –∞–Ω–∞–ª–∏–∑–¶–µ–Ω = {
    –æ–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –≤—Å–µ–¢–æ–≤–∞—Ä—ã.length,
    —Å–æ–°–∫–∏–¥–∫–∞–º–∏: –≤—Å–µ–¢–æ–≤–∞—Ä—ã.filter(—Ç => —Ç.old_price && —Ç.old_price !== '0').length,
    —Å–ü—Ä–µ–º–∏—É–º–¶–µ–Ω–∞–º–∏: –≤—Å–µ–¢–æ–≤–∞—Ä—ã.filter(—Ç => —Ç.premium_price).length,
    —Å–ê–≤—Ç–æ–ø—Ä–∞–≤–∏–ª–∞–º–∏: –≤—Å–µ–¢–æ–≤–∞—Ä—ã.filter(—Ç => —Ç.auto_action_enabled).length,
    —Å—Ä–µ–¥–Ω—è—è–¶–µ–Ω–∞: –≤—Å–µ–¢–æ–≤–∞—Ä—ã.reduce((—Å—É–º–º–∞, —Ç–æ–≤–∞—Ä) => —Å—É–º–º–∞ + parseFloat(—Ç–æ–≤–∞—Ä.price), 0) / –≤—Å–µ–¢–æ–≤–∞—Ä—ã.length
  };
  
  console.log('\nüìà –ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω:');
  console.log(`   üì¶ –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.–æ–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ}`);
  console.log(`   üè∑Ô∏è –°–æ —Å–∫–∏–¥–∫–∞–º–∏: ${–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å–æ–°–∫–∏–¥–∫–∞–º–∏} (${Math.round(–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å–æ–°–∫–∏–¥–∫–∞–º–∏ / –∞–Ω–∞–ª–∏–∑–¶–µ–Ω.–æ–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ * 100)}%)`);
  console.log(`   ‚≠ê –° Premium —Ü–µ–Ω–∞–º–∏: ${–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å–ü—Ä–µ–º–∏—É–º–¶–µ–Ω–∞–º–∏} (${Math.round(–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å–ü—Ä–µ–º–∏—É–º–¶–µ–Ω–∞–º–∏ / –∞–Ω–∞–ª–∏–∑–¶–µ–Ω.–æ–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ * 100)}%)`);
  console.log(`   ü§ñ –° –∞–≤—Ç–æ–ø—Ä–∞–≤–∏–ª–∞–º–∏: ${–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å–ê–≤—Ç–æ–ø—Ä–∞–≤–∏–ª–∞–º–∏} (${Math.round(–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å–ê–≤—Ç–æ–ø—Ä–∞–≤–∏–ª–∞–º–∏ / –∞–Ω–∞–ª–∏–∑–¶–µ–Ω.–æ–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ * 100)}%)`);
  console.log(`   üí∞ –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: ${–∞–Ω–∞–ª–∏–∑–¶–µ–Ω.—Å—Ä–µ–¥–Ω—è—è–¶–µ–Ω–∞.toFixed(2)} RUB`);
  
  return –≤—Å–µ–¢–æ–≤–∞—Ä—ã;
}
```

#### –ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω–æ–≤–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```typescript
async function –∞–Ω–∞–ª–∏–∑–¶–µ–Ω–æ–≤–æ–π–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏() {
  const —Ü–µ–Ω—ã = await api.pricesStocks.getPrices({
    filter: { visibility: 'VISIBLE' },
    limit: 1000
  });
  
  if (!—Ü–µ–Ω—ã.items) return;
  
  const –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ = new Map<string, Array<any>>();
  
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö)
  —Ü–µ–Ω—ã.items.forEach(—Ç–æ–≤–∞—Ä => {
    // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–µ—Ä–≤—ã–º —Å–∏–º–≤–æ–ª–∞–º offer_id
    const –∫–∞—Ç–µ–≥–æ—Ä–∏—è = —Ç–æ–≤–∞—Ä.offer_id.split(/[0-9]/)[0] || '–ü–†–û–ß–ï–ï';
    
    if (!–∫–∞—Ç–µ–≥–æ—Ä–∏–∏.has(–∫–∞—Ç–µ–≥–æ—Ä–∏—è)) {
      –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.set(–∫–∞—Ç–µ–≥–æ—Ä–∏—è, []);
    }
    –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.get(–∫–∞—Ç–µ–≥–æ—Ä–∏—è)!.push(—Ç–æ–≤–∞—Ä);
  });
  
  console.log('üéØ –ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω–æ–≤–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:');
  
  –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.forEach((—Ç–æ–≤–∞—Ä—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏—è) => {
    const —Ü–µ–Ω—ã = —Ç–æ–≤–∞—Ä—ã.map(—Ç => parseFloat(—Ç.price));
    const —Å—Ä–µ–¥–Ω—è—è–¶–µ–Ω–∞ = —Ü–µ–Ω—ã.reduce((–∞, –±) => –∞ + –±, 0) / —Ü–µ–Ω—ã.length;
    const –º–∏–Ω–¶–µ–Ω–∞ = Math.min(...—Ü–µ–Ω—ã);
    const –º–∞–∫—Å–¶–µ–Ω–∞ = Math.max(...—Ü–µ–Ω—ã);
    
    const —Å–æ–°–∫–∏–¥–∫–∞–º–∏ = —Ç–æ–≤–∞—Ä—ã.filter(—Ç => —Ç.old_price && —Ç.old_price !== '0').length;
    const –ø—Ä–æ—Ü–µ–Ω—Ç–°–∫–∏–¥–æ–∫ = Math.round(—Å–æ–°–∫–∏–¥–∫–∞–º–∏ / —Ç–æ–≤–∞—Ä—ã.length * 100);
    
    console.log(`\nüìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${–∫–∞—Ç–µ–≥–æ—Ä–∏—è}`);
    console.log(`   üì¶ –¢–æ–≤–∞—Ä–æ–≤: ${—Ç–æ–≤–∞—Ä—ã.length}`);
    console.log(`   üí∞ –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: ${—Å—Ä–µ–¥–Ω—è—è–¶–µ–Ω–∞.toFixed(2)} RUB`);
    console.log(`   üìä –î–∏–∞–ø–∞–∑–æ–Ω: ${–º–∏–Ω–¶–µ–Ω–∞} - ${–º–∞–∫—Å–¶–µ–Ω–∞} RUB`);
    console.log(`   üè∑Ô∏è –ü—Ä–æ—Ü–µ–Ω—Ç —Å–∫–∏–¥–æ–∫: ${–ø—Ä–æ—Ü–µ–Ω—Ç–°–∫–∏–¥–æ–∫}%`);
    
    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    if (–ø—Ä–æ—Ü–µ–Ω—Ç–°–∫–∏–¥–æ–∫ < 30) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–æ–∫ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏`);
    }
    
    if (–º–∞–∫—Å–¶–µ–Ω–∞ / –º–∏–Ω–¶–µ–Ω–∞ > 3) {
      console.log(`   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ë–æ–ª—å—à–æ–π —Ä–∞–∑–±—Ä–æ—Å —Ü–µ–Ω - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ü–µ–Ω–æ–≤—É—é –ø–æ–ª–∏—Ç–∏–∫—É`);
    }
  });
}
```

---

## 3. updateDiscountedProductDiscount

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Å–∫–∏–¥–∫–∏ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è FBS).

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å–∞
```typescript
interface PricesStocksUpdateDiscountRequest {
  product_id: number;             // ID —É—Ü–µ–Ω—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
  discount: number;               // –†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (0-95)
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
```typescript
interface PricesStocksUpdateDiscountResponse {
  result: boolean;                // –£—Å–ø–µ—à–Ω–æ –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–∫–∏–¥–∫–∞
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∏–¥–∫–∏ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
```typescript
async function —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°–∫–∏–¥–∫—É–ù–∞–£—Ü–µ–Ω—ë–Ω–Ω—ã–π–¢–æ–≤–∞—Ä() {
  const result = await api.pricesStocks.updateDiscountedProductDiscount({
    product_id: 123456789,
    discount: 25                  // 25% —Å–∫–∏–¥–∫–∞
  });
  
  if (—Ä–µ–∑—É–ª—å—Ç–∞—Ç.result) {
    console.log('‚úÖ –°–∫–∏–¥–∫–∞ 25% —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä');
  } else {
    console.log('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä');
  }
  
  return —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
}
```

#### –ú–∞—Å—Å–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∏–¥–æ–∫ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
```typescript
async function –º–∞—Å—Å–æ–≤–æ–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°–∫–∏–¥–∫–∏–ù–∞–£—Ü–µ–Ω—ë–Ω–Ω—ã–µ() {
  const —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ–¢–æ–≤–∞—Ä—ã = [
    { product_id: 123456, discount: 30, –ø—Ä–∏—á–∏–Ω–∞: '–ù–µ–±–æ–ª—å—à–∏–µ —Ü–∞—Ä–∞–ø–∏–Ω—ã' },
    { product_id: 234567, discount: 50, –ø—Ä–∏—á–∏–Ω–∞: '–ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞' },
    { product_id: 345678, discount: 20, –ø—Ä–∏—á–∏–Ω–∞: '–í–∏—Ç—Ä–∏–Ω–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü' },
    { product_id: 456789, discount: 15, –ø—Ä–∏—á–∏–Ω–∞: '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã' }
  ];
  
  console.log('üè∑Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∏–¥–æ–∫ –Ω–∞ —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:');
  
  let —É—Å–ø–µ—à–Ω–æ = 0;
  let –æ—à–∏–±–æ–∫ = 0;
  
  for (const —Ç–æ–≤–∞—Ä of —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ–¢–æ–≤–∞—Ä—ã) {
    try {
      const result = await api.pricesStocks.updateDiscountedProductDiscount({
        product_id: —Ç–æ–≤–∞—Ä.product_id,
        discount: —Ç–æ–≤–∞—Ä.discount
      });
      
      if (—Ä–µ–∑—É–ª—å—Ç–∞—Ç.result) {
        —É—Å–ø–µ—à–Ω–æ++;
        console.log(`‚úÖ –¢–æ–≤–∞—Ä ${—Ç–æ–≤–∞—Ä.product_id}: —Å–∫–∏–¥–∫–∞ ${—Ç–æ–≤–∞—Ä.discount}% (${—Ç–æ–≤–∞—Ä.–ø—Ä–∏—á–∏–Ω–∞})`);
      } else {
        –æ—à–∏–±–æ–∫++;
        console.log(`‚ùå –¢–æ–≤–∞—Ä ${—Ç–æ–≤–∞—Ä.product_id}: –æ—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫–∏–¥–∫–∏`);
      }
      
      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
      await new Promise(resolve => setTimeout(resolve, 100));
      
    } catch (error: any) {
      –æ—à–∏–±–æ–∫++;
      console.log(`‚ùå –¢–æ–≤–∞—Ä ${—Ç–æ–≤–∞—Ä.product_id}: ${error.message}`);
    }
  }
  
  console.log(`\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç: ${—É—Å–ø–µ—à–Ω–æ} —É—Å–ø–µ—à–Ω–æ, ${–æ—à–∏–±–æ–∫} –æ—à–∏–±–æ–∫`);
  
  return {
    —É—Å–ø–µ—à–Ω–æ,
    –æ—à–∏–±–æ–∫,
    –æ–±—â–µ–µ: —É—Ü–µ–Ω—ë–Ω–Ω—ã–µ–¢–æ–≤–∞—Ä—ã.length
  };
}
```

---

## üèóÔ∏è –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–µ–Ω–µ–¥–∂–µ—Ä —Ü–µ–Ω
```typescript
interface –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–¶–µ–Ω {
  –ª–∏–º–∏—Ç–û–±–Ω–æ–≤–ª–µ–Ω–∏–π–í–ß–∞—Å?: number;     // –õ–∏–º–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ü–µ–Ω—ã –Ω–∞ —Ç–æ–≤–∞—Ä –≤ —á–∞—Å
  —Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞?: number;            // –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  –∑–∞–¥–µ—Ä–∂–∫–∞–ú–µ–∂–¥—É–ó–∞–ø—Ä–æ—Å–∞–º–∏?: number;  // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–º—Å)
  –º–∞–∫—Å–∏–º—É–º–ü–æ–ø—ã—Ç–æ–∫?: number;         // –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
}

class –ú–µ–Ω–µ–¥–∂–µ—Ä–¶–µ–Ω {
  private api: OzonSellerAPI;
  private –∫–æ–Ω—Ñ–∏–≥: Required<–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–¶–µ–Ω>;
  private —Å—á—ë—Ç—á–∏–∫–û–±–Ω–æ–≤–ª–µ–Ω–∏–π = new Map<string, { –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: number; –ø–æ—Å–ª–µ–¥–Ω–µ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: number }>();
  
  constructor(api: OzonSellerAPI, –∫–æ–Ω—Ñ–∏–≥: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–¶–µ–Ω = {}) {
    this.api = api;
    this.–∫–æ–Ω—Ñ–∏–≥ = {
      –ª–∏–º–∏—Ç–û–±–Ω–æ–≤–ª–µ–Ω–∏–π–í–ß–∞—Å: 10,
      —Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞: 100,
      –∑–∞–¥–µ—Ä–∂–∫–∞–ú–µ–∂–¥—É–ó–∞–ø—Ä–æ—Å–∞–º–∏: 1000,
      –º–∞–∫—Å–∏–º—É–º–ü–æ–ø—ã—Ç–æ–∫: 3,
      ...–∫–æ–Ω—Ñ–∏–≥
    };
  }

  /**
   * –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–æ–≤
   */
  async –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ–¶–µ–Ω(
    —Ü–µ–Ω—ã: Array<{
      —Ç–æ–≤–∞—ÄId: string;
      —Ü–µ–Ω–∞: number;
      —Å—Ç–∞—Ä–∞—è–¶–µ–Ω–∞?: number;
      –ø—Ä–µ–º–∏—É–º–¶–µ–Ω–∞?: number;
    }>
  ): Promise<{
    —É—Å–ø–µ—à–Ω–æ: number;
    –ø—Ä–æ–ø—É—â–µ–Ω–æ: number;
    –æ—à–∏–±–æ–∫: number;
    –¥–µ—Ç–∞–ª–∏: Array<{ —Ç–æ–≤–∞—ÄId: string; —Å—Ç–∞—Ç—É—Å: '—É—Å–ø–µ—à–Ω–æ' | '–ø—Ä–æ–ø—É—â–µ–Ω–æ' | '–æ—à–∏–±–∫–∞'; –ø—Ä–∏—á–∏–Ω–∞?: string }>;
  }> {
    const —Ä–µ–∑—É–ª—å—Ç–∞—Ç = {
      —É—Å–ø–µ—à–Ω–æ: 0,
      –ø—Ä–æ–ø—É—â–µ–Ω–æ: 0,
      –æ—à–∏–±–æ–∫: 0,
      –¥–µ—Ç–∞–ª–∏: [] as Array<{ —Ç–æ–≤–∞—ÄId: string; —Å—Ç–∞—Ç—É—Å: '—É—Å–ø–µ—à–Ω–æ' | '–ø—Ä–æ–ø—É—â–µ–Ω–æ' | '–æ—à–∏–±–∫–∞'; –ø—Ä–∏—á–∏–Ω–∞?: string }>
    };

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    const —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ–¶–µ–Ω—ã = —Ü–µ–Ω—ã.filter(—Ü–µ–Ω–∞ => {
      if (this.–ø—Ä–æ–≤–µ—Ä–∏—Ç—å–õ–∏–º–∏—Ç–û–±–Ω–æ–≤–ª–µ–Ω–∏–π(—Ü–µ–Ω–∞.—Ç–æ–≤–∞—ÄId)) {
        return true;
      } else {
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–ø—Ä–æ–ø—É—â–µ–Ω–æ++;
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
          —Ç–æ–≤–∞—ÄId: —Ü–µ–Ω–∞.—Ç–æ–≤–∞—ÄId,
          —Å—Ç–∞—Ç—É—Å: '–ø—Ä–æ–ø—É—â–µ–Ω–æ',
          –ø—Ä–∏—á–∏–Ω–∞: `–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç ${this.–∫–æ–Ω—Ñ–∏–≥.–ª–∏–º–∏—Ç–û–±–Ω–æ–≤–ª–µ–Ω–∏–π–í–ß–∞—Å} –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —á–∞—Å`
        });
        return false;
      }
    });

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–∞–∫–µ—Ç–∞–º–∏
    for (let i = 0; i < —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ–¶–µ–Ω—ã.length; i += this.–∫–æ–Ω—Ñ–∏–≥.—Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞) {
      const –ø–∞–∫–µ—Ç = —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ–¶–µ–Ω—ã.slice(i, i + this.–∫–æ–Ω—Ñ–∏–≥.—Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞);
      
      try {
        const –∑–∞–ø—Ä–æ—Å = {
          prices: –ø–∞–∫–µ—Ç.map(—Ü–µ–Ω–∞ => ({
            offer_id: —Ü–µ–Ω–∞.—Ç–æ–≤–∞—ÄId,
            price: —Ü–µ–Ω–∞.—Ü–µ–Ω–∞.toString(),
            old_price: —Ü–µ–Ω–∞.—Å—Ç–∞—Ä–∞—è–¶–µ–Ω–∞?.toString(),
            premium_price: —Ü–µ–Ω–∞.–ø—Ä–µ–º–∏—É–º–¶–µ–Ω–∞?.toString(),
            currency_code: 'RUB'
          }))
        };

        const –æ—Ç–≤–µ—Ç = await this.api.pricesStocks.updatePrices(–∑–∞–ø—Ä–æ—Å);

        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        –æ—Ç–≤–µ—Ç.result?.forEach(—Ç–æ–≤–∞—Ä => {
          if (—Ç–æ–≤–∞—Ä.updated) {
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.—É—Å–ø–µ—à–Ω–æ++;
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
              —Ç–æ–≤–∞—ÄId: —Ç–æ–≤–∞—Ä.offer_id || —Ç–æ–≤–∞—Ä.product_id?.toString() || '',
              —Å—Ç–∞—Ç—É—Å: '—É—Å–ø–µ—à–Ω–æ'
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫
            this.–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ(—Ç–æ–≤–∞—Ä.offer_id || —Ç–æ–≤–∞—Ä.product_id?.toString() || '');
          } else {
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–æ—à–∏–±–æ–∫++;
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
              —Ç–æ–≤–∞—ÄId: —Ç–æ–≤–∞—Ä.offer_id || —Ç–æ–≤–∞—Ä.product_id?.toString() || '',
              —Å—Ç–∞—Ç—É—Å: '–æ—à–∏–±–∫–∞',
              –ø—Ä–∏—á–∏–Ω–∞: —Ç–æ–≤–∞—Ä.errors?.join(', ')
            });
          }
        });

      } catch (error: any) {
        // –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –ø–∞–∫–µ—Ç–µ —Å—á–∏—Ç–∞–µ–º –æ—à–∏–±–æ—á–Ω—ã–º–∏
        –ø–∞–∫–µ—Ç.forEach(—Ü–µ–Ω–∞ => {
          —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–æ—à–∏–±–æ–∫++;
          —Ä–µ–∑—É–ª—å—Ç–∞—Ç.–¥–µ—Ç–∞–ª–∏.push({
            —Ç–æ–≤–∞—ÄId: —Ü–µ–Ω–∞.—Ç–æ–≤–∞—ÄId,
            —Å—Ç–∞—Ç—É—Å: '–æ—à–∏–±–∫–∞',
            –ø—Ä–∏—á–∏–Ω–∞: error.message
          });
        });
      }

      // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏
      if (i + this.–∫–æ–Ω—Ñ–∏–≥.—Ä–∞–∑–º–µ—Ä–ü–∞–∫–µ—Ç–∞ < —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ–¶–µ–Ω—ã.length) {
        await new Promise(resolve => setTimeout(resolve, this.–∫–æ–Ω—Ñ–∏–≥.–∑–∞–¥–µ—Ä–∂–∫–∞–ú–µ–∂–¥—É–ó–∞–ø—Ä–æ—Å–∞–º–∏));
      }
    }

    return —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
  }

  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª
   */
  async –∞–≤—Ç–æ—Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ(
    –ø—Ä–∞–≤–∏–ª–∞: {
      –∫–∞—Ç–µ–≥–æ—Ä–∏—è: string;
      –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–ú–∞—Ä–∂–∞: number;      // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
      –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞: number;     // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
      –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è–ù–∞–¥–±–∞–≤–∫–∞: number;   // –ù–∞–¥–±–∞–≤–∫–∞ –∫ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π —Ü–µ–Ω–µ
    }[]
  ): Promise<void> {
    console.log('ü§ñ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è');

    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã
    const —Ç–µ–∫—É—â–∏–µ–¶–µ–Ω—ã = await this.–ø–æ–ª—É—á–∏—Ç—å–í—Å–µ–¶–µ–Ω—ã();
    
    for (const –ø—Ä–∞–≤–∏–ª–æ of –ø—Ä–∞–≤–∏–ª–∞) {
      console.log(`\nüìÇ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ${–ø—Ä–∞–≤–∏–ª–æ.–∫–∞—Ç–µ–≥–æ—Ä–∏—è}`);
      
      // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é)
      const —Ç–æ–≤–∞—Ä—ã–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ = —Ç–µ–∫—É—â–∏–µ–¶–µ–Ω—ã.filter(—Ç–æ–≤–∞—Ä => 
        —Ç–æ–≤–∞—Ä.offer_id.startsWith(–ø—Ä–∞–≤–∏–ª–æ.–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
      );
      
      const –Ω–æ–≤—ã–µ–¶–µ–Ω—ã: Array<any> = [];
      
      for (const —Ç–æ–≤–∞—Ä of —Ç–æ–≤–∞—Ä—ã–ö–∞—Ç–µ–≥–æ—Ä–∏–∏) {
        const —Ç–µ–∫—É—â–∞—è–¶–µ–Ω–∞ = parseFloat(—Ç–æ–≤–∞—Ä.price);
        
        // –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã)
        const —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å = —Ç–µ–∫—É—â–∞—è–¶–µ–Ω–∞ * 0.7; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º 30% –º–∞—Ä–∂–∏
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—É—é —Ü–µ–Ω—É
        const –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–¶–µ–Ω–∞ = —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å * (1 + –ø—Ä–∞–≤–∏–ª–æ.–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–ú–∞—Ä–∂–∞ / 100);
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É —Å–æ —Å–∫–∏–¥–∫–æ–π
        const —Ü–µ–Ω–∞ = Math.max(
          –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è–¶–µ–Ω–∞,
          —Ç–µ–∫—É—â–∞—è–¶–µ–Ω–∞ * (1 - –ø—Ä–∞–≤–∏–ª–æ.–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è–°–∫–∏–¥–∫–∞ / 100)
        );
        
        if (Math.abs(—Ü–µ–Ω–∞ - —Ç–µ–∫—É—â–∞—è–¶–µ–Ω–∞) / —Ç–µ–∫—É—â–∞—è–¶–µ–Ω–∞ > 0.05) { // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–µ 5%
          –Ω–æ–≤—ã–µ–¶–µ–Ω—ã.push({
            —Ç–æ–≤–∞—ÄId: —Ç–æ–≤–∞—Ä.offer_id,
            —Ü–µ–Ω–∞: Math.round(—Ü–µ–Ω–∞),
            —Å—Ç–∞—Ä–∞—è–¶–µ–Ω–∞: —Ç–µ–∫—É—â–∞—è–¶–µ–Ω–∞
          });
        }
      }
      
      if (–Ω–æ–≤—ã–µ–¶–µ–Ω—ã.length > 0) {
        console.log(`üí∞ –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã –¥–ª—è ${–Ω–æ–≤—ã–µ–¶–µ–Ω—ã.length} —Ç–æ–≤–∞—Ä–æ–≤`);
        const result = await this.–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ–¶–µ–Ω(–Ω–æ–≤—ã–µ–¶–µ–Ω—ã);
        console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ: ${—Ä–µ–∑—É–ª—å—Ç–∞—Ç.—É—Å–ø–µ—à–Ω–æ}, ‚ùå –û—à–∏–±–æ–∫: ${—Ä–µ–∑—É–ª—å—Ç–∞—Ç.–æ—à–∏–±–æ–∫}, ‚è∏Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${—Ä–µ–∑—É–ª—å—Ç–∞—Ç.–ø—Ä–æ–ø—É—â–µ–Ω–æ}`);
      } else {
        console.log('üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è');
      }
    }
  }

  private –ø—Ä–æ–≤–µ—Ä–∏—Ç—å–õ–∏–º–∏—Ç–û–±–Ω–æ–≤–ª–µ–Ω–∏–π(—Ç–æ–≤–∞—ÄId: string): boolean {
    const —Å–µ–π—á–∞—Å = Date.now();
    const —á–∞—Å–¢–æ–º—É–ù–∞–∑–∞–¥ = —Å–µ–π—á–∞—Å - 60 * 60 * 1000;
    
    const –∑–∞–ø–∏—Å—å = this.—Å—á—ë—Ç—á–∏–∫–û–±–Ω–æ–≤–ª–µ–Ω–∏–π.get(—Ç–æ–≤–∞—ÄId);
    
    if (!–∑–∞–ø–∏—Å—å || –∑–∞–ø–∏—Å—å.–ø–æ—Å–ª–µ–¥–Ω–µ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ < —á–∞—Å–¢–æ–º—É–ù–∞–∑–∞–¥) {
      return true;
    }
    
    return –∑–∞–ø–∏—Å—å.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ < this.–∫–æ–Ω—Ñ–∏–≥.–ª–∏–º–∏—Ç–û–±–Ω–æ–≤–ª–µ–Ω–∏–π–í–ß–∞—Å;
  }

  private –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ(—Ç–æ–≤–∞—ÄId: string): void {
    const —Å–µ–π—á–∞—Å = Date.now();
    const —á–∞—Å–¢–æ–º—É–ù–∞–∑–∞–¥ = —Å–µ–π—á–∞—Å - 60 * 60 * 1000;
    
    const –∑–∞–ø–∏—Å—å = this.—Å—á—ë—Ç—á–∏–∫–û–±–Ω–æ–≤–ª–µ–Ω–∏–π.get(—Ç–æ–≤–∞—ÄId);
    
    if (!–∑–∞–ø–∏—Å—å || –∑–∞–ø–∏—Å—å.–ø–æ—Å–ª–µ–¥–Ω–µ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ < —á–∞—Å–¢–æ–º—É–ù–∞–∑–∞–¥) {
      this.—Å—á—ë—Ç—á–∏–∫–û–±–Ω–æ–≤–ª–µ–Ω–∏–π.set(—Ç–æ–≤–∞—ÄId, {
        –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: 1,
        –ø–æ—Å–ª–µ–¥–Ω–µ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —Å–µ–π—á–∞—Å
      });
    } else {
      –∑–∞–ø–∏—Å—å.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ++;
      –∑–∞–ø–∏—Å—å.–ø–æ—Å–ª–µ–¥–Ω–µ–µ–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ = —Å–µ–π—á–∞—Å;
    }
  }

  private async –ø–æ–ª—É—á–∏—Ç—å–í—Å–µ–¶–µ–Ω—ã(): Promise<any[]> {
    // –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è - –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–∞ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
    const —Ü–µ–Ω—ã = await this.api.pricesStocks.getPrices({
      filter: { visibility: 'VISIBLE' },
      limit: 1000
    });
    
    return —Ü–µ–Ω—ã.items || [];
  }
}
```

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫
```typescript
async function —É—Å—Ç–æ–π—á–∏–≤—ã–µ–û–ø–µ—Ä–∞—Ü–∏–∏–°–¶–µ–Ω–∞–º–∏() {
  try {
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
    const result = await api.pricesStocks.updatePrices({
      prices: [{
        offer_id: '–ù–ï–î–û–ü–£–°–¢–ò–ú–´–ô-–¢–û–í–ê–†',
        price: '-100',              // –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–∞—è —Ü–µ–Ω–∞
        currency_code: 'USD'        // –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–∞—è –≤–∞–ª—é—Ç–∞
      }]
    });
    
  } catch (error: any) {
    if (error.response?.status === 400) {
      console.error('‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:', error.response.data);
      
      // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      const –æ—à–∏–±–∫–∏ = error.response.data.errors || [];
      –æ—à–∏–±–∫–∏.forEach(–æ—à–∏–±–∫–∞ => {
        switch (–æ—à–∏–±–∫–∞.code) {
          case 'INVALID_PRICE':
            console.log('üí° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º');
            break;
          case 'INVALID_CURRENCY':
            console.log('üí° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞–ª—é—Ç—É RUB');
            break;
          case 'PRODUCT_NOT_FOUND':
            console.log('üí° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å offer_id –∏–ª–∏ product_id');
            break;
          case 'RATE_LIMIT_EXCEEDED':
            console.log('üí° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 10 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —á–∞—Å –Ω–∞ —Ç–æ–≤–∞—Ä');
            break;
        }
      });
      
    } else if (error.response?.status === 429) {
      console.error('‚è∞ –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ - –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è');
      
    } else {
      console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω:', error.message);
    }
  }
  
  try {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
    const —Ü–µ–Ω—ã = await api.pricesStocks.getPrices({
      filter: {
        offer_id: ['–ù–ï–°–£–©–ï–°–¢–í–£–Æ–©–ò–ô-–¢–û–í–ê–†']
      }
    });
    
    if (!—Ü–µ–Ω—ã.items || —Ü–µ–Ω—ã.items.length === 0) {
      console.log('üîç –¢–æ–≤–∞—Ä—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ ID –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
    }
    
  } catch (error: any) {
    if (error.response?.status === 404) {
      console.error('üîç –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
    } else {
      console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω:', error.message);
    }
  }
}
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[API –¶–µ–Ω—ã –∏ –û—Å—Ç–∞—Ç–∫–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏.md)** - –û—Å–Ω–æ–≤–Ω–æ–π –æ–±–∑–æ—Ä API
- **[–¢–∞–π–º–µ—Ä—ã –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ç–∞–π–º–µ—Ä—ã.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-—Ç–∞–π–º–µ—Ä—ã.md)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏ —Ü–µ–Ω
- **[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ (22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-–æ—Å—Ç–∞—Ç–∫–∏.md)](./22-—Ü–µ–Ω—ã-–æ—Å—Ç–∞—Ç–∫–∏-–æ—Å—Ç–∞—Ç–∫–∏.md)** - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤

---

**–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024  
**–í–µ—Ä—Å–∏–∏ API**: v1, v5  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 3 –º–µ—Ç–æ–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–µ–Ω–∞–º–∏