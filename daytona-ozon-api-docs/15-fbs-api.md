# FBS API

API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–º" (Fulfillment by Seller) –≤ OZON Seller API.

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤**: 22 –º–µ—Ç–æ–¥–∞

## –û–±–∑–æ—Ä

FBS API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Å—Ö–µ–º–æ–π FBS:
- üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- üè∑Ô∏è –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚ùå –û—Ç–º–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤
- üîç –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤
- üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- üåç –†–∞–±–æ—Ç–∞ —Å —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã FBS
1. **–ó–∞–∫–∞–∑ –ø–æ—Å—Ç—É–ø–∞–µ—Ç** ‚Üí –ø—Ä–æ–¥–∞–≤–µ—Ü –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. **–°–±–æ—Ä–∫–∞** ‚Üí –ø—Ä–æ–¥–∞–≤–µ—Ü —Å–æ–±–∏—Ä–∞–µ—Ç –∑–∞–∫–∞–∑ –Ω–∞ —Å–≤–æ–µ–º —Å–∫–ª–∞–¥–µ
3. **–ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫** ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
4. **–ü–µ—Ä–µ–¥–∞—á–∞ –∫—É—Ä—å–µ—Ä—É** ‚Üí –∫—É—Ä—å–µ—Ä –∑–∞–±–∏—Ä–∞–µ—Ç —É –ø—Ä–æ–¥–∞–≤—Ü–∞
5. **–î–æ—Å—Ç–∞–≤–∫–∞** ‚Üí OZON –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—é

### üì¶ –°—Ç–∞—Ç—É—Å—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π FBS
- `awaiting_packaging` - –æ–∂–∏–¥–∞–µ—Ç —Å–±–æ—Ä–∫–∏
- `awaiting_deliver` - –æ–∂–∏–¥–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∫—É—Ä—å–µ—Ä—É
- `arbitration` - –≤ —Å–ø–æ—Ä–µ
- `delivering` - –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è
- `delivered` - –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- `cancelled` - –æ—Ç–º–µ–Ω–µ–Ω–æ

### üè∑Ô∏è –°–∏—Å—Ç–µ–º–∞ —ç—Ç–∏–∫–µ—Ç–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF-—ç—Ç–∏–∫–µ—Ç–æ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ batch-–æ–±—Ä–∞–±–æ—Ç–∫–∏ (–¥–æ 20 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π)
- –ú–∞–ª–µ–Ω—å–∫–∏–µ –∏ –±–æ–ª—å—à–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã —ç—Ç–∏–∫–µ—Ç–æ–∫
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –ø–∞—Ä—Ç–∏–π

## –ú–µ—Ç–æ–¥—ã API

### –°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

#### getCancelReasons()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π

#### getCancelReasonsList()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏—á–∏–Ω –æ—Ç–º–µ–Ω—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∏–∫–µ—Ç–∫–∞–º–∏

#### packageLabel()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–∞–ø–µ—á–∞—Ç–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

```typescript
interface FbsPackageLabelRequest {
  posting_number: string[];
}
```

#### createLabelBatchV2()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∏–∫–µ—Ç–æ–∫ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

#### getLabelBatch()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ç–∏–∫–µ—Ç–æ–∫

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

#### getPostingListV3()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π (v3)

```typescript
interface FbsGetPostingListV3Request {
  filter: {
    since: string;
    to: string;
    status?: string;
  };
  limit?: number;
  offset?: number;
  dir?: 'ASC' | 'DESC';
  with?: {
    analytics_data?: boolean;
    financial_data?: boolean;
  };
}
```

#### getPostingV3()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (v3)

#### getUnfulfilledListV3()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π

#### cancelPosting()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

#### moveToArbitration()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–∫—Ä—ã—Ç—å —Å–ø–æ—Ä –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—é

#### moveToAwaitingDelivery()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–µ–¥–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ –æ—Ç–≥—Ä—É–∑–∫–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏

#### cancelProducts()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

```typescript
interface FbsProductCancelRequest {
  posting_number: string;
  products: Array<{
    sku: string;
    quantity: number;
    cancel_reason_id: number;
  }>;
}
```

#### changeProducts()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (–¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Å)

#### setProductCountry()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—Ä–∞–Ω–µ-–∏–∑–≥–æ—Ç–æ–≤–∏—Ç–µ–ª–µ

#### getProductCountriesList()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞–Ω-–∏–∑–≥–æ—Ç–æ–≤–∏—Ç–µ–ª–µ–π

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### getRestrictions()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—É–Ω–∫—Ç–∞ –ø—Ä–∏—ë–º–∞

#### verifyPickupCode()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –∫—É—Ä—å–µ—Ä–∞ (–¥–ª—è realFBS Express)

#### setMultiBoxQtyV3()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–æ–±–æ–∫ –¥–ª—è –º–Ω–æ–≥–æ–∫–æ—Ä–æ–±–æ—á–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π

#### getEtgb()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏–∑ –¢—É—Ä—Ü–∏–∏

#### getUnpaidLegalProductList()
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { OzonSellerAPI } from 'bmad-ozon-seller-api';

const api = new OzonSellerAPI({
  clientId: 'your-client-id',
  apiKey: 'your-api-key'
});

// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π
const postings = await api.fbs.getPostingListV3({
  filter: {
    since: '2024-01-01T00:00:00Z',
    to: '2024-01-31T23:59:59Z',
    status: 'awaiting_deliver'
  },
  limit: 100,
  with: {
    analytics_data: true,
    financial_data: true
  }
});

// –ù–∞–ø–µ—á–∞—Ç–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏
const label = await api.fbs.packageLabel({
  posting_number: ['12345-0001-1']
});

// –û—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
const cancelled = await api.fbs.cancelPosting({
  posting_number: '12345-0001-1',
  cancel_reason_id: 402,
  cancel_reason_message: '–¢–æ–≤–∞—Ä –Ω–µ –≤ –Ω–∞–ª–∏—á–∏–∏'
});

// –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
const posting = await api.fbs.getPostingV3({
  posting_number: '12345-0001-1',
  translit: true
});
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ FBS

```typescript
class FbsOrderManager {
  constructor(private api: OzonSellerAPI) {}

  async processAwaitingOrders(): Promise<void> {
    console.log('üì¶ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π FBS');

    // 1. –ü–æ–ª—É—á–∞–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –æ–∂–∏–¥–∞—é—â–∏–µ —Å–±–æ—Ä–∫–∏
    const awaitingPostings = await this.api.fbs.getPostingListV3({
      filter: {
        since: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
        to: new Date().toISOString(),
        status: 'awaiting_packaging'
      },
      limit: 1000,
      with: {
        analytics_data: true,
        financial_data: true
      }
    });

    if (!awaitingPostings.result || awaitingPostings.result.length === 0) {
      console.log('‚úÖ –ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –æ–∂–∏–¥–∞—é—â–∏—Ö —Å–±–æ—Ä–∫–∏');
      return;
    }

    console.log(`üìã –ù–∞–π–¥–µ–Ω–æ ${awaitingPostings.result.length} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏`);

    // 2. –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
    const prioritizedOrders = this.prioritizeOrders(awaitingPostings.result);

    // 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ –≥—Ä—É–ø–ø–∞–º
    for (const [priority, orders] of prioritizedOrders.entries()) {
      console.log(`\nüî• –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ "${priority}": ${orders.length} –∑–∞–∫–∞–∑–æ–≤`);
      
      for (const order of orders) {
        await this.processOrder(order);
        // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–∫–∞–∑–∞–º–∏
        await new Promise(resolve => setTimeout(resolve, 500));
      }
    }

    console.log('\nüéâ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
  }

  private prioritizeOrders(orders: any[]): Map<string, any[]> {
    const prioritized = new Map([
      ['express', []],
      ['premium', []], 
      ['standard', []],
      ['overdue', []]
    ]);

    const now = new Date();

    orders.forEach(order => {
      const shipmentDate = new Date(order.shipment_date);
      const hoursUntilShipment = (shipmentDate.getTime() - now.getTime()) / (1000 * 60 * 60);

      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
      if (hoursUntilShipment < 0) {
        prioritized.get('overdue')?.push(order);
      } else if (order.delivery_method?.name?.includes('Express') || hoursUntilShipment < 2) {
        prioritized.get('express')?.push(order);
      } else if (order.customer?.customer_type === 'premium' || hoursUntilShipment < 12) {
        prioritized.get('premium')?.push(order);
      } else {
        prioritized.get('standard')?.push(order);
      }
    });

    return prioritized;
  }

  private async processOrder(order: any): Promise<void> {
    console.log(`\nüì¶ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞: ${order.posting_number}`);

    try {
      // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤
      const stockStatus = await this.checkStockAvailability(order.products);
      
      if (!stockStatus.allAvailable) {
        await this.handleOutOfStockItems(order, stockStatus.unavailableItems);
        return;
      }

      // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
      const restrictions = await this.checkDeliveryRestrictions(order);
      
      if (!restrictions.canDeliver) {
        await this.handleDeliveryRestrictions(order, restrictions);
        return;
      }

      // 3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —ç—Ç–∏–∫–µ—Ç–∫–∏
      const labelGenerated = await this.generateOrderLabel(order);
      
      if (!labelGenerated) {
        console.log('‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç—Ç–∏–∫–µ—Ç–∫–∏, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–∫–∞–∑');
        return;
      }

      // 4. –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤ —Å—Ç–∞—Ç—É—Å –æ–∂–∏–¥–∞–Ω–∏—è –∫—É—Ä—å–µ—Ä–∞
      await this.moveToAwaitingDelivery(order);
      
      console.log('‚úÖ –ó–∞–∫–∞–∑ –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –∫—É—Ä—å–µ—Ä—É');

    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–∞ ${order.posting_number}:`, error.message);
    }
  }

  private async checkStockAvailability(products: any[]): Promise<{allAvailable: boolean; unavailableItems: any[]}> {
    // –≠–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤
    const unavailableItems = products.filter(product => {
      // –ó–¥–µ—Å—å –±—ã–ª–∞ –±—ã —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
      return Math.random() < 0.1; // 10% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–æ–≤–∞—Ä–∞
    });

    return {
      allAvailable: unavailableItems.length === 0,
      unavailableItems
    };
  }

  private async handleOutOfStockItems(order: any, unavailableItems: any[]): Promise<void> {
    console.log(`‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ ${order.posting_number}: ${unavailableItems.length}`);

    // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã
    const cancelReasons = await this.api.fbs.getCancelReasonsList();
    const outOfStockReasonId = cancelReasons.result?.find(reason => 
      reason.name?.toLowerCase().includes('–Ω–∞–ª–∏—á–∏–∏')
    )?.id || 402;

    // –û—Ç–º–µ–Ω—è–µ–º –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
    const cancelResult = await this.api.fbs.cancelProducts({
      posting_number: order.posting_number,
      products: unavailableItems.map(item => ({
        sku: item.sku,
        quantity: item.quantity,
        cancel_reason_id: outOfStockReasonId
      }))
    });

    // –õ–æ–≥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    cancelResult.result?.forEach(result => {
      if (result.result) {
        console.log(`‚úÖ –¢–æ–≤–∞—Ä ${result.sku} –æ—Ç–º–µ–Ω–µ–Ω`);
      } else {
        console.log(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–º–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞ ${result.sku}: ${result.error}`);
      }
    });

    // –ï—Å–ª–∏ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω—ã, –æ—Ç–º–µ–Ω—è–µ–º –∑–∞–∫–∞–∑ –ø–æ–ª–Ω–æ—Å—Ç—å—é
    const remainingProducts = order.products.filter(p => 
      !unavailableItems.some(u => u.sku === p.sku)
    );

    if (remainingProducts.length === 0) {
      await this.api.fbs.cancelPosting({
        posting_number: order.posting_number,
        cancel_reason_id: outOfStockReasonId,
        cancel_reason_message: '–í—Å–µ —Ç–æ–≤–∞—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ'
      });
      console.log('üö´ –ó–∞–∫–∞–∑ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω–µ–Ω');
    }
  }

  private async checkDeliveryRestrictions(order: any): Promise<{canDeliver: boolean; restrictions?: any}> {
    try {
      const restrictions = await this.api.fbs.getRestrictions({
        posting_number: order.posting_number
      });

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–∞–±–∞—Ä–∏—Ç—ã –∏ –≤–µ—Å
      const totalWeight = order.products.reduce((sum: number, product: any) => 
        sum + (product.weight * product.quantity), 0);
      
      const maxWeight = restrictions.result?.max_weight || Infinity;
      
      if (totalWeight > maxWeight) {
        return {
          canDeliver: false,
          restrictions: { reason: 'weight_exceeded', maxWeight, actualWeight: totalWeight }
        };
      }

      return { canDeliver: true };
    } catch (error) {
      console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É');
      return { canDeliver: true };
    }
  }

  private async handleDeliveryRestrictions(order: any, restrictions: any): Promise<void> {
    console.log(`üìè –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è ${order.posting_number}:`, restrictions.restrictions);

    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–∑–±–∏–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    // –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
    
    console.log('‚ö†Ô∏è –ó–∞–∫–∞–∑ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–æ—Å—Ç–∞–≤–∫–∏');
  }

  private async generateOrderLabel(order: any): Promise<boolean> {
    try {
      console.log(`üè∑Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç—Ç–∏–∫–µ—Ç–∫–∏ –¥–ª—è ${order.posting_number}`);

      const labelResult = await this.api.fbs.packageLabel({
        posting_number: [order.posting_number]
      });

      if (labelResult.content) {
        console.log(`‚úÖ –≠—Ç–∏–∫–µ—Ç–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ (${labelResult.content.length} —Å–∏–º–≤–æ–ª–æ–≤ base64)`);
        
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —ç—Ç–∏–∫–µ—Ç–∫—É –≤ —Ñ–∞–π–ª –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø–µ—á–∞—Ç—å
        // await this.saveLabelToFile(order.posting_number, labelResult.content);
        
        return true;
      } else {
        console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–∏–∫–µ—Ç–∫–∏');
        return false;
      }
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç—Ç–∏–∫–µ—Ç–∫–∏:', error.message);
      return false;
    }
  }

  private async moveToAwaitingDelivery(order: any): Promise<void> {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º API —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ —Å—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    console.log(`üì§ –ó–∞–∫–∞–∑ ${order.posting_number} –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –∫—É—Ä—å–µ—Ä—É`);
  }
}
```

#### –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ FBS

```typescript
class FbsAnalyticsSystem {
  constructor(private api: OzonSellerAPI) {}

  async generateDailyReport(date: string): Promise<void> {
    console.log(`üìä –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç FBS –∑–∞ ${date}`);
    console.log('='.repeat(60));

    const startOfDay = `${date}T00:00:00Z`;
    const endOfDay = `${date}T23:59:59Z`;

    // 1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
    const allPostings = await this.api.fbs.getPostingListV3({
      filter: {
        since: startOfDay,
        to: endOfDay
      },
      limit: 1000,
      with: {
        analytics_data: true,
        financial_data: true
      }
    });

    // 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
    const statusStats = this.analyzePostingStatuses(allPostings.result || []);
    
    console.log('\nüì¶ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º:');
    console.log(`–í—Å–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π: ${allPostings.result?.length || 0}`);
    
    Object.entries(statusStats).forEach(([status, count]) => {
      const percentage = allPostings.result ? ((count / allPostings.result.length) * 100).toFixed(1) : '0';
      console.log(`  ${status}: ${count} (${percentage}%)`);
    });

    // 3. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
    const financialSummary = this.analyzeFinancialData(allPostings.result || []);
    
    console.log('\nüí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞:');
    console.log(`–û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤: ${financialSummary.totalOrderAmount.toFixed(2)} —Ä—É–±.`);
    console.log(`–û–±—â–∞—è –≤—ã–ø–ª–∞—Ç–∞: ${financialSummary.totalPayout.toFixed(2)} —Ä—É–±.`);
    console.log(`–°—Ä–µ–¥–Ω–∏–π —á–µ–∫: ${financialSummary.averageOrderValue.toFixed(2)} —Ä—É–±.`);

    // 4. –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
    const geoStats = this.analyzeGeography(allPostings.result || []);
    
    console.log('\nüåç –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏:');
    const topRegions = Object.entries(geoStats)
      .sort(([,a], [,b]) => b - a)
      .slice(0, 5);
      
    topRegions.forEach(([region, count]) => {
      console.log(`  ${region}: ${count} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π`);
    });

    // 5. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
    await this.analyzeIssues(allPostings.result || []);

    // 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    this.generateRecommendations(statusStats, financialSummary);
  }

  private analyzePostingStatuses(postings: any[]): Record<string, number> {
    const stats: Record<string, number> = {};
    
    postings.forEach(posting => {
      const status = posting.status || 'unknown';
      stats[status] = (stats[status] || 0) + 1;
    });
    
    return stats;
  }

  private analyzeFinancialData(postings: any[]): {
    totalOrderAmount: number;
    totalPayout: number;
    averageOrderValue: number;
  } {
    let totalOrderAmount = 0;
    let totalPayout = 0;
    
    postings.forEach(posting => {
      if (posting.financial_data) {
        totalOrderAmount += posting.financial_data.order_amount || 0;
        totalPayout += posting.financial_data.payout_amount || 0;
      }
    });
    
    return {
      totalOrderAmount,
      totalPayout,
      averageOrderValue: postings.length > 0 ? totalOrderAmount / postings.length : 0
    };
  }

  private analyzeGeography(postings: any[]): Record<string, number> {
    const geoStats: Record<string, number> = {};
    
    postings.forEach(posting => {
      const region = posting.analytics_data?.region || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
      geoStats[region] = (geoStats[region] || 0) + 1;
    });
    
    return geoStats;
  }

  private async analyzeIssues(postings: any[]): Promise<void> {
    console.log('\n‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º:');

    // –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
    const now = new Date();
    const overduePostings = postings.filter(posting => {
      const shipmentDate = new Date(posting.shipment_date);
      return shipmentDate < now && posting.status === 'awaiting_packaging';
    });

    if (overduePostings.length > 0) {
      console.log(`üö® –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤: ${overduePostings.length}`);
      
      // –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –ø—Ä–æ—Å—Ä–æ—á–µ–∫
      const reasonsMap = new Map();
      for (const posting of overduePostings.slice(0, 10)) { // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ 10
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω –ø—Ä–æ—Å—Ä–æ—á–µ–∫
        const reason = '–¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞';
        reasonsMap.set(reason, (reasonsMap.get(reason) || 0) + 1);
      }
      
      console.log('–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ—Å—Ä–æ—á–µ–∫:');
      Array.from(reasonsMap.entries()).forEach(([reason, count]) => {
        console.log(`  ${reason}: ${count} —Å–ª—É—á–∞–µ–≤`);
      });
    }

    // –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
    const cancelledPostings = postings.filter(p => p.status === 'cancelled');
    if (cancelledPostings.length > 0) {
      console.log(`‚ùå –û—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤: ${cancelledPostings.length}`);
      
      // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º –æ—Ç–º–µ–Ω
      if (cancelledPostings.length > 0) {
        try {
          const cancelReasons = await this.api.fbs.getCancelReasons({
            related_posting_numbers: cancelledPostings.slice(0, 5).map(p => p.posting_number)
          });
          
          // –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –æ—Ç–º–µ–Ω
          const reasonStats = new Map();
          cancelReasons.result?.forEach(posting => {
            posting.cancel_reasons?.forEach(reason => {
              reasonStats.set(reason.name, (reasonStats.get(reason.name) || 0) + 1);
            });
          });
          
          if (reasonStats.size > 0) {
            console.log('–ü—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω:');
            Array.from(reasonStats.entries()).forEach(([reason, count]) => {
              console.log(`  ${reason}: ${count} —Å–ª—É—á–∞–µ–≤`);
            });
          }
        } catch (error) {
          console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø—Ä–∏—á–∏–Ω –æ—Ç–º–µ–Ω');
        }
      }
    }
  }

  private generateRecommendations(
    statusStats: Record<string, number>, 
    financialSummary: any
  ): void {
    console.log('\nüí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:');

    const awaitingCount = statusStats['awaiting_packaging'] || 0;
    const deliveredCount = statusStats['delivered'] || 0;
    const cancelledCount = statusStats['cancelled'] || 0;
    const totalCount = Object.values(statusStats).reduce((sum, count) => sum + count, 0);

    // –ê–Ω–∞–ª–∏–∑ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    if (awaitingCount > deliveredCount) {
      console.log('üìà –£–≤–µ–ª–∏—á—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ –∑–∞–∫–∞–∑–æ–≤ - –º–Ω–æ–≥–æ –∑–∞–∫–∞–∑–æ–≤ –æ–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏');
    }

    // –ê–Ω–∞–ª–∏–∑ –æ—Ç–º–µ–Ω
    const cancellationRate = totalCount > 0 ? (cancelledCount / totalCount) * 100 : 0;
    if (cancellationRate > 5) {
      console.log(`üìâ –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–º–µ–Ω (${cancellationRate.toFixed(1)}%) - –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã`);
    }

    // –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    if (financialSummary.averageOrderValue < 1000) {
      console.log('üí∞ –ù–∏–∑–∫–∏–π —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∫—Ä–æ—Å—Å-–ø—Ä–æ–¥–∞–∂–∏ –∏ –∞–ø—Å–µ–ª–ª–∏–Ω–≥');
    }

    // –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    console.log('üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫');
    console.log('üìä –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ KPI –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–∏—Å–∞');
    console.log('üîî –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è');
  }

  async monitorRealTime(): Promise<void> {
    console.log('üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ FBS –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏');

    const checkInterval = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç
    
    setInterval(async () => {
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 –º–∏–Ω—É—Ç
        const recentPostings = await this.api.fbs.getPostingListV3({
          filter: {
            since: new Date(Date.now() - 15 * 60 * 1000).toISOString(),
            to: new Date().toISOString(),
            status: 'awaiting_packaging'
          },
          limit: 100
        });

        if (recentPostings.result && recentPostings.result.length > 0) {
          console.log(`üîî –ù–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç: ${recentPostings.result.length}`);
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ä–æ—á–Ω—ã–µ –∑–∞–∫–∞–∑—ã
          const urgentOrders = recentPostings.result.filter(posting => {
            const shipmentDate = new Date(posting.shipment_date);
            const hoursUntilShipment = (shipmentDate.getTime() - Date.now()) / (1000 * 60 * 60);
            return hoursUntilShipment < 2; // –ú–µ–Ω–µ–µ 2 —á–∞—Å–æ–≤ –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏
          });

          if (urgentOrders.length > 0) {
            console.log(`üö® –°–†–û–ß–ù–û: ${urgentOrders.length} –∑–∞–∫–∞–∑–æ–≤ —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏!`);
          }
        }
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:', error.message);
      }
    }, checkInterval);
  }
}
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫

```typescript
class FbsLabelPrintingService {
  constructor(private api: OzonSellerAPI) {}

  async processBatchLabelPrinting(): Promise<void> {
    console.log('üè∑Ô∏è –ü–∞–∫–µ—Ç–Ω–∞—è –ø–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫ FBS');

    // 1. –ü–æ–ª—É—á–∞–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –≥–æ—Ç–æ–≤—ã–µ –∫ –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫
    const readyForLabels = await this.api.fbs.getPostingListV3({
      filter: {
        since: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
        to: new Date().toISOString(),
        status: 'awaiting_deliver'
      },
      limit: 500
    });

    if (!readyForLabels.result || readyForLabels.result.length === 0) {
      console.log('‚úÖ –ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫');
      return;
    }

    console.log(`üìã –ù–∞–π–¥–µ–Ω–æ ${readyForLabels.result.length} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫`);

    // 2. –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –±–∞—Ç—á–∞–º (–º–∞–∫—Å–∏–º—É–º 20 –Ω–∞ –±–∞—Ç—á –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–µ—á–∞—Ç–∏)
    const batches = this.createBatches(readyForLabels.result, 20);

    console.log(`üì¶ –°–æ–∑–¥–∞–Ω–æ ${batches.length} –±–∞—Ç—á–µ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏`);

    // 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π –±–∞—Ç—á
    for (let i = 0; i < batches.length; i++) {
      const batch = batches[i];
      console.log(`\nüîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–∞ ${i + 1}/${batches.length} (${batch.length} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π)`);

      if (batch.length <= 10) {
        // –ù–µ–±–æ–ª—å—à–∏–µ –±–∞—Ç—á–∏ - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—á–∞—Ç—å
        await this.processSyncBatch(batch);
      } else {
        // –ë–æ–ª—å—à–∏–µ –±–∞—Ç—á–∏ - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—á–∞—Ç—å
        await this.processAsyncBatch(batch);
      }

      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
      await new Promise(resolve => setTimeout(resolve, 2000));
    }

    console.log('\nüéâ –ü–∞–∫–µ—Ç–Ω–∞—è –ø–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
  }

  private createBatches<T>(items: T[], batchSize: number): T[][] {
    const batches: T[][] = [];
    for (let i = 0; i < items.length; i += batchSize) {
      batches.push(items.slice(i, i + batchSize));
    }
    return batches;
  }

  private async processSyncBatch(postings: any[]): Promise<void> {
    const postingNumbers = postings.map(p => p.posting_number);
    
    try {
      console.log(`üè∑Ô∏è –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—á–∞—Ç—å –¥–ª—è ${postingNumbers.length} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π`);

      const labelResult = await this.api.fbs.packageLabel({
        posting_number: postingNumbers
      });

      if (labelResult.content) {
        console.log(`‚úÖ –≠—Ç–∏–∫–µ—Ç–∫–∏ –ø–æ–ª—É—á–µ–Ω—ã (${labelResult.content.length} —Å–∏–º–≤–æ–ª–æ–≤ base64)`);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —ç—Ç–∏–∫–µ—Ç–∫–∏
        const fileName = `labels_batch_${Date.now()}.pdf`;
        await this.saveLabelFile(fileName, labelResult.content);
        
        console.log(`üíæ –≠—Ç–∏–∫–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª: ${fileName}`);
      } else {
        console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–∏–∫–µ—Ç–æ–∫');
      }
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–µ—á–∞—Ç–∏:', error.message);
    }
  }

  private async processAsyncBatch(postings: any[]): Promise<void> {
    const postingNumbers = postings.map(p => p.posting_number);
    
    try {
      console.log(`‚è≥ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—á–∞—Ç—å –¥–ª—è ${postingNumbers.length} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π`);

      // –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø–µ—á–∞—Ç—å
      const batchTask = await this.api.fbs.createLabelBatchV2({
        posting_number: postingNumbers
      });

      if (!batchTask.result?.task_id) {
        console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø–µ—á–∞—Ç—å');
        return;
      }

      console.log(`üìã –°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞–Ω–∏–µ: ${batchTask.result.task_id}`);

      // –ñ–¥–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
      const labelResult = await this.waitForBatchCompletion(batchTask.result.task_id);

      if (labelResult && labelResult.file_url) {
        console.log(`‚úÖ –≠—Ç–∏–∫–µ—Ç–∫–∏ –≥–æ—Ç–æ–≤—ã: ${labelResult.file_url}`);
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª
        await this.downloadAndSaveLabelFile(labelResult.file_url, `batch_${batchTask.result.task_id}.pdf`);
      } else {
        console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª —Å —ç—Ç–∏–∫–µ—Ç–∫–∞–º–∏');
      }
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–µ—á–∞—Ç–∏:', error.message);
    }
  }

  private async waitForBatchCompletion(taskId: number, maxAttempts: number = 30): Promise<any> {
    const delay = 2000; // 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

    for (let attempt = 0; attempt < maxAttempts; attempt++) {
      try {
        const result = await this.api.fbs.getLabelBatch({ task_id: taskId });

        if (result.result?.status === 'completed') {
          return result.result;
        } else if (result.result?.status === 'failed') {
          throw new Error(`–ó–∞–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å –æ—à–∏–±–∫–æ–π: ${result.result.error_message}`);
        }

        console.log(`‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è... (${attempt + 1}/${maxAttempts})`);
        await new Promise(resolve => setTimeout(resolve, delay));
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞–Ω–∏—è:', error.message);
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }

    throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è');
  }

  private async saveLabelFile(fileName: string, base64Content: string): Promise<void> {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞
    console.log(`üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º ${fileName} (${base64Content.length} –±–∞–π—Ç base64)`);
    
    // –ü—Ä–∏–º–µ—Ä –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è base64 –≤ Buffer
    // const pdfBuffer = Buffer.from(base64Content, 'base64');
    // await fs.writeFile(fileName, pdfBuffer);
  }

  private async downloadAndSaveLabelFile(fileUrl: string, fileName: string): Promise<void> {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –ø–æ URL
    console.log(`üåê –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª —Å URL: ${fileUrl}`);
    console.log(`üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫: ${fileName}`);
    
    // –ü—Ä–∏–º–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏:
    // const response = await fetch(fileUrl);
    // const buffer = await response.buffer();
    // await fs.writeFile(fileName, buffer);
  }

  async printLabelsForUrgentOrders(): Promise<void> {
    console.log('üö® –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫ –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤');

    // –ü–æ–ª—É—á–∞–µ–º –∑–∞–∫–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ—Ç–≥—Ä—É–∑–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–∏–µ 2 —á–∞—Å–∞
    const urgentPostings = await this.api.fbs.getPostingListV3({
      filter: {
        since: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(), // –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —á–∞—Å–æ–≤
        to: new Date().toISOString(),
        status: 'awaiting_deliver'
      },
      limit: 100
    });

    if (!urgentPostings.result) {
      console.log('‚úÖ –°—Ä–æ—á–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
      return;
    }

    // –§–∏–ª—å—Ç—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–æ—á–Ω—ã–µ
    const now = new Date();
    const reallyUrgent = urgentPostings.result.filter(posting => {
      const shipmentDate = new Date(posting.shipment_date);
      const hoursUntilShipment = (shipmentDate.getTime() - now.getTime()) / (1000 * 60 * 60);
      return hoursUntilShipment < 2 && hoursUntilShipment > 0;
    });

    if (reallyUrgent.length === 0) {
      console.log('‚úÖ –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö —Å—Ä–æ—á–Ω–æ–π –ø–µ—á–∞—Ç–∏');
      return;
    }

    console.log(`üö® –ù–∞–π–¥–µ–Ω–æ ${reallyUrgent.length} —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤`);

    // –ü–µ—á–∞—Ç–∞–µ–º —ç—Ç–∏–∫–µ—Ç–∫–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–Ω–µ–±–æ–ª—å—à–∏–º–∏ –±–∞—Ç—á–∞–º–∏)
    const urgentBatches = this.createBatches(reallyUrgent, 5);
    
    for (const batch of urgentBatches) {
      await this.processSyncBatch(batch);
      console.log(`‚úÖ –°—Ä–æ—á–Ω–∞—è –ø–µ—á–∞—Ç—å –¥–ª—è ${batch.length} –∑–∞–∫–∞–∑–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞`);
    }
  }
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
try {
  await api.fbs.packageLabel({
    posting_number: ['12345-0001-1']
  });
} catch (error) {
  if (error.response?.status === 400) {
    console.error('–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error.response.data);
  } else if (error.response?.status === 404) {
    console.error('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
  } else if (error.response?.status === 409) {
    console.error('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–º —Å—Ç–∞—Ç—É—Å–µ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏');
  } else if (error.response?.status === 429) {
    console.error('–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∑–¥–Ω–µ–µ');
  } else {
    console.error('–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', error.message);
  }
}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ —ç—Ç–∏–∫–µ—Ç–∫–∏ —á–µ—Ä–µ–∑ 45-60 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∑–∞–∫–∞–∑–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch-–æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫ (–¥–æ 20 –∑–∞ —Ä–∞–∑)
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –∑–∞–∫–∞–∑—ã –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º –∏ —Å—Ä–æ–∫–∞–º –æ—Ç–≥—Ä—É–∑–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ KPI
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –≤—Ä–µ–º—è –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### üè∑Ô∏è –†–∞–±–æ—Ç–∞ —Å —ç—Ç–∏–∫–µ—Ç–∫–∞–º–∏
- –î–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø–∞—Ä—Ç–∏–π (–¥–æ 10) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –ø–µ—á–∞—Ç—å
- –î–ª—è –±–æ–ª—å—à–∏—Ö –ø–∞—Ä—Ç–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∫–æ–ø–∏–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫ –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–µ—á–∞—Ç—å –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç—É—Å—ã —Å OZON
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –∑–∞–∫–∞–∑–æ–≤ –≤ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–ø–æ—Ä–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∞—Ä–±–∏—Ç—Ä–∞–∂

### üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º (WMS)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–º–µ–Ω—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å —É—á–µ—Ç–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

FBS API –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ —Å—Ö–µ–º—ã "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–º", –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –¥–æ —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é.